if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(e){"use strict";var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1||t[0]>3)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(jQuery),function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in t)if(void 0!==e.style[i])return{end:t[i]};return!1}e.fn.emulateTransitionEnd=function(t){var i=!1,n=this;e(this).one("bsTransitionEnd",function(){i=!0});var a=function(){i||e(n).trigger(e.support.transition.end)};return setTimeout(a,t),this},e(function(){e.support.transition=t(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){if(e(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var i=e(this),a=i.data("bs.alert");a||i.data("bs.alert",a=new n(this)),"string"==typeof t&&a[t].call(i)})}var i='[data-dismiss="alert"]',n=function(t){e(t).on("click",i,this.close)};n.VERSION="3.4.0",n.TRANSITION_DURATION=150,n.prototype.close=function(t){function i(){r.detach().trigger("closed.bs.alert").remove()}var a=e(this),o=a.attr("data-target");o||(o=a.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,"")),o="#"===o?[]:o;var r=e(document).find(o);t&&t.preventDefault(),r.length||(r=a.closest(".alert")),r.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(r.removeClass("in"),e.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i())};var a=e.fn.alert;e.fn.alert=t,e.fn.alert.Constructor=n,e.fn.alert.noConflict=function(){return e.fn.alert=a,this},e(document).on("click.bs.alert.data-api",i,n.prototype.close)}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var n=e(this),a=n.data("bs.button"),o="object"==typeof t&&t;a||n.data("bs.button",a=new i(this,o)),"toggle"==t?a.toggle():t&&a.setState(t)})}var i=function(t,n){this.$element=e(t),this.options=e.extend({},i.DEFAULTS,n),this.isLoading=!1};i.VERSION="3.4.0",i.DEFAULTS={loadingText:"loading..."},i.prototype.setState=function(t){var i="disabled",n=this.$element,a=n.is("input")?"val":"html",o=n.data();t+="Text",null==o.resetText&&n.data("resetText",n[a]()),setTimeout(e.proxy(function(){n[a](null==o[t]?this.options[t]:o[t]),"loadingText"==t?(this.isLoading=!0,n.addClass(i).attr(i,i).prop(i,!0)):this.isLoading&&(this.isLoading=!1,n.removeClass(i).removeAttr(i).prop(i,!1))},this),0)},i.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var i=this.$element.find("input");"radio"==i.prop("type")?(i.prop("checked")&&(e=!1),t.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==i.prop("type")&&(i.prop("checked")!==this.$element.hasClass("active")&&(e=!1),this.$element.toggleClass("active")),i.prop("checked",this.$element.hasClass("active")),e&&i.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var n=e.fn.button;e.fn.button=t,e.fn.button.Constructor=i,e.fn.button.noConflict=function(){return e.fn.button=n,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(i){var n=e(i.target).closest(".btn");t.call(n,"toggle"),e(i.target).is('input[type="radio"], input[type="checkbox"]')||(i.preventDefault(),n.is("input,button")?n.trigger("focus"):n.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var n=e(this),a=n.data("bs.carousel"),o=e.extend({},i.DEFAULTS,n.data(),"object"==typeof t&&t),r="string"==typeof t?t:o.slide;a||n.data("bs.carousel",a=new i(this,o)),"number"==typeof t?a.to(t):r?a[r]():o.interval&&a.pause().cycle()})}var i=function(t,i){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};i.VERSION="3.4.0",i.TRANSITION_DURATION=600,i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},i.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},i.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},i.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},i.prototype.getItemForDirection=function(e,t){var i=this.getItemIndex(t);if(("prev"==e&&0===i||"next"==e&&i==this.$items.length-1)&&!this.options.wrap)return t;var n="prev"==e?-1:1,a=(i+n)%this.$items.length;return this.$items.eq(a)},i.prototype.to=function(e){var t=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(e>this.$items.length-1||e<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):i==e?this.pause().cycle():this.slide(e>i?"next":"prev",this.$items.eq(e))},i.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){if(!this.sliding)return this.slide("next")},i.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},i.prototype.slide=function(t,n){var a=this.$element.find(".item.active"),o=n||this.getItemForDirection(t,a),r=this.interval,s="next"==t?"left":"right",l=this;if(o.hasClass("active"))return this.sliding=!1;var d=o[0],c=e.Event("slide.bs.carousel",{relatedTarget:d,direction:s});if(this.$element.trigger(c),!c.isDefaultPrevented()){if(this.sliding=!0,r&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var p=e(this.$indicators.children()[this.getItemIndex(o)]);p&&p.addClass("active")}var h=e.Event("slid.bs.carousel",{relatedTarget:d,direction:s});return e.support.transition&&this.$element.hasClass("slide")?(o.addClass(t),"object"==typeof o&&o.length&&o[0].offsetWidth,a.addClass(s),o.addClass(s),a.one("bsTransitionEnd",function(){o.removeClass([t,s].join(" ")).addClass("active"),a.removeClass(["active",s].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(h)},0)}).emulateTransitionEnd(i.TRANSITION_DURATION)):(a.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger(h)),r&&this.cycle(),this}};var n=e.fn.carousel;e.fn.carousel=t,e.fn.carousel.Constructor=i,e.fn.carousel.noConflict=function(){return e.fn.carousel=n,this};var a=function(i){var n=e(this),a=n.attr("href");a&&(a=a.replace(/.*(?=#[^\s]+$)/,""));var o=n.attr("data-target")||a,r=e(document).find(o);if(r.hasClass("carousel")){var s=e.extend({},r.data(),n.data()),l=n.attr("data-slide-to");l&&(s.interval=!1),t.call(r,s),l&&r.data("bs.carousel").to(l),i.preventDefault()}};e(document).on("click.bs.carousel.data-api","[data-slide]",a).on("click.bs.carousel.data-api","[data-slide-to]",a),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var i=e(this);t.call(i,i.data())})})}(jQuery),function(e){"use strict";function t(t){var i,n=t.attr("data-target")||(i=t.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return e(document).find(n)}function i(t){return this.each(function(){var i=e(this),a=i.data("bs.collapse"),o=e.extend({},n.DEFAULTS,i.data(),"object"==typeof t&&t);!a&&o.toggle&&/show|hide/.test(t)&&(o.toggle=!1),a||i.data("bs.collapse",a=new n(this,o)),"string"==typeof t&&a[t]()})}var n=function(t,i){this.$element=e(t),this.options=e.extend({},n.DEFAULTS,i),this.$trigger=e('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};n.VERSION="3.4.0",n.TRANSITION_DURATION=350,n.DEFAULTS={toggle:!0},n.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},n.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t,a=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(a&&a.length&&(t=a.data("bs.collapse"))&&t.transitioning)){var o=e.Event("show.bs.collapse");if(this.$element.trigger(o),!o.isDefaultPrevented()){a&&a.length&&(i.call(a,"hide"),t||a.data("bs.collapse",null));var r=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[r](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[r](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return s.call(this);var l=e.camelCase(["scroll",r].join("-"));this.$element.one("bsTransitionEnd",e.proxy(s,this)).emulateTransitionEnd(n.TRANSITION_DURATION)[r](this.$element[0][l])}}}},n.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var a=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!e.support.transition)return a.call(this);this.$element[i](0).one("bsTransitionEnd",e.proxy(a,this)).emulateTransitionEnd(n.TRANSITION_DURATION)}}},n.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},n.prototype.getParent=function(){return e(document).find(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(i,n){var a=e(n);this.addAriaAndCollapsedClass(t(a),a)},this)).end()},n.prototype.addAriaAndCollapsedClass=function(e,t){var i=e.hasClass("in");e.attr("aria-expanded",i),t.toggleClass("collapsed",!i).attr("aria-expanded",i)};var a=e.fn.collapse;e.fn.collapse=i,e.fn.collapse.Constructor=n,e.fn.collapse.noConflict=function(){return e.fn.collapse=a,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(n){var a=e(this);a.attr("data-target")||n.preventDefault();var o=t(a),r=o.data("bs.collapse"),s=r?"toggle":a.data();i.call(o,s)})}(jQuery),function(e){"use strict";function t(t){var i=t.attr("data-target");i||(i=t.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var n=i&&e(document).find(i);return n&&n.length?n:t.parent()}function i(i){i&&3===i.which||(e(a).remove(),e(o).each(function(){var n=e(this),a=t(n),o={relatedTarget:this};a.hasClass("open")&&(i&&"click"==i.type&&/input|textarea/i.test(i.target.tagName)&&e.contains(a[0],i.target)||(a.trigger(i=e.Event("hide.bs.dropdown",o)),i.isDefaultPrevented()||(n.attr("aria-expanded","false"),a.removeClass("open").trigger(e.Event("hidden.bs.dropdown",o)))))}))}function n(t){return this.each(function(){var i=e(this),n=i.data("bs.dropdown");n||i.data("bs.dropdown",n=new r(this)),"string"==typeof t&&n[t].call(i)})}var a=".dropdown-backdrop",o='[data-toggle="dropdown"]',r=function(t){e(t).on("click.bs.dropdown",this.toggle)};r.VERSION="3.4.0",r.prototype.toggle=function(n){var a=e(this);if(!a.is(".disabled, :disabled")){var o=t(a),r=o.hasClass("open");if(i(),!r){"ontouchstart"in document.documentElement&&!o.closest(".navbar-nav").length&&e(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(e(this)).on("click",i);var s={relatedTarget:this};if(o.trigger(n=e.Event("show.bs.dropdown",s)),n.isDefaultPrevented())return;a.trigger("focus").attr("aria-expanded","true"),o.toggleClass("open").trigger(e.Event("shown.bs.dropdown",s))}return!1}},r.prototype.keydown=function(i){if(/(38|40|27|32)/.test(i.which)&&!/input|textarea/i.test(i.target.tagName)){var n=e(this);if(i.preventDefault(),i.stopPropagation(),!n.is(".disabled, :disabled")){var a=t(n),r=a.hasClass("open");if(!r&&27!=i.which||r&&27==i.which)return 27==i.which&&a.find(o).trigger("focus"),n.trigger("click");var s=a.find(".dropdown-menu li:not(.disabled):visible a");if(s.length){var l=s.index(i.target);38==i.which&&l>0&&l--,40==i.which&&l<s.length-1&&l++,~l||(l=0),s.eq(l).trigger("focus")}}}};var s=e.fn.dropdown;e.fn.dropdown=n,e.fn.dropdown.Constructor=r,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=s,this},e(document).on("click.bs.dropdown.data-api",i).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",o,r.prototype.toggle).on("keydown.bs.dropdown.data-api",o,r.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",r.prototype.keydown)}(jQuery),function(e){"use strict";function t(t,n){return this.each(function(){var a=e(this),o=a.data("bs.modal"),r=e.extend({},i.DEFAULTS,a.data(),"object"==typeof t&&t);o||a.data("bs.modal",o=new i(this,r)),"string"==typeof t?o[t](n):r.show&&o.show(n)})}var i=function(t,i){this.options=i,this.$body=e(document.body),this.$element=e(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.fixedContent=".navbar-fixed-top, .navbar-fixed-bottom",this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};i.VERSION="3.4.0",i.TRANSITION_DURATION=300,i.BACKDROP_TRANSITION_DURATION=150,i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},i.prototype.show=function(t){var n=this,a=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(a),this.isShown||a.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){n.$element.one("mouseup.dismiss.bs.modal",function(t){e(t.target).is(n.$element)&&(n.ignoreBackdropClick=!0)})}),this.backdrop(function(){var a=e.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(n.$body),n.$element.show().scrollTop(0),n.adjustDialog(),a&&n.$element[0].offsetWidth,n.$element.addClass("in"),n.enforceFocus();var o=e.Event("shown.bs.modal",{relatedTarget:t});a?n.$dialog.one("bsTransitionEnd",function(){n.$element.trigger("focus").trigger(o)}).emulateTransitionEnd(i.TRANSITION_DURATION):n.$element.trigger("focus").trigger(o)}))},i.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(i.TRANSITION_DURATION):this.hideModal())},i.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){document===e.target||this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},i.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},i.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(t){var n=this,a=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var o=e.support.transition&&a;if(this.$backdrop=e(document.createElement("div")).addClass("modal-backdrop "+a).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){if(this.ignoreBackdropClick)return void(this.ignoreBackdropClick=!1);e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide())},this)),o&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;o?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var r=function(){n.removeBackdrop(),t&&t()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",r).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):r()}else t&&t()},i.prototype.handleUpdate=function(){this.adjustDialog()},i.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},i.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},i.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},i.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"";var i=this.scrollbarWidth;this.bodyIsOverflowing&&(this.$body.css("padding-right",t+i),e(this.fixedContent).each(function(t,n){var a=n.style.paddingRight,o=e(n).css("padding-right");e(n).data("padding-right",a).css("padding-right",parseFloat(o)+i+"px")}))},i.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad),e(this.fixedContent).each(function(t,i){var n=e(i).data("padding-right");e(i).removeData("padding-right"),i.style.paddingRight=n||""})},i.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var n=e.fn.modal;e.fn.modal=t,e.fn.modal.Constructor=i,e.fn.modal.noConflict=function(){return e.fn.modal=n,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var n=e(this),a=n.attr("href"),o=n.attr("data-target")||a&&a.replace(/.*(?=#[^\s]+$)/,""),r=e(document).find(o),s=r.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(a)&&a},r.data(),n.data());n.is("a")&&i.preventDefault(),r.one("show.bs.modal",function(e){e.isDefaultPrevented()||r.one("hidden.bs.modal",function(){n.is(":visible")&&n.trigger("focus")})}),t.call(r,s,this)})}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var n=e(this),a=n.data("bs.tooltip"),o="object"==typeof t&&t;!a&&/destroy|hide/.test(t)||(a||n.data("bs.tooltip",a=new i(this,o)),"string"==typeof t&&a[t]())})}var i=function(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",e,t)};i.VERSION="3.4.0",i.TRANSITION_DURATION=150,i.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},i.prototype.init=function(t,i,n){if(this.enabled=!0,this.type=t,this.$element=e(i),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&e(document).find(e.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var a=this.options.trigger.split(" "),o=a.length;o--;){var r=a[o];if("click"==r)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=r){var s="hover"==r?"mouseenter":"focusin",l="hover"==r?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},i.prototype.getDelegateOptions=function(){var t={},i=this.getDefaults();return this._options&&e.each(this._options,function(e,n){i[e]!=n&&(t[e]=n)}),t},i.prototype.enter=function(t){var i=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,i)),t instanceof e.Event&&(i.inState["focusin"==t.type?"focus":"hover"]=!0),i.tip().hasClass("in")||"in"==i.hoverState?void(i.hoverState="in"):(clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show())},i.prototype.isInStateTrue=function(){for(var e in this.inState)if(this.inState[e])return!0;return!1},i.prototype.leave=function(t){var i=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);if(i||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,i)),t instanceof e.Event&&(i.inState["focusout"==t.type?"focus":"hover"]=!1),!i.isInStateTrue()){if(clearTimeout(i.timeout),i.hoverState="out",!i.options.delay||!i.options.delay.hide)return i.hide();i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)}},i.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var n=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!n)return;var a=this,o=this.tip(),r=this.getUID(this.type);this.setContent(),o.attr("id",r),this.$element.attr("aria-describedby",r),this.options.animation&&o.addClass("fade");var s="function"==typeof this.options.placement?this.options.placement.call(this,o[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,d=l.test(s);d&&(s=s.replace(l,"")||"top"),o.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this),this.options.container?o.appendTo(e(document).find(this.options.container)):o.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var c=this.getPosition(),p=o[0].offsetWidth,h=o[0].offsetHeight;if(d){var u=s,f=this.getPosition(this.$viewport);s="bottom"==s&&c.bottom+h>f.bottom?"top":"top"==s&&c.top-h<f.top?"bottom":"right"==s&&c.right+p>f.width?"left":"left"==s&&c.left-p<f.left?"right":s,o.removeClass(u).addClass(s)}var m=this.getCalculatedOffset(s,c,p,h);this.applyPlacement(m,s);var g=function(){var e=a.hoverState;a.$element.trigger("shown.bs."+a.type),a.hoverState=null,"out"==e&&a.leave(a)};e.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",g).emulateTransitionEnd(i.TRANSITION_DURATION):g()}},i.prototype.applyPlacement=function(t,i){var n=this.tip(),a=n[0].offsetWidth,o=n[0].offsetHeight,r=parseInt(n.css("margin-top"),10),s=parseInt(n.css("margin-left"),10);isNaN(r)&&(r=0),isNaN(s)&&(s=0),t.top+=r,t.left+=s,e.offset.setOffset(n[0],e.extend({using:function(e){n.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),n.addClass("in");var l=n[0].offsetWidth,d=n[0].offsetHeight;"top"==i&&d!=o&&(t.top=t.top+o-d);var c=this.getViewportAdjustedDelta(i,t,l,d);c.left?t.left+=c.left:t.top+=c.top;var p=/top|bottom/.test(i),h=p?2*c.left-a+l:2*c.top-o+d,u=p?"offsetWidth":"offsetHeight";n.offset(t),this.replaceArrow(h,n[0][u],p)},i.prototype.replaceArrow=function(e,t,i){this.arrow().css(i?"left":"top",50*(1-e/t)+"%").css(i?"top":"left","")},i.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},i.prototype.hide=function(t){function n(){"in"!=a.hoverState&&o.detach(),a.$element&&a.$element.removeAttr("aria-describedby").trigger("hidden.bs."+a.type),t&&t()}var a=this,o=e(this.$tip),r=e.Event("hide.bs."+this.type);if(this.$element.trigger(r),!r.isDefaultPrevented())return o.removeClass("in"),e.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n(),this.hoverState=null,this},i.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},i.prototype.hasContent=function(){return this.getTitle()},i.prototype.getPosition=function(t){t=t||this.$element;var i=t[0],n="BODY"==i.tagName,a=i.getBoundingClientRect();null==a.width&&(a=e.extend({},a,{width:a.right-a.left,height:a.bottom-a.top}));var o=window.SVGElement&&i instanceof window.SVGElement,r=n?{top:0,left:0}:o?null:t.offset(),s={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},l=n?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},a,s,l,r)},i.prototype.getCalculatedOffset=function(e,t,i,n){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-i/2}:"top"==e?{top:t.top-n,left:t.left+t.width/2-i/2}:"left"==e?{top:t.top+t.height/2-n/2,left:t.left-i}:{top:t.top+t.height/2-n/2,left:t.left+t.width}},i.prototype.getViewportAdjustedDelta=function(e,t,i,n){var a={top:0,left:0};if(!this.$viewport)return a;var o=this.options.viewport&&this.options.viewport.padding||0,r=this.getPosition(this.$viewport);if(/right|left/.test(e)){var s=t.top-o-r.scroll,l=t.top+o-r.scroll+n;s<r.top?a.top=r.top-s:l>r.top+r.height&&(a.top=r.top+r.height-l)}else{var d=t.left-o,c=t.left+o+i;d<r.left?a.left=r.left-d:c>r.right&&(a.left=r.left+r.width-c)}return a},i.prototype.getTitle=function(){var e=this.$element,t=this.options;return e.attr("data-original-title")||("function"==typeof t.title?t.title.call(e[0]):t.title)},i.prototype.getUID=function(e){do{e+=~~(1e6*Math.random())}while(document.getElementById(e));return e},i.prototype.tip=function(){if(!this.$tip&&(this.$tip=e(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},i.prototype.enable=function(){this.enabled=!0},i.prototype.disable=function(){this.enabled=!1},i.prototype.toggleEnabled=function(){this.enabled=!this.enabled},i.prototype.toggle=function(t){var i=this;t&&((i=e(t.currentTarget).data("bs."+this.type))||(i=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,i))),t?(i.inState.click=!i.inState.click,i.isInStateTrue()?i.enter(i):i.leave(i)):i.tip().hasClass("in")?i.leave(i):i.enter(i)},i.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type),e.$tip&&e.$tip.detach(),e.$tip=null,e.$arrow=null,e.$viewport=null,e.$element=null})};var n=e.fn.tooltip;e.fn.tooltip=t,e.fn.tooltip.Constructor=i,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=n,this}}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var n=e(this),a=n.data("bs.popover"),o="object"==typeof t&&t;!a&&/destroy|hide/.test(t)||(a||n.data("bs.popover",a=new i(this,o)),"string"==typeof t&&a[t]())})}var i=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");i.VERSION="3.4.0",i.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),i.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),i.prototype.constructor=i,i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),i=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof i?"html":"append":"text"](i),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},i.prototype.hasContent=function(){return this.getTitle()||this.getContent()},i.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var n=e.fn.popover;e.fn.popover=t,e.fn.popover.Constructor=i,e.fn.popover.noConflict=function(){return e.fn.popover=n,this}}(jQuery),function(e){"use strict";function t(i,n){this.$body=e(document.body),this.$scrollElement=e(e(i).is(document.body)?window:i),this.options=e.extend({},t.DEFAULTS,n),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e.proxy(this.process,this)),this.refresh(),this.process()}function i(i){return this.each(function(){var n=e(this),a=n.data("bs.scrollspy"),o="object"==typeof i&&i;a||n.data("bs.scrollspy",a=new t(this,o)),"string"==typeof i&&a[i]()})}t.VERSION="3.4.0",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t=this,i="offset",n=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),e.isWindow(this.$scrollElement[0])||(i="position",n=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var t=e(this),a=t.data("target")||t.attr("href"),o=/^#./.test(a)&&e(a);return o&&o.length&&o.is(":visible")&&[[o[i]().top+n,a]]||null}).sort(function(e,t){return e[0]-t[0]
}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),n=this.options.offset+i-this.$scrollElement.height(),a=this.offsets,o=this.targets,r=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),t>=n)return r!=(e=o[o.length-1])&&this.activate(e);if(r&&t<a[0])return this.activeTarget=null,this.clear();for(e=a.length;e--;)r!=o[e]&&t>=a[e]&&(void 0===a[e+1]||t<a[e+1])&&this.activate(o[e])},t.prototype.activate=function(t){this.activeTarget=t,this.clear();var i=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',n=e(i).parents("li").addClass("active");n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate.bs.scrollspy")},t.prototype.clear=function(){e(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var n=e.fn.scrollspy;e.fn.scrollspy=i,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=n,this},e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);i.call(t,t.data())})})}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var n=e(this),a=n.data("bs.tab");a||n.data("bs.tab",a=new i(this)),"string"==typeof t&&a[t]()})}var i=function(t){this.element=e(t)};i.VERSION="3.4.0",i.TRANSITION_DURATION=150,i.prototype.show=function(){var t=this.element,i=t.closest("ul:not(.dropdown-menu)"),n=t.data("target");if(n||(n=t.attr("href"),n=n&&n.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var a=i.find(".active:last a"),o=e.Event("hide.bs.tab",{relatedTarget:t[0]}),r=e.Event("show.bs.tab",{relatedTarget:a[0]});if(a.trigger(o),t.trigger(r),!r.isDefaultPrevented()&&!o.isDefaultPrevented()){var s=e(document).find(n);this.activate(t.closest("li"),i),this.activate(s,s.parent(),function(){a.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:a[0]})})}}},i.prototype.activate=function(t,n,a){function o(){r.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),t.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),s?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu").length&&t.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),a&&a()}var r=n.find("> .active"),s=a&&e.support.transition&&(r.length&&r.hasClass("fade")||!!n.find("> .fade").length);r.length&&s?r.one("bsTransitionEnd",o).emulateTransitionEnd(i.TRANSITION_DURATION):o(),r.removeClass("in")};var n=e.fn.tab;e.fn.tab=t,e.fn.tab.Constructor=i,e.fn.tab.noConflict=function(){return e.fn.tab=n,this};var a=function(i){i.preventDefault(),t.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',a).on("click.bs.tab.data-api",'[data-toggle="pill"]',a)}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var n=e(this),a=n.data("bs.affix"),o="object"==typeof t&&t;a||n.data("bs.affix",a=new i(this,o)),"string"==typeof t&&a[t]()})}var i=function(t,n){this.options=e.extend({},i.DEFAULTS,n);var a=this.options.target===i.DEFAULTS.target?e(this.options.target):e(document).find(this.options.target);this.$target=a.on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(t),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};i.VERSION="3.4.0",i.RESET="affix affix-top affix-bottom",i.DEFAULTS={offset:0,target:window},i.prototype.getState=function(e,t,i,n){var a=this.$target.scrollTop(),o=this.$element.offset(),r=this.$target.height();if(null!=i&&"top"==this.affixed)return a<i&&"top";if("bottom"==this.affixed)return null!=i?!(a+this.unpin<=o.top)&&"bottom":!(a+r<=e-n)&&"bottom";var s=null==this.affixed,l=s?a:o.top,d=s?r:t;return null!=i&&a<=i?"top":null!=n&&l+d>=e-n&&"bottom"},i.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(i.RESET).addClass("affix");var e=this.$target.scrollTop(),t=this.$element.offset();return this.pinnedOffset=t.top-e},i.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},i.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=this.$element.height(),n=this.options.offset,a=n.top,o=n.bottom,r=Math.max(e(document).height(),e(document.body).height());"object"!=typeof n&&(o=a=n),"function"==typeof a&&(a=n.top(this.$element)),"function"==typeof o&&(o=n.bottom(this.$element));var s=this.getState(r,t,a,o);if(this.affixed!=s){null!=this.unpin&&this.$element.css("top","");var l="affix"+(s?"-"+s:""),d=e.Event(l+".bs.affix");if(this.$element.trigger(d),d.isDefaultPrevented())return;this.affixed=s,this.unpin="bottom"==s?this.getPinnedOffset():null,this.$element.removeClass(i.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==s&&this.$element.offset({top:r-t-o})}};var n=e.fn.affix;e.fn.affix=t,e.fn.affix.Constructor=i,e.fn.affix.noConflict=function(){return e.fn.affix=n,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var i=e(this),n=i.data();n.offset=n.offset||{},null!=n.offsetBottom&&(n.offset.bottom=n.offsetBottom),null!=n.offsetTop&&(n.offset.top=n.offsetTop),t.call(i,n)})})}(jQuery),function(e,t){if("function"==typeof define&&define.amd)define(["jquery"],t);else if("undefined"!=typeof exports)t(require("jquery"));else{var i={exports:{}};t(e.jquery),e.bootstrapSwitch=i.exports}}(this,function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(e){return e&&e.__esModule?e:{default:e}}(e),n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=i.default||window.jQuery||window.$,r=function(){function e(i){var n=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t(this,e),this.$element=o(i),this.options=o.extend({},o.fn.bootstrapSwitch.defaults,this._getElementOptions(),a),this.prevOptions={},this.$wrapper=o("<div>",{class:function(){var e=[];return e.push(n.options.state?"on":"off"),n.options.size&&e.push(n.options.size),n.options.disabled&&e.push("disabled"),n.options.readonly&&e.push("readonly"),n.options.indeterminate&&e.push("indeterminate"),n.options.inverse&&e.push("inverse"),n.$element.attr("id")&&e.push("id-"+n.$element.attr("id")),e.map(n._getClass.bind(n)).concat([n.options.baseClass],n._getClasses(n.options.wrapperClass)).join(" ")}}),this.$container=o("<div>",{class:this._getClass("container")}),this.$on=o("<span>",{html:this.options.onText,class:this._getClass("handle-on")+" "+this._getClass(this.options.onColor)}),this.$off=o("<span>",{html:this.options.offText,class:this._getClass("handle-off")+" "+this._getClass(this.options.offColor)}),this.$label=o("<span>",{html:this.options.labelText,class:this._getClass("label")}),this.$element.on("init.bootstrapSwitch",this.options.onInit.bind(this,i)),this.$element.on("switchChange.bootstrapSwitch",function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];!1===n.options.onSwitchChange.apply(i,t)&&(n.$element.is(":radio")?o('[name="'+n.$element.attr("name")+'"]').trigger("previousState.bootstrapSwitch",!0):n.$element.trigger("previousState.bootstrapSwitch",!0))}),this.$container=this.$element.wrap(this.$container).parent(),this.$wrapper=this.$container.wrap(this.$wrapper).parent(),this.$element.before(this.options.inverse?this.$off:this.$on).before(this.$label).before(this.options.inverse?this.$on:this.$off),this.options.indeterminate&&this.$element.prop("indeterminate",!0),this._init(),this._elementHandlers(),this._handleHandlers(),this._labelHandlers(),this._formHandler(),this._externalLabelHandler(),this.$element.trigger("init.bootstrapSwitch",this.options.state)}return a(e,[{key:"setPrevOptions",value:function(){this.prevOptions=n({},this.options)}},{key:"state",value:function(e,t){return void 0===e?this.options.state:this.options.disabled||this.options.readonly||this.options.state&&!this.options.radioAllOff&&this.$element.is(":radio")?this.$element:(this.$element.is(":radio")?o('[name="'+this.$element.attr("name")+'"]').trigger("setPreviousOptions.bootstrapSwitch"):this.$element.trigger("setPreviousOptions.bootstrapSwitch"),this.options.indeterminate&&this.indeterminate(!1),this.$element.prop("checked",Boolean(e)).trigger("change.bootstrapSwitch",t),this.$element)}},{key:"toggleState",value:function(e){return this.options.disabled||this.options.readonly?this.$element:this.options.indeterminate?(this.indeterminate(!1),this.state(!0)):this.$element.prop("checked",!this.options.state).trigger("change.bootstrapSwitch",e)}},{key:"size",value:function(e){return void 0===e?this.options.size:(null!=this.options.size&&this.$wrapper.removeClass(this._getClass(this.options.size)),e&&this.$wrapper.addClass(this._getClass(e)),this._width(),this._containerPosition(),this.options.size=e,this.$element)}},{key:"animate",value:function(e){return void 0===e?this.options.animate:this.options.animate===Boolean(e)?this.$element:this.toggleAnimate()}},{key:"toggleAnimate",value:function(){return this.options.animate=!this.options.animate,this.$wrapper.toggleClass(this._getClass("animate")),this.$element}},{key:"disabled",value:function(e){return void 0===e?this.options.disabled:this.options.disabled===Boolean(e)?this.$element:this.toggleDisabled()}},{key:"toggleDisabled",value:function(){return this.options.disabled=!this.options.disabled,this.$element.prop("disabled",this.options.disabled),this.$wrapper.toggleClass(this._getClass("disabled")),this.$element}},{key:"readonly",value:function(e){return void 0===e?this.options.readonly:this.options.readonly===Boolean(e)?this.$element:this.toggleReadonly()}},{key:"toggleReadonly",value:function(){return this.options.readonly=!this.options.readonly,this.$element.prop("readonly",this.options.readonly),this.$wrapper.toggleClass(this._getClass("readonly")),this.$element}},{key:"indeterminate",value:function(e){return void 0===e?this.options.indeterminate:this.options.indeterminate===Boolean(e)?this.$element:this.toggleIndeterminate()}},{key:"toggleIndeterminate",value:function(){return this.options.indeterminate=!this.options.indeterminate,this.$element.prop("indeterminate",this.options.indeterminate),this.$wrapper.toggleClass(this._getClass("indeterminate")),this._containerPosition(),this.$element}},{key:"inverse",value:function(e){return void 0===e?this.options.inverse:this.options.inverse===Boolean(e)?this.$element:this.toggleInverse()}},{key:"toggleInverse",value:function(){this.$wrapper.toggleClass(this._getClass("inverse"));var e=this.$on.clone(!0),t=this.$off.clone(!0);return this.$on.replaceWith(t),this.$off.replaceWith(e),this.$on=t,this.$off=e,this.options.inverse=!this.options.inverse,this.$element}},{key:"onColor",value:function(e){return void 0===e?this.options.onColor:(this.options.onColor&&this.$on.removeClass(this._getClass(this.options.onColor)),this.$on.addClass(this._getClass(e)),this.options.onColor=e,this.$element)}},{key:"offColor",value:function(e){return void 0===e?this.options.offColor:(this.options.offColor&&this.$off.removeClass(this._getClass(this.options.offColor)),this.$off.addClass(this._getClass(e)),this.options.offColor=e,this.$element)}},{key:"onText",value:function(e){return void 0===e?this.options.onText:(this.$on.html(e),this._width(),this._containerPosition(),this.options.onText=e,this.$element)}},{key:"offText",value:function(e){return void 0===e?this.options.offText:(this.$off.html(e),this._width(),this._containerPosition(),this.options.offText=e,this.$element)}},{key:"labelText",value:function(e){return void 0===e?this.options.labelText:(this.$label.html(e),this._width(),this.options.labelText=e,this.$element)}},{key:"handleWidth",value:function(e){return void 0===e?this.options.handleWidth:(this.options.handleWidth=e,this._width(),this._containerPosition(),this.$element)}},{key:"labelWidth",value:function(e){return void 0===e?this.options.labelWidth:(this.options.labelWidth=e,this._width(),this._containerPosition(),this.$element)}},{key:"baseClass",value:function(e){return this.options.baseClass}},{key:"wrapperClass",value:function(e){return void 0===e?this.options.wrapperClass:(e||(e=o.fn.bootstrapSwitch.defaults.wrapperClass),this.$wrapper.removeClass(this._getClasses(this.options.wrapperClass).join(" ")),this.$wrapper.addClass(this._getClasses(e).join(" ")),this.options.wrapperClass=e,this.$element)}},{key:"radioAllOff",value:function(e){if(void 0===e)return this.options.radioAllOff;var t=Boolean(e);return this.options.radioAllOff===t?this.$element:(this.options.radioAllOff=t,this.$element)}},{key:"onInit",value:function(e){return void 0===e?this.options.onInit:(e||(e=o.fn.bootstrapSwitch.defaults.onInit),this.options.onInit=e,this.$element)}},{key:"onSwitchChange",value:function(e){return void 0===e?this.options.onSwitchChange:(e||(e=o.fn.bootstrapSwitch.defaults.onSwitchChange),this.options.onSwitchChange=e,this.$element)}},{key:"destroy",value:function(){var e=this.$element.closest("form");return e.length&&e.off("reset.bootstrapSwitch").removeData("bootstrap-switch"),this.$container.children().not(this.$element).remove(),this.$element.unwrap().unwrap().off(".bootstrapSwitch").removeData("bootstrap-switch"),this.$element}},{key:"_getElementOptions",value:function(){return{state:this.$element.is(":checked"),size:this.$element.data("size"),animate:this.$element.data("animate"),disabled:this.$element.is(":disabled"),readonly:this.$element.is("[readonly]"),indeterminate:this.$element.data("indeterminate"),inverse:this.$element.data("inverse"),radioAllOff:this.$element.data("radio-all-off"),onColor:this.$element.data("on-color"),offColor:this.$element.data("off-color"),onText:this.$element.data("on-text"),offText:this.$element.data("off-text"),labelText:this.$element.data("label-text"),handleWidth:this.$element.data("handle-width"),labelWidth:this.$element.data("label-width"),baseClass:this.$element.data("base-class"),wrapperClass:this.$element.data("wrapper-class")}}},{key:"_width",value:function(){var e=this,t=this.$on.add(this.$off).add(this.$label).css("width",""),i="auto"===this.options.handleWidth?Math.round(Math.max(this.$on.width(),this.$off.width())):this.options.handleWidth;return t.width(i),this.$label.width(function(t,n){return"auto"!==e.options.labelWidth?e.options.labelWidth:n<i?i:n}),this._handleWidth=this.$on.outerWidth(),this._labelWidth=this.$label.outerWidth(),this.$container.width(2*this._handleWidth+this._labelWidth),this.$wrapper.width(this._handleWidth+this._labelWidth)}},{key:"_containerPosition",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.state;arguments[1];this.$container.css("margin-left",function(){var i=[0,"-"+e._handleWidth+"px"];return e.options.indeterminate?"-"+e._handleWidth/2+"px":t?e.options.inverse?i[1]:i[0]:e.options.inverse?i[0]:i[1]})}},{key:"_init",value:function(){var e=this,t=function(){e.setPrevOptions(),e._width(),e._containerPosition(),setTimeout(function(){if(e.options.animate)return e.$wrapper.addClass(e._getClass("animate"))},50)};if(this.$wrapper.is(":visible"))return void t();var i=window.setInterval(function(){if(e.$wrapper.is(":visible"))return t(),window.clearInterval(i)},50)}},{key:"_elementHandlers",value:function(){var e=this;return this.$element.on({"setPreviousOptions.bootstrapSwitch":this.setPrevOptions.bind(this),"previousState.bootstrapSwitch":function(){e.options=e.prevOptions,e.options.indeterminate&&e.$wrapper.addClass(e._getClass("indeterminate")),e.$element.prop("checked",e.options.state).trigger("change.bootstrapSwitch",!0)},"change.bootstrapSwitch":function(t,i){t.preventDefault(),t.stopImmediatePropagation();var n=e.$element.is(":checked");e._containerPosition(n),n!==e.options.state&&(e.options.state=n,e.$wrapper.toggleClass(e._getClass("off")).toggleClass(e._getClass("on")),i||(e.$element.is(":radio")&&o('[name="'+e.$element.attr("name")+'"]').not(e.$element).prop("checked",!1).trigger("change.bootstrapSwitch",!0),e.$element.trigger("switchChange.bootstrapSwitch",[n])))},"focus.bootstrapSwitch":function(t){t.preventDefault(),e.$wrapper.addClass(e._getClass("focused"))},"blur.bootstrapSwitch":function(t){t.preventDefault(),e.$wrapper.removeClass(e._getClass("focused"))},"keydown.bootstrapSwitch":function(t){!t.which||e.options.disabled||e.options.readonly||37!==t.which&&39!==t.which||(t.preventDefault(),t.stopImmediatePropagation(),e.state(39===t.which))}})}},{key:"_handleHandlers",value:function(){var e=this;return this.$on.on("click.bootstrapSwitch",function(t){return t.preventDefault(),t.stopPropagation(),e.state(!1),e.$element.trigger("focus.bootstrapSwitch")}),this.$off.on("click.bootstrapSwitch",function(t){return t.preventDefault(),t.stopPropagation(),e.state(!0),e.$element.trigger("focus.bootstrapSwitch")})}},{key:"_labelHandlers",value:function(){var e=this,t={click:function(e){e.stopPropagation()},"mousedown.bootstrapSwitch touchstart.bootstrapSwitch":function(t){e._dragStart||e.options.disabled||e.options.readonly||(t.preventDefault(),t.stopPropagation(),e._dragStart=(t.pageX||t.originalEvent.touches[0].pageX)-parseInt(e.$container.css("margin-left"),10),e.options.animate&&e.$wrapper.removeClass(e._getClass("animate")),e.$element.trigger("focus.bootstrapSwitch"))},"mousemove.bootstrapSwitch touchmove.bootstrapSwitch":function(t){if(null!=e._dragStart){var i=(t.pageX||t.originalEvent.touches[0].pageX)-e._dragStart;t.preventDefault(),i<-e._handleWidth||i>0||(e._dragEnd=i,e.$container.css("margin-left",e._dragEnd+"px"))}},"mouseup.bootstrapSwitch touchend.bootstrapSwitch":function(t){if(e._dragStart){if(t.preventDefault(),e.options.animate&&e.$wrapper.addClass(e._getClass("animate")),e._dragEnd){var i=e._dragEnd>-e._handleWidth/2;e._dragEnd=!1,e.state(e.options.inverse?!i:i)}else e.state(!e.options.state);e._dragStart=!1}},"mouseleave.bootstrapSwitch":function(){e.$label.trigger("mouseup.bootstrapSwitch")}};this.$label.on(t)}},{key:"_externalLabelHandler",value:function(){var e=this,t=this.$element.closest("label");t.on("click",function(i){i.preventDefault(),i.stopImmediatePropagation(),i.target===t[0]&&e.toggleState()})}},{key:"_formHandler",value:function(){var e=this.$element.closest("form");e.data("bootstrap-switch")||e.on("reset.bootstrapSwitch",function(){window.setTimeout(function(){e.find("input").filter(function(){return o(this).data("bootstrap-switch")}).each(function(){return o(this).bootstrapSwitch("state",this.checked)})},1)}).data("bootstrap-switch",!0)}},{key:"_getClass",value:function(e){return this.options.baseClass+"-"+e}},{key:"_getClasses",value:function(e){return o.isArray(e)?e.map(this._getClass.bind(this)):[this._getClass(e)]}}]),e}();o.fn.bootstrapSwitch=function(e){function t(t,i){var a=o(i),s=a.data("bootstrap-switch"),l=s||new r(i,e);return s||a.data("bootstrap-switch",l),"string"==typeof e?l[e].apply(l,n):t}for(var i=arguments.length,n=Array(i>1?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];return Array.prototype.reduce.call(this,t,this)},o.fn.bootstrapSwitch.Constructor=r,o.fn.bootstrapSwitch.defaults={state:!0,size:null,animate:!0,disabled:!1,readonly:!1,indeterminate:!1,inverse:!1,radioAllOff:!1,onColor:"primary",offColor:"default",onText:"ON",offText:"OFF",labelText:"&nbsp",handleWidth:"auto",labelWidth:"auto",baseClass:"bootstrap-switch",wrapperClass:"wrapper",onInit:function(){},onSwitchChange:function(){}}}),function(e,t){void 0===e&&void 0!==window&&(e=window),"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e)}):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(e.jQuery)}(this,function(e){!function(e){"use strict";function t(e,t){return e.length===t.length&&e.every(function(e,i){return e===t[i]})}function i(e){var t,i=[],n=e&&e.options;if(e.multiple)for(var a=0,o=n.length;a<o;a++)t=n[a],t.selected&&i.push(t.value||t.text);else i=e.value;return i}function n(e,t,i,n){for(var a=["content","subtext","tokens"],o=!1,s=0;s<a.length;s++){var l=a[s],d=e[l];if(d&&(d=d.toString(),"content"===l&&(d=d.replace(/<[^>]+>/g,"")),n&&(d=r(d)),d=d.toUpperCase(),o="contains"===i?d.indexOf(t)>=0:d.startsWith(t)))break}return o}function a(e){return parseInt(e,10)||0}function o(e){return u[e]}function r(e){return(e=e.toString())&&e.replace(f,o).replace(m,"")}function s(t){var i=arguments,n=t;if([].shift.apply(i),!S.success){try{S.full=(e.fn.dropdown.Constructor.VERSION||"").split(" ")[0].split(".")}catch(e){S.full=D.BootstrapVersion.split(" ")[0].split(".")}S.major=S.full[0],S.success=!0,"4"===S.major&&(_.DIVIDER="dropdown-divider",_.SHOW="show",_.BUTTONCLASS="btn-light",D.DEFAULTS.style=_.BUTTONCLASS="btn-light",_.POPOVERHEADER="popover-header")}var a,o=this.each(function(){var t=e(this);if(t.is("select")){var o=t.data("selectpicker"),r="object"==typeof n&&n;if(o){if(r)for(var s in r)r.hasOwnProperty(s)&&(o.options[s]=r[s])}else{var l=e.extend({},D.DEFAULTS,e.fn.selectpicker.defaults||{},t.data(),r);l.template=e.extend({},D.DEFAULTS.template,e.fn.selectpicker.defaults?e.fn.selectpicker.defaults.template:{},t.data().template,r.template),t.data("selectpicker",o=new D(this,l))}"string"==typeof n&&(a=o[n]instanceof Function?o[n].apply(o,i):o.options[n])}});return void 0!==a?a:o}"classList"in document.createElement("_")||function(t){if("Element"in t){var i=t.Element.prototype,n=Object,a=function(){var t=e(this);return{add:function(e){return t.addClass(e)},remove:function(e){return t.removeClass(e)},toggle:function(e,i){return t.toggleClass(e,i)},contains:function(e){return t.hasClass(e)}}};if(n.defineProperty){var o={get:a,enumerable:!0,configurable:!0};try{n.defineProperty(i,"classList",o)}catch(e){void 0!==e.number&&-2146823252!==e.number||(o.enumerable=!1,n.defineProperty(i,"classList",o))}}else n.prototype.__defineGetter__&&i.__defineGetter__("classList",a)}}(window);var l=document.createElement("_");if(l.classList.toggle("c3",!1),l.classList.contains("c3")){var d=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return 1 in arguments&&!this.contains(e)==!t?t:d.call(this,e)}}l=null,String.prototype.startsWith||function(){var e=function(){try{var e={},t=Object.defineProperty,i=t(e,e,e)&&t}catch(e){}return i}(),t={}.toString,i=function(e){if(null==this)throw new TypeError;var i=String(this);if(e&&"[object RegExp]"==t.call(e))throw new TypeError;var n=i.length,a=String(e),o=a.length,r=arguments.length>1?arguments[1]:void 0,s=r?Number(r):0;s!=s&&(s=0);var l=Math.min(Math.max(s,0),n);if(o+l>n)return!1;for(var d=-1;++d<o;)if(i.charCodeAt(l+d)!=a.charCodeAt(d))return!1;return!0};e?e(String.prototype,"startsWith",{value:i,configurable:!0,writable:!0}):String.prototype.startsWith=i}(),Object.keys||(Object.keys=function(e,t,i){i=[];for(t in e)i.hasOwnProperty.call(e,t)&&i.push(t);return i});var c={useDefault:!1,_set:e.valHooks.select.set};e.valHooks.select.set=function(t,i){return i&&!c.useDefault&&e(t).data("selected",!0),c._set.apply(this,arguments)};var p=null,h=function(){try{return new Event("change"),!0}catch(e){return!1}}();e.fn.triggerNative=function(e){var t,i=this[0];i.dispatchEvent?(h?t=new Event(e,{bubbles:!0}):(t=document.createEvent("Event"),t.initEvent(e,!0,!1)),i.dispatchEvent(t)):i.fireEvent?(t=document.createEventObject(),t.eventType=e,i.fireEvent("on"+e,t)):this.trigger(e)};var u={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"},f=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,m=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\u1ab0-\\u1aff\\u1dc0-\\u1dff]","g"),g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},v={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#x27;":"'","&#x60;":"`"},b=function(e){var t=function(t){return e[t]},i="(?:"+Object.keys(e).join("|")+")",n=RegExp(i),a=RegExp(i,"g");return function(e){return e=null==e?"":""+e,n.test(e)?e.replace(a,t):e}},w=b(g),y=b(v),C={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"},x={ESCAPE:27,ENTER:13,SPACE:32,TAB:9,ARROW_UP:38,ARROW_DOWN:40},S={success:!1,major:"3"};try{S.full=(e.fn.dropdown.Constructor.VERSION||"").split(" ")[0].split("."),S.major=S.full[0],S.success=!0}catch(e){console.warn("There was an issue retrieving Bootstrap's version. Ensure Bootstrap is being loaded before bootstrap-select and there is no namespace collision. If loading Bootstrap asynchronously, the version may need to be manually specified via $.fn.selectpicker.Constructor.BootstrapVersion.",e)}var k=0,T=".bs.select",_={DISABLED:"disabled",DIVIDER:"divider",SHOW:"open",DROPUP:"dropup",MENU:"dropdown-menu",MENURIGHT:"dropdown-menu-right",MENULEFT:"dropdown-menu-left",BUTTONCLASS:"btn-default",POPOVERHEADER:"popover-title"},E={MENU:"."+_.MENU};"4"===S.major&&(_.DIVIDER="dropdown-divider",_.SHOW="show",_.BUTTONCLASS="btn-light",_.POPOVERHEADER="popover-header");var I=new RegExp(x.ARROW_UP+"|"+x.ARROW_DOWN),$=new RegExp("^"+x.TAB+"$|"+x.ESCAPE),D=function(t,i){var n=this;c.useDefault||(e.valHooks.select.set=c._set,c.useDefault=!0),this.$element=e(t),this.$newElement=null,this.$button=null,this.$menu=null,this.options=i,this.selectpicker={main:{map:{newIndex:{},originalIndex:{}}},current:{map:{}},search:{map:{}},view:{},keydown:{keyHistory:"",resetKeyHistory:{start:function(){return setTimeout(function(){n.selectpicker.keydown.keyHistory=""},800)}}}},null===this.options.title&&(this.options.title=this.$element.attr("title"));var a=this.options.windowPadding;"number"==typeof a&&(this.options.windowPadding=[a,a,a,a]),this.val=D.prototype.val,this.render=D.prototype.render,this.refresh=D.prototype.refresh,this.setStyle=D.prototype.setStyle,this.selectAll=D.prototype.selectAll,this.deselectAll=D.prototype.deselectAll,this.destroy=D.prototype.destroy,this.remove=D.prototype.remove,this.show=D.prototype.show,this.hide=D.prototype.hide,this.init()};D.VERSION="1.13.5",D.BootstrapVersion=S.major,D.DEFAULTS={noneSelectedText:"Nothing selected",noneResultsText:"No results matched {0}",countSelectedText:function(e,t){return 1==e?"{0} item selected":"{0} items selected"},maxOptionsText:function(e,t){return[1==e?"Limit reached ({n} item max)":"Limit reached ({n} items max)",1==t?"Group limit reached ({n} item max)":"Group limit reached ({n} items max)"]},selectAllText:"Select All",deselectAllText:"Deselect All",doneButton:!1,doneButtonText:"Close",multipleSeparator:", ",styleBase:"btn",style:_.BUTTONCLASS,size:"auto",title:null,selectedTextFormat:"values",width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,liveSearchPlaceholder:null,liveSearchNormalize:!1,liveSearchStyle:"contains",actionsBox:!1,iconBase:"glyphicon",tickIcon:"glyphicon-ok",showTick:!1,template:{caret:'<span class="caret"></span>'},maxOptions:!1,mobile:!1,selectOnTab:!1,dropdownAlignRight:!1,windowPadding:0,virtualScroll:600,display:!1},"4"===S.major&&(D.DEFAULTS.style="btn-light",D.DEFAULTS.iconBase="",D.DEFAULTS.tickIcon="bs-ok-default"),D.prototype={constructor:D,init:function(){var e=this,t=this.$element.attr("id");this.selectId=k++,this.$element.addClass("bs-select-hidden"),this.multiple=this.$element.prop("multiple"),this.autofocus=this.$element.prop("autofocus"),this.$newElement=this.createDropdown(),this.createLi(),this.$element.after(this.$newElement).prependTo(this.$newElement),this.$button=this.$newElement.children("button"),this.$menu=this.$newElement.children(E.MENU),this.$menuInner=this.$menu.children(".inner"),this.$searchbox=this.$menu.find("input"),this.$element.removeClass("bs-select-hidden"),!0===this.options.dropdownAlignRight&&this.$menu.addClass(_.MENURIGHT),void 0!==t&&this.$button.attr("data-id",t),this.checkDisabled(),this.clickListener(),this.options.liveSearch&&this.liveSearchListener(),this.render(),this.setStyle(),this.setWidth(),this.options.container?this.selectPosition():this.$element.on("hide.bs.select",function(){if(e.isVirtual()){var t=e.$menuInner[0],i=t.firstChild.cloneNode(!1);t.replaceChild(i,t.firstChild),t.scrollTop=0}}),this.$menu.data("this",this),this.$newElement.data("this",this),this.options.mobile&&this.mobile(),this.$newElement.on({"hide.bs.dropdown":function(t){e.$menuInner.attr("aria-expanded",!1),e.$element.trigger("hide.bs.select",t)},"hidden.bs.dropdown":function(t){e.$element.trigger("hidden.bs.select",t)},"show.bs.dropdown":function(t){e.$menuInner.attr("aria-expanded",!0),e.$element.trigger("show.bs.select",t)},"shown.bs.dropdown":function(t){e.$element.trigger("shown.bs.select",t)}}),e.$element[0].hasAttribute("required")&&this.$element.on("invalid",function(){e.$button.addClass("bs-invalid"),e.$element.on("shown.bs.select.invalid",function(){e.$element.val(e.$element.val()).off("shown.bs.select.invalid")}).on("rendered.bs.select",function(){this.validity.valid&&e.$button.removeClass("bs-invalid"),e.$element.off("rendered.bs.select")}),e.$button.on("blur.bs.select",function(){e.$element.focus().blur(),e.$button.off("blur.bs.select")})}),setTimeout(function(){e.$element.trigger("loaded.bs.select")})},createDropdown:function(){var t,i=this.multiple||this.options.showTick?" show-tick":"",n=this.autofocus?" autofocus":"",a="",o="",r="",s="";return this.options.header&&(a='<div class="'+_.POPOVERHEADER+'"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>"),
this.options.liveSearch&&(o='<div class="bs-searchbox"><input type="text" class="form-control" autocomplete="off"'+(null===this.options.liveSearchPlaceholder?"":' placeholder="'+w(this.options.liveSearchPlaceholder)+'"')+' role="textbox" aria-label="Search"></div>'),this.multiple&&this.options.actionsBox&&(r='<div class="bs-actionsbox"><div class="btn-group btn-group-sm btn-block"><button type="button" class="actions-btn bs-select-all btn '+_.BUTTONCLASS+'">'+this.options.selectAllText+'</button><button type="button" class="actions-btn bs-deselect-all btn '+_.BUTTONCLASS+'">'+this.options.deselectAllText+"</button></div></div>"),this.multiple&&this.options.doneButton&&(s='<div class="bs-donebutton"><div class="btn-group btn-block"><button type="button" class="btn btn-sm '+_.BUTTONCLASS+'">'+this.options.doneButtonText+"</button></div></div>"),t='<div class="dropdown bootstrap-select'+i+'"><button type="button" class="'+this.options.styleBase+' dropdown-toggle" '+("static"===this.options.display?'data-display="static"':"")+'data-toggle="dropdown"'+n+' role="button"><div class="filter-option"><div class="filter-option-inner"><div class="filter-option-inner-inner"></div></div> </div>'+("4"===S.major?"":'<span class="bs-caret">'+this.options.template.caret+"</span>")+'</button><div class="'+_.MENU+" "+("4"===S.major?"":_.SHOW)+'" role="combobox">'+a+o+r+'<div class="inner '+_.SHOW+'" role="listbox" aria-expanded="false" tabindex="-1"><ul class="'+_.MENU+" inner "+("4"===S.major?_.SHOW:"")+'"></ul></div>'+s+"</div></div>",e(t)},setPositionData:function(){this.selectpicker.view.canHighlight=[];for(var e=0;e<this.selectpicker.current.data.length;e++){var t=this.selectpicker.current.data[e],i=!0;"divider"===t.type?(i=!1,t.height=this.sizeInfo.dividerHeight):"optgroup-label"===t.type?(i=!1,t.height=this.sizeInfo.dropdownHeaderHeight):t.height=this.sizeInfo.liHeight,t.disabled&&(i=!1),this.selectpicker.view.canHighlight.push(i),t.position=(0===e?0:this.selectpicker.current.data[e-1].position)+t.height}},isVirtual:function(){return!1!==this.options.virtualScroll&&this.selectpicker.main.elements.length>=this.options.virtualScroll||!0===this.options.virtualScroll},createView:function(i,n){function a(e,n){var a,d,c,p,h,u,f,m,g=o.selectpicker.current.elements.length,v=[],b=!0,w=o.isVirtual();o.selectpicker.view.scrollTop=e,!0===w&&o.sizeInfo.hasScrollBar&&o.$menu[0].offsetWidth>o.sizeInfo.totalMenuWidth&&(o.sizeInfo.menuWidth=o.$menu[0].offsetWidth,o.sizeInfo.totalMenuWidth=o.sizeInfo.menuWidth+o.sizeInfo.scrollBarWidth,o.$menu.css("min-width",o.sizeInfo.menuWidth)),a=Math.ceil(o.sizeInfo.menuInnerHeight/o.sizeInfo.liHeight*1.5),d=Math.round(g/a)||1;for(var y=0;y<d;y++){var C=(y+1)*a;if(y===d-1&&(C=g),v[y]=[y*a+(y?1:0),C],!g)break;void 0===h&&e<=o.selectpicker.current.data[C-1].position-o.sizeInfo.menuInnerHeight&&(h=y)}if(void 0===h&&(h=0),u=[o.selectpicker.view.position0,o.selectpicker.view.position1],c=Math.max(0,h-1),p=Math.min(d-1,h+1),o.selectpicker.view.position0=Math.max(0,v[c][0])||0,o.selectpicker.view.position1=Math.min(g,v[p][1])||0,f=u[0]!==o.selectpicker.view.position0||u[1]!==o.selectpicker.view.position1,void 0!==o.activeIndex&&(s=o.selectpicker.current.elements[o.selectpicker.current.map.newIndex[o.prevActiveIndex]],l=o.selectpicker.current.elements[o.selectpicker.current.map.newIndex[o.activeIndex]],r=o.selectpicker.current.elements[o.selectpicker.current.map.newIndex[o.selectedIndex]],n&&(o.activeIndex!==o.selectedIndex&&(l.classList.remove("active"),l.firstChild&&l.firstChild.classList.remove("active")),o.activeIndex=void 0),o.activeIndex&&o.activeIndex!==o.selectedIndex&&r&&r.length&&(r.classList.remove("active"),r.firstChild&&r.firstChild.classList.remove("active"))),void 0!==o.prevActiveIndex&&o.prevActiveIndex!==o.activeIndex&&o.prevActiveIndex!==o.selectedIndex&&s&&s.length&&(s.classList.remove("active"),s.firstChild&&s.firstChild.classList.remove("active")),(n||f)&&(m=o.selectpicker.view.visibleElements?o.selectpicker.view.visibleElements.slice():[],o.selectpicker.view.visibleElements=o.selectpicker.current.elements.slice(o.selectpicker.view.position0,o.selectpicker.view.position1),o.setOptionStatus(),(i||!1===w&&n)&&(b=!t(m,o.selectpicker.view.visibleElements)),(n||!0===w)&&b)){var x,S,k=o.$menuInner[0],T=document.createDocumentFragment(),_=k.firstChild.cloneNode(!1),E=!0===w?o.selectpicker.view.visibleElements:o.selectpicker.current.elements;k.replaceChild(_,k.firstChild);for(var y=0,I=E.length;y<I;y++)T.appendChild(E[y]);!0===w&&(x=0===o.selectpicker.view.position0?0:o.selectpicker.current.data[o.selectpicker.view.position0-1].position,S=o.selectpicker.view.position1>g-1?0:o.selectpicker.current.data[g-1].position-o.selectpicker.current.data[o.selectpicker.view.position1-1].position,k.firstChild.style.marginTop=x+"px",k.firstChild.style.marginBottom=S+"px"),k.firstChild.appendChild(T)}if(o.prevActiveIndex=o.activeIndex,o.options.liveSearch){if(i&&n){var $,D=0;o.selectpicker.view.canHighlight[D]||(D=1+o.selectpicker.view.canHighlight.slice(1).indexOf(!0)),$=o.selectpicker.view.visibleElements[D],o.selectpicker.view.currentActive&&(o.selectpicker.view.currentActive.classList.remove("active"),o.selectpicker.view.currentActive.firstChild&&o.selectpicker.view.currentActive.firstChild.classList.remove("active")),$&&($.classList.add("active"),$.firstChild&&$.firstChild.classList.add("active")),o.activeIndex=o.selectpicker.current.map.originalIndex[D]}}else o.$menuInner.focus()}n=n||0;var o=this;this.selectpicker.current=i?this.selectpicker.search:this.selectpicker.main;var r,s,l=[];this.setPositionData(),a(n,!0),this.$menuInner.off("scroll.createView").on("scroll.createView",function(e,t){o.noScroll||a(this.scrollTop,t),o.noScroll=!1}),e(window).off("resize.bs.select."+this.selectId+".createView").on("resize.bs.select."+this.selectId+".createView",function(){o.$newElement.hasClass(_.SHOW)&&a(o.$menuInner[0].scrollTop)})},createLi:function(){var t,i=this,n=[],a={},o=0,r=0,s=[],l=0,d=0,c=-1;this.selectpicker.view.titleOption||(this.selectpicker.view.titleOption=document.createElement("option"));var p,h={span:document.createElement("span"),subtext:document.createElement("small"),a:document.createElement("a"),li:document.createElement("li"),whitespace:document.createTextNode("")},u=document.createDocumentFragment();(i.options.showTick||i.multiple)&&(p=h.span.cloneNode(!1),p.className=i.options.iconBase+" "+i.options.tickIcon+" check-mark",h.a.appendChild(p)),h.a.setAttribute("role","option"),h.subtext.className="text-muted",h.text=h.span.cloneNode(!1),h.text.className="text";var f=function(e,t,i){var n=h.li.cloneNode(!1);return e&&(1===e.nodeType||11===e.nodeType?n.appendChild(e):n.innerHTML=e),void 0!==t&&""!==t&&(n.className=t),void 0!==i&&null!==i&&n.classList.add("optgroup-"+i),n},m=function(e,t,i){var n=h.a.cloneNode(!0);return e&&(11===e.nodeType?n.appendChild(e):n.insertAdjacentHTML("beforeend",e)),void 0!==t&&""!==t&&(n.className=t),"4"===S.major&&n.classList.add("dropdown-item"),i&&n.setAttribute("style",i),n},g=function(e){var t,n,a=h.text.cloneNode(!1);if(e.optionContent)a.innerHTML=e.optionContent;else{if(a.textContent=e.text,e.optionIcon){var o=h.whitespace.cloneNode(!1);n=h.span.cloneNode(!1),n.className=i.options.iconBase+" "+e.optionIcon,u.appendChild(n),u.appendChild(o)}e.optionSubtext&&(t=h.subtext.cloneNode(!1),t.innerHTML=e.optionSubtext,a.appendChild(t))}return u.appendChild(a),u},v=function(e){var t,n,a=h.text.cloneNode(!1);if(a.innerHTML=e.labelEscaped,e.labelIcon){var o=h.whitespace.cloneNode(!1);n=h.span.cloneNode(!1),n.className=i.options.iconBase+" "+e.labelIcon,u.appendChild(n),u.appendChild(o)}return e.labelSubtext&&(t=h.subtext.cloneNode(!1),t.textContent=e.labelSubtext,a.appendChild(t)),u.appendChild(a),u};if(this.options.title&&!this.multiple){c--;var b=this.$element[0],y=!1,C=!this.selectpicker.view.titleOption.parentNode;if(C){this.selectpicker.view.titleOption.className="bs-title-option",this.selectpicker.view.titleOption.value="";y=void 0===e(b.options[b.selectedIndex]).attr("selected")&&void 0===this.$element.data("selected")}(C||0!==this.selectpicker.view.titleOption.index)&&b.insertBefore(this.selectpicker.view.titleOption,b.firstChild),y&&(b.selectedIndex=0)}var x=this.$element.find("option");x.each(function(p){var h=e(this);if(c++,!h.hasClass("bs-title-option")){var u,b,y,C,S=h.data(),k=this.className||"",T=w(this.style.cssText),E=S.content,I=this.textContent,$=S.tokens,D=S.subtext,P=S.icon,A=h.parent(),O=A[0],R="OPTGROUP"===O.tagName,L=R&&O.disabled,F=this.disabled||L,z=this.previousElementSibling&&"OPTGROUP"===this.previousElementSibling.tagName,M=A.data();if(!0===S.hidden||this.hidden||i.options.hideDisabled&&(F||L))return u=S.prevHiddenIndex,h.next().data("prevHiddenIndex",void 0!==u?u:p),c--,a[p]={type:"hidden",data:S},z||void 0!==u&&(C=x[u].previousElementSibling)&&"OPTGROUP"===C.tagName&&!C.disabled&&(z=!0),void(z&&"divider"!==s[s.length-1].type&&(c++,n.push(f(!1,_.DIVIDER,l+"div")),s.push({type:"divider",optID:l})));if(R&&!0!==S.divider){if(i.options.hideDisabled&&F){if(void 0===M.allOptionsDisabled){var j=A.children();A.data("allOptionsDisabled",j.filter(":disabled").length===j.length)}if(A.data("allOptionsDisabled"))return void c--}var N=" "+O.className||"",B=this.previousElementSibling;if(u=S.prevHiddenIndex,void 0!==u&&(B=x[u].previousElementSibling),!B){l+=1;var U=O.label,H=w(U),G=M.subtext,W=M.icon;0!==p&&n.length>0&&(c++,n.push(f(!1,_.DIVIDER,l+"div")),s.push({type:"divider",optID:l})),c++,y=v({labelEscaped:H,labelSubtext:G,labelIcon:W}),n.push(f(y,"dropdown-header"+N,l)),s.push({content:H,subtext:G,type:"optgroup-label",optID:l}),d=c-1}b=g({text:I,optionContent:E,optionSubtext:D,optionIcon:P}),n.push(f(m(b,"opt "+k+N,T),"",l)),s.push({content:E||I,subtext:D,tokens:$,type:"option",optID:l,headerIndex:d,lastIndex:d+O.childElementCount,originalIndex:p,data:S}),o++}else!0===S.divider?(n.push(f(!1,_.DIVIDER)),s.push({type:"divider",originalIndex:p,data:S})):(!z&&i.options.hideDisabled&&void 0!==(u=S.prevHiddenIndex)&&(C=x[u].previousElementSibling)&&"OPTGROUP"===C.tagName&&!C.disabled&&(z=!0),z&&"divider"!==s[s.length-1].type&&(c++,n.push(f(!1,_.DIVIDER,l+"div")),s.push({type:"divider",optID:l})),b=g({text:I,optionContent:E,optionSubtext:D,optionIcon:P}),n.push(f(m(b,k,T))),s.push({content:E||I,subtext:D,tokens:$,type:"option",originalIndex:p,data:S}),o++);i.selectpicker.main.map.newIndex[p]=c,i.selectpicker.main.map.originalIndex[c]=p;var q=s[s.length-1];q.disabled=F;var V=0;q.content&&(V+=q.content.length),q.subtext&&(V+=q.subtext.length),P&&(V+=1),V>r&&(r=V,t=n[n.length-1])}}),this.selectpicker.main.elements=n,this.selectpicker.main.data=s,this.selectpicker.main.hidden=a,this.selectpicker.current=this.selectpicker.main,this.selectpicker.view.widestOption=t,this.selectpicker.view.availableOptionsCount=o},findLis:function(){return this.$menuInner.find(".inner > li")},render:function(){var e=this,t=this.$element.find("option"),i=[],n=[];this.togglePlaceholder(),this.tabIndex();for(var a=0,o=t.length;a<o;a++){var r=e.selectpicker.main.map.newIndex[a],s=t[a],l=e.selectpicker.main.data[r]||e.selectpicker.main.hidden[a];if(s&&s.selected&&l&&(i.push(s),n.length<100&&"count"!==e.options.selectedTextFormat||1===i.length)){var d,c,p=l.data,h=p.icon&&e.options.showIcon?'<i class="'+e.options.iconBase+" "+p.icon+'"></i> ':"";d=e.options.showSubtext&&p.subtext&&!e.multiple?' <small class="text-muted">'+p.subtext+"</small>":"",c=s.title?s.title:p.content&&e.options.showContent?p.content.toString():h+s.innerHTML.trim()+d,n.push(c)}}var u=this.multiple?n.join(this.options.multipleSeparator):n[0];if(i.length>50&&(u+="..."),this.multiple&&-1!==this.options.selectedTextFormat.indexOf("count")){var f=this.options.selectedTextFormat.split(">");if(f.length>1&&i.length>f[1]||1===f.length&&i.length>=2){var m=this.selectpicker.view.availableOptionsCount;u=("function"==typeof this.options.countSelectedText?this.options.countSelectedText(i.length,m):this.options.countSelectedText).replace("{0}",i.length.toString()).replace("{1}",m.toString())}}void 0==this.options.title&&(this.options.title=this.$element.attr("title")),"static"==this.options.selectedTextFormat&&(u=this.options.title),u||(u=void 0!==this.options.title?this.options.title:this.options.noneSelectedText),this.$button[0].title=y(u.replace(/<[^>]*>?/g,"").trim()),this.$button.find(".filter-option-inner-inner")[0].innerHTML=u,this.$element.trigger("rendered.bs.select")},setStyle:function(e,t){this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|bs-select-hidden|validate\[.*\]/gi,""));var i=e||this.options.style;"add"==t?this.$button.addClass(i):"remove"==t?this.$button.removeClass(i):(this.$button.removeClass(this.options.style),this.$button.addClass(i))},liHeight:function(t){if(t||!1!==this.options.size&&!this.sizeInfo){this.sizeInfo||(this.sizeInfo={});var i=document.createElement("div"),n=document.createElement("div"),o=document.createElement("div"),r=document.createElement("ul"),s=document.createElement("li"),l=document.createElement("li"),d=document.createElement("li"),c=document.createElement("a"),p=document.createElement("span"),h=this.options.header&&this.$menu.find("."+_.POPOVERHEADER).length>0?this.$menu.find("."+_.POPOVERHEADER)[0].cloneNode(!0):null,u=this.options.liveSearch?document.createElement("div"):null,f=this.options.actionsBox&&this.multiple&&this.$menu.find(".bs-actionsbox").length>0?this.$menu.find(".bs-actionsbox")[0].cloneNode(!0):null,m=this.options.doneButton&&this.multiple&&this.$menu.find(".bs-donebutton").length>0?this.$menu.find(".bs-donebutton")[0].cloneNode(!0):null,g=this.$element.find("option")[0];if(this.sizeInfo.selectWidth=this.$newElement[0].offsetWidth,p.className="text",c.className="dropdown-item "+(g?g.className:""),i.className=this.$menu[0].parentNode.className+" "+_.SHOW,i.style.width=this.sizeInfo.selectWidth+"px","auto"===this.options.width&&(n.style.minWidth=0),n.className=_.MENU+" "+_.SHOW,o.className="inner "+_.SHOW,r.className=_.MENU+" inner "+("4"===S.major?_.SHOW:""),s.className=_.DIVIDER,l.className="dropdown-header",p.appendChild(document.createTextNode("")),c.appendChild(p),d.appendChild(c),l.appendChild(p.cloneNode(!0)),this.selectpicker.view.widestOption&&r.appendChild(this.selectpicker.view.widestOption.cloneNode(!0)),r.appendChild(d),r.appendChild(s),r.appendChild(l),h&&n.appendChild(h),u){var v=document.createElement("input");u.className="bs-searchbox",v.className="form-control",u.appendChild(v),n.appendChild(u)}f&&n.appendChild(f),o.appendChild(r),n.appendChild(o),m&&n.appendChild(m),i.appendChild(n),document.body.appendChild(i);var b,w=c.offsetHeight,y=l?l.offsetHeight:0,C=h?h.offsetHeight:0,x=u?u.offsetHeight:0,k=f?f.offsetHeight:0,T=m?m.offsetHeight:0,E=e(s).outerHeight(!0),I=!!window.getComputedStyle&&window.getComputedStyle(n),$=n.offsetWidth,D=I?null:e(n),P={vert:a(I?I.paddingTop:D.css("paddingTop"))+a(I?I.paddingBottom:D.css("paddingBottom"))+a(I?I.borderTopWidth:D.css("borderTopWidth"))+a(I?I.borderBottomWidth:D.css("borderBottomWidth")),horiz:a(I?I.paddingLeft:D.css("paddingLeft"))+a(I?I.paddingRight:D.css("paddingRight"))+a(I?I.borderLeftWidth:D.css("borderLeftWidth"))+a(I?I.borderRightWidth:D.css("borderRightWidth"))},A={vert:P.vert+a(I?I.marginTop:D.css("marginTop"))+a(I?I.marginBottom:D.css("marginBottom"))+2,horiz:P.horiz+a(I?I.marginLeft:D.css("marginLeft"))+a(I?I.marginRight:D.css("marginRight"))+2};o.style.overflowY="scroll",b=n.offsetWidth-$,document.body.removeChild(i),this.sizeInfo.liHeight=w,this.sizeInfo.dropdownHeaderHeight=y,this.sizeInfo.headerHeight=C,this.sizeInfo.searchHeight=x,this.sizeInfo.actionsHeight=k,this.sizeInfo.doneButtonHeight=T,this.sizeInfo.dividerHeight=E,this.sizeInfo.menuPadding=P,this.sizeInfo.menuExtras=A,this.sizeInfo.menuWidth=$,this.sizeInfo.totalMenuWidth=this.sizeInfo.menuWidth,this.sizeInfo.scrollBarWidth=b,this.sizeInfo.selectHeight=this.$newElement[0].offsetHeight,this.setPositionData()}},getSelectPosition:function(){var t,i=this,n=e(window),a=i.$newElement.offset(),o=e(i.options.container);i.options.container&&!o.is("body")?(t=o.offset(),t.top+=parseInt(o.css("borderTopWidth")),t.left+=parseInt(o.css("borderLeftWidth"))):t={top:0,left:0};var r=i.options.windowPadding;this.sizeInfo.selectOffsetTop=a.top-t.top-n.scrollTop(),this.sizeInfo.selectOffsetBot=n.height()-this.sizeInfo.selectOffsetTop-this.sizeInfo.selectHeight-t.top-r[2],this.sizeInfo.selectOffsetLeft=a.left-t.left-n.scrollLeft(),this.sizeInfo.selectOffsetRight=n.width()-this.sizeInfo.selectOffsetLeft-this.sizeInfo.selectWidth-t.left-r[1],this.sizeInfo.selectOffsetTop-=r[0],this.sizeInfo.selectOffsetLeft-=r[3]},setMenuSize:function(e){this.getSelectPosition();var t,i,n,a,o,r,s,l=this.sizeInfo.selectWidth,d=this.sizeInfo.liHeight,c=this.sizeInfo.headerHeight,p=this.sizeInfo.searchHeight,h=this.sizeInfo.actionsHeight,u=this.sizeInfo.doneButtonHeight,f=this.sizeInfo.dividerHeight,m=this.sizeInfo.menuPadding,g=0;if(this.options.dropupAuto&&(s=d*this.selectpicker.current.elements.length+m.vert,this.$newElement.toggleClass(_.DROPUP,this.sizeInfo.selectOffsetTop-this.sizeInfo.selectOffsetBot>this.sizeInfo.menuExtras.vert&&s+this.sizeInfo.menuExtras.vert+50>this.sizeInfo.selectOffsetBot)),"auto"===this.options.size)a=this.selectpicker.current.elements.length>3?3*this.sizeInfo.liHeight+this.sizeInfo.menuExtras.vert-2:0,i=this.sizeInfo.selectOffsetBot-this.sizeInfo.menuExtras.vert,n=a+c+p+h+u,r=Math.max(a-m.vert,0),this.$newElement.hasClass(_.DROPUP)&&(i=this.sizeInfo.selectOffsetTop-this.sizeInfo.menuExtras.vert),o=i,t=i-c-p-h-u-m.vert;else if(this.options.size&&"auto"!=this.options.size&&this.selectpicker.current.elements.length>this.options.size){for(var v=0;v<this.options.size;v++)"divider"===this.selectpicker.current.data[v].type&&g++;i=d*this.options.size+g*f+m.vert,t=i-m.vert,o=i+c+p+h+u,n=r=""}"auto"===this.options.dropdownAlignRight&&this.$menu.toggleClass(_.MENURIGHT,this.sizeInfo.selectOffsetLeft>this.sizeInfo.selectOffsetRight&&this.sizeInfo.selectOffsetRight<this.sizeInfo.totalMenuWidth-l),this.$menu.css({"max-height":o+"px",overflow:"hidden","min-height":n+"px"}),this.$menuInner.css({"max-height":t+"px","overflow-y":"auto","min-height":r+"px"}),this.sizeInfo.menuInnerHeight=t,this.selectpicker.current.data.length&&this.selectpicker.current.data[this.selectpicker.current.data.length-1].position>this.sizeInfo.menuInnerHeight&&(this.sizeInfo.hasScrollBar=!0,this.sizeInfo.totalMenuWidth=this.sizeInfo.menuWidth+this.sizeInfo.scrollBarWidth,this.$menu.css("min-width",this.sizeInfo.totalMenuWidth)),this.dropdown&&this.dropdown._popper&&this.dropdown._popper.update()},setSize:function(t){if(this.liHeight(t),this.options.header&&this.$menu.css("padding-top",0),!1!==this.options.size){var i,n=this,a=e(window),o=0;this.setMenuSize(),"auto"===this.options.size?(this.$searchbox.off("input.setMenuSize propertychange.setMenuSize").on("input.setMenuSize propertychange.setMenuSize",function(){return n.setMenuSize()}),a.off("resize.bs.select."+this.selectId+".setMenuSize scroll"+T+"."+this.selectId+".setMenuSize").on("resize.bs.select."+this.selectId+".setMenuSize scroll"+T+"."+this.selectId+".setMenuSize",function(){return n.setMenuSize()})):this.options.size&&"auto"!=this.options.size&&this.selectpicker.current.elements.length>this.options.size&&(this.$searchbox.off("input.setMenuSize propertychange.setMenuSize"),a.off("resize.bs.select."+this.selectId+".setMenuSize scroll"+T+"."+this.selectId+".setMenuSize")),t?o=this.$menuInner[0].scrollTop:n.multiple||"number"==typeof(i=n.selectpicker.main.map.newIndex[n.$element[0].selectedIndex])&&!1!==n.options.size&&(o=n.sizeInfo.liHeight*i,o=o-n.sizeInfo.menuInnerHeight/2+n.sizeInfo.liHeight/2),n.createView(!1,o)}},setWidth:function(){var e=this;"auto"===this.options.width?requestAnimationFrame(function(){e.$menu.css("min-width","0"),e.liHeight(),e.setMenuSize();var t=e.$newElement.clone().appendTo("body"),i=t.css("width","auto").children("button").outerWidth();t.remove(),e.sizeInfo.selectWidth=Math.max(e.sizeInfo.totalMenuWidth,i),e.$newElement.css("width",e.sizeInfo.selectWidth+"px")}):"fit"===this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width","")),this.$newElement.hasClass("fit-width")&&"fit"!==this.options.width&&this.$newElement.removeClass("fit-width")},selectPosition:function(){this.$bsContainer=e('<div class="bs-container" />');var t,i,n,a=this,o=e(this.options.container),r=function(r){var s={},l=a.options.display||!!e.fn.dropdown.Constructor.Default&&e.fn.dropdown.Constructor.Default.display;a.$bsContainer.addClass(r.attr("class").replace(/form-control|fit-width/gi,"")).toggleClass(_.DROPUP,r.hasClass(_.DROPUP)),t=r.offset(),o.is("body")?i={top:0,left:0}:(i=o.offset(),i.top+=parseInt(o.css("borderTopWidth"))-o.scrollTop(),i.left+=parseInt(o.css("borderLeftWidth"))-o.scrollLeft()),n=r.hasClass(_.DROPUP)?0:r[0].offsetHeight,(S.major<4||"static"===l)&&(s.top=t.top-i.top+n,s.left=t.left-i.left),s.width=r[0].offsetWidth,a.$bsContainer.css(s)};this.$button.on("click.bs.dropdown.data-api",function(){a.isDisabled()||(r(a.$newElement),a.$bsContainer.appendTo(a.options.container).toggleClass(_.SHOW,!a.$button.hasClass(_.SHOW)).append(a.$menu))}),e(window).off("resize.bs.select."+this.selectId+" scroll"+T+"."+this.selectId).on("resize.bs.select."+this.selectId+" scroll"+T+"."+this.selectId,function(){a.$newElement.hasClass(_.SHOW)&&r(a.$newElement)}),this.$element.on("hide.bs.select",function(){a.$menu.data("height",a.$menu.height()),a.$bsContainer.detach()})},setOptionStatus:function(){var e=this,t=this.$element.find("option");if(e.noScroll=!1,e.selectpicker.view.visibleElements&&e.selectpicker.view.visibleElements.length)for(var i=0;i<e.selectpicker.view.visibleElements.length;i++){var n=e.selectpicker.current.map.originalIndex[i+e.selectpicker.view.position0],a=t[n];if(a){var o=this.selectpicker.main.map.newIndex[n],r=this.selectpicker.main.elements[o];e.setDisabled(n,a.disabled||"OPTGROUP"===a.parentNode.tagName&&a.parentNode.disabled,o,r),e.setSelected(n,a.selected,o,r)}}},setSelected:function(e,t,i,n){var a,o,r,s=void 0!==this.activeIndex,l=this.activeIndex===e,d=l||t&&!this.multiple&&!s;i||(i=this.selectpicker.main.map.newIndex[e]),n||(n=this.selectpicker.main.elements[i]),r=n.firstChild,t&&(this.selectedIndex=e),n.classList.toggle("selected",t),n.classList.toggle("active",d),d&&(this.selectpicker.view.currentActive=n,this.activeIndex=e),r&&(r.classList.toggle("selected",t),r.classList.toggle("active",d),r.setAttribute("aria-selected",t)),d||!s&&t&&void 0!==this.prevActiveIndex&&(a=this.selectpicker.main.map.newIndex[this.prevActiveIndex],o=this.selectpicker.main.elements[a],o.classList.remove("active"),o.firstChild&&o.firstChild.classList.remove("active"))},setDisabled:function(e,t,i,n){var a;i||(i=this.selectpicker.main.map.newIndex[e]),n||(n=this.selectpicker.main.elements[i]),a=n.firstChild,n.classList.toggle(_.DISABLED,t),a&&("4"===S.major&&a.classList.toggle(_.DISABLED,t),a.setAttribute("aria-disabled",t),t?a.setAttribute("tabindex",-1):a.setAttribute("tabindex",0))},isDisabled:function(){return this.$element[0].disabled},checkDisabled:function(){var e=this;this.isDisabled()?(this.$newElement.addClass(_.DISABLED),this.$button.addClass(_.DISABLED).attr("tabindex",-1).attr("aria-disabled",!0)):(this.$button.hasClass(_.DISABLED)&&(this.$newElement.removeClass(_.DISABLED),this.$button.removeClass(_.DISABLED).attr("aria-disabled",!1)),-1!=this.$button.attr("tabindex")||this.$element.data("tabindex")||this.$button.removeAttr("tabindex")),this.$button.click(function(){return!e.isDisabled()})},togglePlaceholder:function(){var e=this.$element[0],t=e.selectedIndex,i=-1===t;i||e.options[t].value||(i=!0),this.$button.toggleClass("bs-placeholder",i)},tabIndex:function(){this.$element.data("tabindex")!==this.$element.attr("tabindex")&&-98!==this.$element.attr("tabindex")&&"-98"!==this.$element.attr("tabindex")&&(this.$element.data("tabindex",this.$element.attr("tabindex")),this.$button.attr("tabindex",this.$element.data("tabindex"))),this.$element.attr("tabindex",-98)},clickListener:function(){function t(){a.options.liveSearch?a.$searchbox.focus():a.$menuInner.focus()}function n(){a.dropdown&&a.dropdown._popper&&a.dropdown._popper.state.isCreated?t():requestAnimationFrame(n)}var a=this,o=e(document);o.data("spaceSelect",!1),this.$button.on("keyup",function(e){/(32)/.test(e.keyCode.toString(10))&&o.data("spaceSelect")&&(e.preventDefault(),o.data("spaceSelect",!1))}),this.$newElement.on("show.bs.dropdown",function(){S.major>3&&!a.dropdown&&(a.dropdown=a.$button.data("bs.dropdown"),a.dropdown._menu=a.$menu[0])}),this.$button.on("click.bs.dropdown.data-api",function(){a.$newElement.hasClass(_.SHOW)||a.setSize()}),this.$element.on("shown.bs.select",function(){a.$menuInner[0].scrollTop!==a.selectpicker.view.scrollTop&&(a.$menuInner[0].scrollTop=a.selectpicker.view.scrollTop),S.major>3?requestAnimationFrame(n):t()}),this.$menuInner.on("click","li a",function(t,n){var o=e(this),r=a.isVirtual()?a.selectpicker.view.position0:0,s=a.selectpicker.current.map.originalIndex[o.parent().index()+r],l=i(a.$element[0]),d=a.$element.prop("selectedIndex"),c=!0;if(a.multiple&&1!==a.options.maxOptions&&t.stopPropagation(),t.preventDefault(),!a.isDisabled()&&!o.parent().hasClass(_.DISABLED)){var h=a.$element.find("option"),u=h.eq(s),f=u.prop("selected"),m=u.parent("optgroup"),g=m.find("option"),v=a.options.maxOptions,b=m.data("maxOptions")||!1;if(s===a.activeIndex&&(n=!0),n||(a.prevActiveIndex=a.activeIndex,a.activeIndex=void 0),a.multiple){if(u.prop("selected",!f),a.setSelected(s,!f),o.blur(),!1!==v||!1!==b){var w=v<h.filter(":selected").length,y=b<m.find("option:selected").length;if(v&&w||b&&y)if(v&&1==v){h.prop("selected",!1),u.prop("selected",!0);for(var C=0;C<h.length;C++)a.setSelected(C,!1);a.setSelected(s,!0)}else if(b&&1==b){m.find("option:selected").prop("selected",!1),u.prop("selected",!0);for(var C=0;C<g.length;C++){var x=g[C];a.setSelected(h.index(x),!1)}a.setSelected(s,!0)}else{var S="string"==typeof a.options.maxOptionsText?[a.options.maxOptionsText,a.options.maxOptionsText]:a.options.maxOptionsText,k="function"==typeof S?S(v,b):S,T=k[0].replace("{n}",v),E=k[1].replace("{n}",b),I=e('<div class="notify"></div>');k[2]&&(T=T.replace("{var}",k[2][v>1?0:1]),E=E.replace("{var}",k[2][b>1?0:1])),u.prop("selected",!1),a.$menu.append(I),v&&w&&(I.append(e("<div>"+T+"</div>")),c=!1,a.$element.trigger("maxReached.bs.select")),b&&y&&(I.append(e("<div>"+E+"</div>")),c=!1,a.$element.trigger("maxReachedGrp.bs.select")),setTimeout(function(){a.setSelected(s,!1)},10),I.delay(750).fadeOut(300,function(){e(this).remove()})}}}else h.prop("selected",!1),u.prop("selected",!0),a.setSelected(s,!0);!a.multiple||a.multiple&&1===a.options.maxOptions?a.$button.focus():a.options.liveSearch&&a.$searchbox.focus(),c&&(l!=i(a.$element[0])&&a.multiple||d!=a.$element.prop("selectedIndex")&&!a.multiple)&&(p=[s,u.prop("selected"),l],a.$element.triggerNative("change"))}}),this.$menu.on("click","li."+_.DISABLED+" a, ."+_.POPOVERHEADER+", ."+_.POPOVERHEADER+" :not(.close)",function(t){t.currentTarget==this&&(t.preventDefault(),t.stopPropagation(),a.options.liveSearch&&!e(t.target).hasClass("close")?a.$searchbox.focus():a.$button.focus())}),this.$menuInner.on("click",".divider, .dropdown-header",function(e){e.preventDefault(),e.stopPropagation(),a.options.liveSearch?a.$searchbox.focus():a.$button.focus()}),this.$menu.on("click","."+_.POPOVERHEADER+" .close",function(){a.$button.click()}),this.$searchbox.on("click",function(e){e.stopPropagation()}),this.$menu.on("click",".actions-btn",function(t){a.options.liveSearch?a.$searchbox.focus():a.$button.focus(),t.preventDefault(),t.stopPropagation(),e(this).hasClass("bs-select-all")?a.selectAll():a.deselectAll()}),this.$element.on({change:function(){a.render(),a.$element.trigger("changed.bs.select",p),p=null},focus:function(){a.options.mobile||a.$button.focus()}})},liveSearchListener:function(){var e=this,t=document.createElement("li");this.$button.on("click.bs.dropdown.data-api",function(){e.$searchbox.val()&&e.$searchbox.val("")}),this.$searchbox.on("click.bs.dropdown.data-api focus.bs.dropdown.data-api touchend.bs.dropdown.data-api",function(e){e.stopPropagation()}),this.$searchbox.on("input propertychange",function(){var i=e.$searchbox.val();if(e.selectpicker.search.map.newIndex={},e.selectpicker.search.map.originalIndex={},e.selectpicker.search.elements=[],e.selectpicker.search.data=[],i){var a,o=[],s=i.toUpperCase(),l={},d=[],c=e._searchStyle(),p=e.options.liveSearchNormalize;p&&(s=r(s)),e._$lisSelected=e.$menuInner.find(".selected");for(var a=0;a<e.selectpicker.main.data.length;a++){var h=e.selectpicker.main.data[a];l[a]||(l[a]=n(h,s,c,p)),l[a]&&void 0!==h.headerIndex&&-1===d.indexOf(h.headerIndex)&&(h.headerIndex>0&&(l[h.headerIndex-1]=!0,d.push(h.headerIndex-1)),l[h.headerIndex]=!0,d.push(h.headerIndex),l[h.lastIndex+1]=!0),l[a]&&"optgroup-label"!==h.type&&d.push(a)}for(var a=0,u=d.length;a<u;a++){var f=d[a],m=d[a-1],h=e.selectpicker.main.data[f],g=e.selectpicker.main.data[m];("divider"!==h.type||"divider"===h.type&&g&&"divider"!==g.type&&u-1!==a)&&(e.selectpicker.search.data.push(h),o.push(e.selectpicker.main.elements[f]),h.hasOwnProperty("originalIndex")&&(e.selectpicker.search.map.newIndex[h.originalIndex]=o.length-1,e.selectpicker.search.map.originalIndex[o.length-1]=h.originalIndex))}e.activeIndex=void 0,e.noScroll=!0,e.$menuInner.scrollTop(0),e.selectpicker.search.elements=o,e.createView(!0),o.length||(t.className="no-results",t.innerHTML=e.options.noneResultsText.replace("{0}",'"'+w(i)+'"'),e.$menuInner[0].firstChild.appendChild(t))}else e.$menuInner.scrollTop(0),e.createView(!1)})},_searchStyle:function(){return this.options.liveSearchStyle||"contains"},val:function(e){return void 0!==e?(this.$element.val(e).triggerNative("change"),this.$element):this.$element.val()},changeAll:function(e){if(this.multiple){void 0===e&&(e=!0);var t=this.$element.find("option"),n=0,a=0,o=i(this.$element[0]);this.$element.addClass("bs-select-hidden");for(var r=0;r<this.selectpicker.current.elements.length;r++){var s=this.selectpicker.current.data[r],l=this.selectpicker.current.map.originalIndex[r],d=t[l];d&&!d.disabled&&"divider"!==s.type&&(d.selected&&n++,d.selected=e,d.selected&&a++)}this.$element.removeClass("bs-select-hidden"),n!==a&&(this.setOptionStatus(),this.togglePlaceholder(),p=[null,null,o],this.$element.triggerNative("change"))}},selectAll:function(){return this.changeAll(!0)},deselectAll:function(){return this.changeAll(!1)},toggle:function(e){e=e||window.event,e&&e.stopPropagation(),this.$button.trigger("click.bs.dropdown.data-api")},keydown:function(t){var i,a,o,r,s,l=e(this),d=l.hasClass("dropdown-toggle"),c=d?l.closest(".dropdown"):l.closest(E.MENU),p=c.data("this"),h=p.findLis(),u=!1,f=t.which===x.TAB&&!d&&!p.options.selectOnTab,m=I.test(t.which)||f,g=p.$menuInner[0].scrollTop,v=p.isVirtual(),b=!0===v?p.selectpicker.view.position0:0;if(a=p.$newElement.hasClass(_.SHOW),!a&&(m||t.which>=48&&t.which<=57||t.which>=96&&t.which<=105||t.which>=65&&t.which<=90)&&p.$button.trigger("click.bs.dropdown.data-api"),t.which===x.ESCAPE&&a&&(t.preventDefault(),p.$button.trigger("click.bs.dropdown.data-api").focus()),m){if(!h.length)return;i=!0===v?h.index(h.filter(".active")):p.selectpicker.current.map.newIndex[p.activeIndex],void 0===i&&(i=-1),-1!==i&&(o=p.selectpicker.current.elements[i+b],o.classList.remove("active"),o.firstChild&&o.firstChild.classList.remove("active")),t.which===x.ARROW_UP?(-1!==i&&i--,i+b<0&&(i+=h.length),
p.selectpicker.view.canHighlight[i+b]||-1===(i=p.selectpicker.view.canHighlight.slice(0,i+b).lastIndexOf(!0)-b)&&(i=h.length-1)):(t.which===x.ARROW_DOWN||f)&&(i++,i+b>=p.selectpicker.view.canHighlight.length&&(i=0),p.selectpicker.view.canHighlight[i+b]||(i=i+1+p.selectpicker.view.canHighlight.slice(i+b+1).indexOf(!0))),t.preventDefault();var w=b+i;t.which===x.ARROW_UP?0===b&&i===h.length-1?(p.$menuInner[0].scrollTop=p.$menuInner[0].scrollHeight,w=p.selectpicker.current.elements.length-1):(r=p.selectpicker.current.data[w],s=r.position-r.height,u=s<g):(t.which===x.ARROW_DOWN||f)&&(0===i?(p.$menuInner[0].scrollTop=0,w=0):(r=p.selectpicker.current.data[w],s=r.position-p.sizeInfo.menuInnerHeight,u=s>g)),o=p.selectpicker.current.elements[w],o&&(o.classList.add("active"),o.firstChild&&o.firstChild.classList.add("active")),p.activeIndex=p.selectpicker.current.map.originalIndex[w],p.selectpicker.view.currentActive=o,u&&(p.$menuInner[0].scrollTop=s),p.options.liveSearch?p.$searchbox.focus():l.focus()}else if(!l.is("input")&&!$.test(t.which)||t.which===x.SPACE&&p.selectpicker.keydown.keyHistory){var y,S,k=[];t.preventDefault(),p.selectpicker.keydown.keyHistory+=C[t.which],p.selectpicker.keydown.resetKeyHistory.cancel&&clearTimeout(p.selectpicker.keydown.resetKeyHistory.cancel),p.selectpicker.keydown.resetKeyHistory.cancel=p.selectpicker.keydown.resetKeyHistory.start(),S=p.selectpicker.keydown.keyHistory,/^(.)\1+$/.test(S)&&(S=S.charAt(0));for(var T=0;T<p.selectpicker.current.data.length;T++){var D,P=p.selectpicker.current.data[T];D=n(P,S,"startsWith",!0),D&&p.selectpicker.view.canHighlight[T]&&(P.index=T,k.push(P.originalIndex))}if(k.length){var A=0;h.removeClass("active").find("a").removeClass("active"),1===S.length&&(A=k.indexOf(p.activeIndex),-1===A||A===k.length-1?A=0:A++),y=p.selectpicker.current.map.newIndex[k[A]],r=p.selectpicker.current.data[y],g-r.position>0?(s=r.position-r.height,u=!0):(s=r.position-p.sizeInfo.menuInnerHeight,u=r.position>g+p.sizeInfo.menuInnerHeight),o=p.selectpicker.current.elements[y],o.classList.add("active"),o.firstChild&&o.firstChild.classList.add("active"),p.activeIndex=k[A],o.firstChild.focus(),u&&(p.$menuInner[0].scrollTop=s),l.focus()}}a&&(t.which===x.SPACE&&!p.selectpicker.keydown.keyHistory||t.which===x.ENTER||t.which===x.TAB&&p.options.selectOnTab)&&(t.which!==x.SPACE&&t.preventDefault(),p.options.liveSearch&&t.which===x.SPACE||(p.$menuInner.find(".active a").trigger("click",!0),l.focus(),p.options.liveSearch||(t.preventDefault(),e(document).data("spaceSelect",!0))))},mobile:function(){this.$element.addClass("mobile-device")},refresh:function(){var t=e.extend({},this.options,this.$element.data());this.options=t,this.selectpicker.main.map.newIndex={},this.selectpicker.main.map.originalIndex={},this.createLi(),this.checkDisabled(),this.render(),this.setStyle(),this.setWidth(),this.setSize(!0),this.$element.trigger("refreshed.bs.select")},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},remove:function(){this.$newElement.remove(),this.$element.remove()},destroy:function(){this.$newElement.before(this.$element).remove(),this.$bsContainer?this.$bsContainer.remove():this.$menu.remove(),this.$element.off(T).removeData("selectpicker").removeClass("bs-select-hidden selectpicker"),e(window).off(".bs.select."+this.selectId)}};var P=e.fn.selectpicker;e.fn.selectpicker=s,e.fn.selectpicker.Constructor=D,e.fn.selectpicker.noConflict=function(){return e.fn.selectpicker=P,this},e(document).off("keydown.bs.dropdown.data-api").on("keydown.bs.select",'.bootstrap-select [data-toggle="dropdown"], .bootstrap-select [role="listbox"], .bootstrap-select .bs-searchbox input',D.prototype.keydown).on("focusin.modal",'.bootstrap-select [data-toggle="dropdown"], .bootstrap-select [role="listbox"], .bootstrap-select .bs-searchbox input',function(e){e.stopPropagation()}),e(window).on("load.bs.select.data-api",function(){e(".selectpicker").each(function(){var t=e(this);s.call(t,t.data())})})}(e)}),function(e,t){var i=function(i,n){var a,o,r=this;n=n||{},this.$element=e(i),this.options=e.extend(!0,{},e.fn.ajaxSelectPicker.defaults,n),this.LOG_ERROR=1,this.LOG_WARNING=2,this.LOG_INFO=3,this.LOG_DEBUG=4,this.lastRequest=!1,this.previousQuery="",this.query="",this.request=!1;var s=[{from:"ajaxResultsPreHook",to:"preprocessData"},{from:"ajaxSearchUrl",to:{ajax:{url:"{{{value}}}"}}},{from:"ajaxOptions",to:"ajax"},{from:"debug",to:function(t){var i={};i.log=Boolean(r.options[t.from])?r.LOG_DEBUG:0,r.options=e.extend(!0,{},r.options,i),delete r.options[t.from],r.log(r.LOG_WARNING,'Deprecated option "'+t.from+'". Update code to use:',i)}},{from:"mixWithCurrents",to:"preserveSelected"},{from:"placeHolderOption",to:{locale:{emptyTitle:"{{{value}}}"}}}];s.length&&e.map(s,function(t){if(r.options[t.from])if(e.isPlainObject(t.to))r.replaceValue(t.to,"{{{value}}}",r.options[t.from]),r.options=e.extend(!0,{},r.options,t.to),r.log(r.LOG_WARNING,'Deprecated option "'+t.from+'". Update code to use:',t.to),delete r.options[t.from];else if(e.isFunction(t.to))t.to.apply(r,[t]);else{var i={};i[t.to]=r.options[t.from],r.options=e.extend(!0,{},r.options,i),r.log(r.LOG_WARNING,'Deprecated option "'+t.from+'". Update code to use:',i),delete r.options[t.from]}});var l=this.$element.data();l.searchUrl&&(r.log(r.LOG_WARNING,'Deprecated attribute name: "data-search-url". Update markup to use: \' data-abs-ajax-url="'+l.searchUrl+"\" '"),this.options.ajax.url=l.searchUrl);var d=function(e,t){return t.toLowerCase()},c=function(e,t,i){var n=[].concat(e),a=n.length,o=i||{};if(a){var r=n.shift();o[r]=c(n,t,o[r])}return a?o:t},p=Object.keys(l).filter(/./.test.bind(new RegExp("^abs[A-Z]")));if(p.length){var h={},u=["locale"];for(a=0,o=p.length;a<o;a++){var f=p[a].replace(/^abs([A-Z])/,d).replace(/([A-Z])/g,"-$1").toLowerCase(),m=f.split("-");if(m[0]&&m.length>1&&-1!==u.indexOf(m[0])){for(var g=[m.shift()],v="",b=0;b<m.length;b++)v+=0===b?m[b]:m[b].charAt(0).toUpperCase()+m[b].slice(1);g.push(v),m=g}this.log(this.LOG_DEBUG,'Processing data attribute "data-abs-'+f+'":',l[p[a]]),c(m,l[p[a]],h)}this.options=e.extend(!0,{},this.options,h),this.log(this.LOG_DEBUG,"Merged in the data attribute options: ",h,this.options)}if(this.selectpicker=l.selectpicker,!this.selectpicker)return this.log(this.LOG_ERROR,"Cannot instantiate an AjaxBootstrapSelect instance without selectpicker first being initialized!"),null;if(!this.options.ajax.url)return this.log(this.LOG_ERROR,'Option "ajax.url" must be set! Options:',this.options),null;if(this.locale=e.extend(!0,{},e.fn.ajaxSelectPicker.locale),this.options.langCode=this.options.langCode||t.navigator.userLanguage||t.navigator.language||"en",!this.locale[this.options.langCode]){var w=this.options.langCode;this.options.langCode="en";var y=w.split("-");for(a=0,o=y.length;a<o;a++){var C=y.join("-");if(C.length&&this.locale[C]){this.options.langCode=C;break}y.pop()}this.log(this.LOG_WARNING,'Unknown langCode option: "'+w+'". Using the following langCode instead: "'+this.options.langCode+'".')}this.locale[this.options.langCode]=e.extend(!0,{},this.locale[this.options.langCode],this.options.locale),this.list=new t.AjaxBootstrapSelectList(this),this.list.refresh(),setTimeout(function(){r.init()},500)};i.prototype.init=function(){var i,n=this;this.options.preserveSelected&&this.selectpicker.$menu.off("click",".actions-btn").on("click",".actions-btn",function(t){n.selectpicker.options.liveSearch?n.selectpicker.$searchbox.focus():n.selectpicker.$button.focus(),t.preventDefault(),t.stopPropagation(),e(this).is(".bs-select-all")?(null===n.selectpicker.$lis&&(n.selectpicker.$lis=n.selectpicker.$menu.find("li")),n.$element.find("option:enabled").prop("selected",!0),e(n.selectpicker.$lis).not(".disabled").addClass("selected"),n.selectpicker.render()):(null===n.selectpicker.$lis&&(n.selectpicker.$lis=n.selectpicker.$menu.find("li")),n.$element.find("option:enabled").prop("selected",!1),e(n.selectpicker.$lis).not(".disabled").removeClass("selected"),n.selectpicker.render()),n.selectpicker.$element.change()}),this.selectpicker.$searchbox.attr("placeholder",this.t("searchPlaceholder")).off("input propertychange"),this.selectpicker.$searchbox.on(this.options.bindEvent,function(a){var o=n.selectpicker.$searchbox.val();if(n.log(n.LOG_DEBUG,'Bind event fired: "'+n.options.bindEvent+'", keyCode:',a.keyCode,a),n.options.cache||(n.options.ignoredKeys[13]="enter"),n.options.ignoredKeys[a.keyCode])return void n.log(n.LOG_DEBUG,"Key ignored.");if(o.length<n.options.minLength)return void n.list.setStatus(n.t("statusTooShort"));if(clearTimeout(i),o.length||(n.options.clearOnEmpty&&n.list.destroy(),n.options.emptyRequest)){if(n.previousQuery=n.query,n.query=o,n.options.cache&&13!==a.keyCode){var r=n.list.cacheGet(n.query);if(r)return n.list.setStatus(r.length?"":n.t("statusNoResults")),n.list.replaceOptions(r),void n.log(n.LOG_INFO,"Rebuilt options from cached data.")}i=setTimeout(function(){n.lastRequest&&n.lastRequest.jqXHR&&e.isFunction(n.lastRequest.jqXHR.abort)&&n.lastRequest.jqXHR.abort(),n.request=new t.AjaxBootstrapSelectRequest(n),n.request.jqXHR.always(function(){n.lastRequest=n.request,n.request=!1})},n.options.requestDelay||300)}})},i.prototype.log=function(e,i){if(t.console&&this.options.log){if("number"!=typeof this.options.log)switch("string"==typeof this.options.log&&(this.options.log=this.options.log.toLowerCase()),this.options.log){case!0:case"debug":this.options.log=this.LOG_DEBUG;break;case"info":this.options.log=this.LOG_INFO;break;case"warn":case"warning":this.options.log=this.LOG_WARNING;break;default:case!1:case"error":this.options.log=this.LOG_ERROR}if(e<=this.options.log){var n=[].slice.apply(arguments,[2]);switch(e){case this.LOG_DEBUG:e="debug";break;case this.LOG_INFO:e="info";break;case this.LOG_WARNING:e="warn";break;default:case this.LOG_ERROR:e="error"}var a="["+e.toUpperCase()+"] AjaxBootstrapSelect:";"string"==typeof i?n.unshift(a+" "+i):(n.unshift(i),n.unshift(a)),t.console[e].apply(t.console,n)}}},i.prototype.replaceValue=function(t,i,n,a){var o=this;a=e.extend({recursive:!0,depth:!1,limit:!1},a),e.each(t,function(r,s){if(!1!==a.limit&&"number"==typeof a.limit&&a.limit<=0)return!1;e.isArray(t[r])||e.isPlainObject(t[r])?(a.recursive&&!1===a.depth||a.recursive&&"number"==typeof a.depth&&a.depth>0)&&o.replaceValue(t[r],i,n,a):s===i&&(!1!==a.limit&&"number"==typeof a.limit&&a.limit--,t[r]=n)})},i.prototype.t=function(e,t){return t=t||this.options.langCode,this.locale[t]&&this.locale[t].hasOwnProperty(e)?this.locale[t][e]:(this.log(this.LOG_WARNING,"Unknown translation key:",e),e)},t.AjaxBootstrapSelect=t.AjaxBootstrapSelect||i;var n=function(t){var i=this;this.$status=e(t.options.templates.status).hide().appendTo(t.selectpicker.$menu);var n=t.t("statusInitialized");n&&n.length&&this.setStatus(n),this.cache={},this.plugin=t,this.selected=[],this.title=null,this.selectedTextFormat=t.selectpicker.options.selectedTextFormat;var a=[];t.$element.find("option").each(function(){var i=e(this),n=i.attr("value");a.push({value:n,text:i.text(),class:i.attr("class")||"",data:i.data()||{},preserved:t.options.preserveSelected,selected:!!i.attr("selected")})}),this.cacheSet("",a),t.options.preserveSelected&&(i.selected=a,t.$element.on("change.abs.preserveSelected",function(n){var a=t.$element.find(":selected");i.selected=[],t.selectpicker.multiple||(a=a.last()),a.each(function(){var t=e(this),n=t.attr("value");i.selected.push({value:n,text:t.text(),class:t.attr("class")||"",data:t.data()||{},preserved:!0,selected:!0})}),i.replaceOptions(i.cacheGet(i.plugin.query))}))};n.prototype.build=function(t){var i,n,a=t.length,o=e("<select/>"),r=e("<optgroup/>").attr("label",this.plugin.t("currentlySelected"));for(this.plugin.log(this.plugin.LOG_DEBUG,"Building the select list options from data:",t),n=0;n<a;n++){var s=t[n],l=e("<option/>").appendTo(s.preserved?r:o);if(s.hasOwnProperty("divider"))l.attr("data-divider","true");else{l.val(s.value).text(s.text).attr("title",s.text),s.class.length&&l.attr("class",s.class),s.disabled&&l.attr("disabled",!0),s.selected&&!this.plugin.selectpicker.multiple&&o.find(":selected").prop("selected",!1),s.selected&&l.attr("selected",!0);for(i in s.data)s.data.hasOwnProperty(i)&&l.attr("data-"+i,s.data[i])}}r.find("option").length&&r["before"===this.plugin.options.preserveSelectedPosition?"prependTo":"appendTo"](o);var d=o.html();return this.plugin.log(this.plugin.LOG_DEBUG,d),d},n.prototype.cacheGet=function(e,t){var i=this.cache[e]||t;return this.plugin.log(this.LOG_DEBUG,"Retrieving cache:",e,i),i},n.prototype.cacheSet=function(e,t){this.cache[e]=t,this.plugin.log(this.LOG_DEBUG,"Saving to cache:",e,t)},n.prototype.destroy=function(){this.replaceOptions(),this.plugin.list.setStatus(),this.plugin.log(this.plugin.LOG_DEBUG,"Destroyed select list.")},n.prototype.refresh=function(e){this.plugin.selectpicker.$menu.css("minHeight",0),this.plugin.selectpicker.$menu.find("> .inner").css("minHeight",0);var t=this.plugin.t("emptyTitle");!this.plugin.$element.find("option").length&&t&&t.length?this.setTitle(t):(this.title||"static"!==this.selectedTextFormat&&this.selectedTextFormat!==this.plugin.selectpicker.options.selectedTextFormat)&&this.restoreTitle(),this.plugin.selectpicker.refresh(),this.plugin.selectpicker.findLis(),e&&(this.plugin.log(this.plugin.LOG_DEBUG,"Triggering Change"),this.plugin.$element.trigger("change.$")),this.plugin.log(this.plugin.LOG_DEBUG,"Refreshed select list.")},n.prototype.replaceOptions=function(e){var t,i,n,a="",o=[],r=[],s=[];if(e=e||[],this.selected&&this.selected.length){for(this.plugin.log(this.plugin.LOG_INFO,"Processing preserved selections:",this.selected),r=[].concat(this.selected,e),i=r.length,t=0;t<i;t++)n=r[t],n.hasOwnProperty("value")&&-1===s.indexOf(n.value+"")?(s.push(n.value+""),o.push(n)):this.plugin.log(this.plugin.LOG_DEBUG,"Duplicate item found, ignoring.");e=o}e.length&&(a=this.plugin.list.build(e)),this.plugin.$element.html(a),this.refresh(),this.plugin.log(this.plugin.LOG_DEBUG,"Replaced options with data:",e)},n.prototype.restore=function(){var e=this.plugin.list.cacheGet(this.plugin.previousQuery);return e&&this.plugin.list.replaceOptions(e)&&this.plugin.log(this.plugin.LOG_DEBUG,"Restored select list to the previous query: ",this.plugin.previousQuery),this.plugin.log(this.plugin.LOG_DEBUG,"Unable to restore select list to the previous query:",this.plugin.previousQuery),!1},n.prototype.restoreTitle=function(){this.plugin.request||(this.plugin.selectpicker.options.selectedTextFormat=this.selectedTextFormat,this.title?this.plugin.$element.attr("title",this.title):this.plugin.$element.removeAttr("title"),this.title=null)},n.prototype.setTitle=function(e){this.plugin.request||(this.title=this.plugin.$element.attr("title"),this.plugin.selectpicker.options.selectedTextFormat="static",this.plugin.$element.attr("title",e))},n.prototype.setStatus=function(e){e=e||"",e.length?this.$status.html(e).show():this.$status.html("").hide()},t.AjaxBootstrapSelectList=t.AjaxBootstrapSelectList||n;var a=function(t){var i,n=this,a=["beforeSend","success","error","complete"],o=a.length;for(this.plugin=t,this.options=e.extend(!0,{},t.options.ajax),this.callbacks={},i=0;i<o;i++){var r=a[i];this.options[r]&&e.isFunction(this.options[r])&&(this.callbacks[r]=this.options[r]),this.options[r]=function(e){return function(){n.plugin.log(n.plugin.LOG_INFO,"Invoking AjaxBootstrapSelectRequest."+e+" callback:",arguments),n[e].apply(n,arguments),n.callbacks[e]&&(n.plugin.log(n.plugin.LOG_INFO,"Invoking ajax."+e+" callback:",arguments),n.callbacks[e].apply(n,arguments))}}(r)}this.options.data&&e.isFunction(this.options.data)&&(this.options.data=this.options.data.apply(this)||{q:"{{{q}}}"}),this.plugin.replaceValue(this.options.data,"{{{q}}}",this.plugin.query),this.options.url&&e.isFunction(this.options.url)&&(this.options.url=this.options.url.apply(this)),this.jqXHR=e.ajax(this.options)};a.prototype.beforeSend=function(e){this.plugin.list.destroy(),this.plugin.list.setStatus(this.plugin.t("statusSearching"))},a.prototype.complete=function(e,t){if("abort"!==t){var i=this.plugin.list.cacheGet(this.plugin.query);if(i){if(!i.length)return this.plugin.list.destroy(),this.plugin.list.setStatus(this.plugin.t("statusNoResults")),void this.plugin.log(this.plugin.LOG_INFO,"No results were returned.");this.plugin.list.setStatus()}this.plugin.list.refresh(!0)}},a.prototype.error=function(e,t,i){"abort"!==t&&(this.plugin.list.cacheSet(this.plugin.query),this.plugin.options.clearOnError&&this.plugin.list.destroy(),this.plugin.list.setStatus(this.plugin.t("errorText")),this.plugin.options.restoreOnError&&(this.plugin.list.restore(),this.plugin.list.setStatus()))},a.prototype.process=function(t){var i,n,a,o,r,s,l=[],d=[];if(this.plugin.log(this.plugin.LOG_INFO,"Processing raw data for:",this.plugin.query,t),r=t,e.isFunction(this.plugin.options.preprocessData)&&(this.plugin.log(this.plugin.LOG_DEBUG,"Invoking preprocessData callback:",this.plugin.options.processData),void 0!==(a=this.plugin.options.preprocessData.apply(this,[r]))&&null!==a&&!1!==a&&(r=a)),!e.isArray(r))return this.plugin.log(this.plugin.LOG_ERROR,'The data returned is not an Array. Use the "preprocessData" callback option to parse the results and construct a proper array for this plugin.',r),!1;for(n=r.length,i=0;i<n;i++)o=r[i],this.plugin.log(this.plugin.LOG_DEBUG,"Processing item:",o),e.isPlainObject(o)&&(o.hasOwnProperty("divider")||o.hasOwnProperty("data")&&e.isPlainObject(o.data)&&o.data.divider?(this.plugin.log(this.plugin.LOG_DEBUG,"Item is a divider, ignoring provided data."),l.push({divider:!0})):o.hasOwnProperty("value")?-1===d.indexOf(o.value+"")?(d.push(o.value+""),o=e.extend({text:o.value,class:"",data:{},disabled:!1,selected:!1},o),l.push(o)):this.plugin.log(this.plugin.LOG_DEBUG,"Duplicate item found, ignoring."):this.plugin.log(this.plugin.LOG_DEBUG,'Data item must have a "value" property, skipping.'));if(s=[].concat(l),e.isFunction(this.plugin.options.processData)&&(this.plugin.log(this.plugin.LOG_DEBUG,"Invoking processData callback:",this.plugin.options.processData),void 0!==(a=this.plugin.options.processData.apply(this,[s]))&&null!==a&&!1!==a)){if(!e.isArray(a))return this.plugin.log(this.plugin.LOG_ERROR,"The processData callback did not return an array.",a),!1;s=a}return this.plugin.list.cacheSet(this.plugin.query,s),this.plugin.log(this.plugin.LOG_INFO,"Processed data:",s),s},a.prototype.success=function(t,i,n){if(!e.isArray(t)&&!e.isPlainObject(t))return this.plugin.log(this.plugin.LOG_ERROR,"Request did not return a JSON Array or Object.",t),void this.plugin.list.destroy();var a=this.process(t);this.plugin.list.replaceOptions(a)},t.AjaxBootstrapSelectRequest=t.AjaxBootstrapSelectRequest||a,e.fn.ajaxSelectPicker=function(i){return this.each(function(){e(this).data("AjaxBootstrapSelect")||e(this).data("AjaxBootstrapSelect",new t.AjaxBootstrapSelect(this,i))})},e.fn.ajaxSelectPicker.locale={},e.fn.ajaxSelectPicker.defaults={ajax:{url:null,type:"POST",dataType:"json",data:{q:"{{{q}}}"}},minLength:0,bindEvent:"keyup",cache:!0,clearOnEmpty:!0,clearOnError:!0,emptyRequest:!1,ignoredKeys:{9:"tab",16:"shift",17:"ctrl",18:"alt",27:"esc",37:"left",39:"right",38:"up",40:"down",91:"meta"},langCode:null,locale:null,log:"error",preprocessData:function(){},preserveSelected:!0,preserveSelectedPosition:"after",processData:function(){},requestDelay:300,restoreOnError:!1,templates:{status:'<div class="status"></div>'}},e.fn.ajaxSelectPicker.locale["en-US"]={currentlySelected:"Currently Selected",emptyTitle:"Select and begin typing",errorText:"Unable to retrieve results",searchPlaceholder:"Search...",statusInitialized:"Start typing a search query",statusNoResults:"No Results",statusSearching:"Searching...",statusTooShort:"Please enter more characters"},e.fn.ajaxSelectPicker.locale.en=e.fn.ajaxSelectPicker.locale["en-US"]}(jQuery,window),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(window.jQuery)}(function(e){"use strict";e.fn.fileinputLocales={},e.fn.fileinputThemes={},String.prototype.setTokens=function(e){var t,i,n=this.toString();for(t in e)e.hasOwnProperty(t)&&(i=new RegExp("{"+t+"}","g"),n=n.replace(i,e[t]));return n};var t,i;t={FRAMES:".kv-preview-thumb",SORT_CSS:"file-sortable",OBJECT_PARAMS:'<param name="controller" value="true" />\n<param name="allowFullScreen" value="true" />\n<param name="allowScriptAccess" value="always" />\n<param name="autoPlay" value="false" />\n<param name="autoStart" value="false" />\n<param name="quality" value="high" />\n',DEFAULT_PREVIEW:'<div class="file-preview-other">\n<span class="{previewFileIconClass}">{previewFileIcon}</span>\n</div>',MODAL_ID:"kvFileinputModal",MODAL_EVENTS:["show","shown","hide","hidden","loaded"],objUrl:window.URL||window.webkitURL,compare:function(e,t,i){return void 0!==e&&(i?e===t:e.match(t))},isIE:function(e){if("Microsoft Internet Explorer"!==navigator.appName)return!1;if(10===e)return new RegExp("msie\\s"+e,"i").test(navigator.userAgent);var t,i=document.createElement("div");return i.innerHTML="\x3c!--[if IE "+e+"]> <i></i> <![endif]--\x3e",t=i.getElementsByTagName("i").length,document.body.appendChild(i),i.parentNode.removeChild(i),t},canAssignFilesToInput:function(){var e=document.createElement("input");try{return e.type="file",e.files=null,!0}catch(e){return!1}},getDragDropFolders:function(e){var t,i,n=e.length,a=0;if(n>0&&e[0].webkitGetAsEntry())for(t=0;t<n;t++)(i=e[t].webkitGetAsEntry())&&i.isDirectory&&a++;return a},initModal:function(t){var i=e("body");i.length&&t.appendTo(i)},isEmpty:function(t,i){return void 0===t||null===t||0===t.length||i&&""===e.trim(t)},isArray:function(e){return Array.isArray(e)||"[object Array]"===Object.prototype.toString.call(e)},ifSet:function(e,t,i){return i=i||"",t&&"object"==typeof t&&e in t?t[e]:i},cleanArray:function(e){return e instanceof Array||(e=[]),e.filter(function(e){return void 0!==e&&null!==e})},spliceArray:function(t,i,n){var a,o,r=0,s=[];if(!(t instanceof Array))return[];for(o=e.extend(!0,[],t),n&&o.reverse(),a=0;a<o.length;a++)a!==i&&(s[r]=o[a],r++);return n&&s.reverse(),s},getNum:function(e,t){return t=t||0,"number"==typeof e?e:("string"==typeof e&&(e=parseFloat(e)),isNaN(e)?t:e)},hasFileAPISupport:function(){return!(!window.File||!window.FileReader)},hasDragDropSupport:function(){var e=document.createElement("div");return!t.isIE(9)&&(void 0!==e.draggable||void 0!==e.ondragstart&&void 0!==e.ondrop)},hasFileUploadSupport:function(){return t.hasFileAPISupport()&&window.FormData},hasBlobSupport:function(){try{return!!window.Blob&&Boolean(new Blob)}catch(e){return!1}},hasArrayBufferViewSupport:function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}},dataURI2Blob:function(e){var i,n,a,o,r,s,l=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,d=t.hasBlobSupport();if(!((d||l)&&window.atob&&window.ArrayBuffer&&window.Uint8Array))return null;for(i=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):decodeURIComponent(e.split(",")[1]),n=new ArrayBuffer(i.length),a=new Uint8Array(n),o=0;o<i.length;o+=1)a[o]=i.charCodeAt(o);return r=e.split(",")[0].split(":")[1].split(";")[0],d?new Blob([t.hasArrayBufferViewSupport()?a:n],{type:r}):(s=new l,s.append(n),s.getBlob(r))},arrayBuffer2String:function(e){if(window.TextDecoder)return new TextDecoder("utf-8").decode(e);var t,i,n,a,o=Array.prototype.slice.apply(new Uint8Array(e)),r="",s=0;for(t=o.length;s<t;)switch((i=o[s++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:r+=String.fromCharCode(i);break;case 12:case 13:n=o[s++],r+=String.fromCharCode((31&i)<<6|63&n);break;case 14:n=o[s++],a=o[s++],r+=String.fromCharCode((15&i)<<12|(63&n)<<6|(63&a)<<0)}return r},isHtml:function(e){var t=document.createElement("div");t.innerHTML=e;for(var i=t.childNodes,n=i.length;n--;)if(1===i[n].nodeType)return!0;return!1},isSvg:function(e){return e.match(/^\s*<\?xml/i)&&(e.match(/<!DOCTYPE svg/i)||e.match(/<svg/i))},getMimeType:function(e,t,i){switch(e){case"ffd8ffe0":case"ffd8ffe1":case"ffd8ffe2":return"image/jpeg";case"89504E47":return"image/png";case"47494638":return"image/gif";case"49492a00":return"image/tiff";case"52494646":return"image/webp";case"66747970":return"video/3gp";case"4f676753":return"video/ogg";case"1a45dfa3":return"video/mkv";case"000001ba":case"000001b3":return"video/mpeg";case"3026b275":return"video/wmv";case"25504446":return"application/pdf";case"25215053":return"application/ps";case"504b0304":case"504b0506":case"504b0508":return"application/zip";case"377abcaf":return"application/7z";case"75737461":return"application/tar";case"7801730d":return"application/dmg";default:switch(e.substring(0,6)){case"435753":return"application/x-shockwave-flash";case"494433":return"audio/mp3";case"425a68":return"application/bzip";default:switch(e.substring(0,4)){case"424d":return"image/bmp";case"fffb":return"audio/mp3";case"4d5a":return"application/exe";case"1f9d":case"1fa0":return"application/zip";case"1f8b":return"application/gzip";default:return t&&!t.match(/[^\u0000-\u007f]/)?"application/text-plain":i}}}},addCss:function(e,t){e.removeClass(t).addClass(t)},getElement:function(i,n,a){return t.isEmpty(i)||t.isEmpty(i[n])?a:e(i[n])},uniqId:function(){return Math.round((new Date).getTime())+"_"+Math.round(100*Math.random())},htmlEncode:function(e,t){return void 0===e?t||null:e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},replaceTags:function(t,i){var n=t;return i?(e.each(i,function(e,t){"function"==typeof t&&(t=t()),n=n.split(e).join(t)}),n):n},cleanMemory:function(e){var i=e.is("img")?e.attr("src"):e.find("source").attr("src");t.objUrl.revokeObjectURL(i)},findFileName:function(e){var t=e.lastIndexOf("/");return-1===t&&(t=e.lastIndexOf("\\")),e.split(e.substring(t,t+1)).pop()},checkFullScreen:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},toggleFullScreen:function(e){var i=document,n=i.documentElement;n&&e&&!t.checkFullScreen()?n.requestFullscreen?n.requestFullscreen():n.msRequestFullscreen?n.msRequestFullscreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.webkitRequestFullscreen&&n.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):i.exitFullscreen?i.exitFullscreen():i.msExitFullscreen?i.msExitFullscreen():i.mozCancelFullScreen?i.mozCancelFullScreen():i.webkitExitFullscreen&&i.webkitExitFullscreen()},moveArray:function(t,i,n,a){var o=e.extend(!0,[],t);if(a&&o.reverse(),n>=o.length)for(var r=n-o.length;1+r--;)o.push(void 0);return o.splice(n,0,o.splice(i,1)[0]),a&&o.reverse(),o},cleanZoomCache:function(e){var t=e.closest(".kv-zoom-cache-theme");t.length||(t=e.closest(".kv-zoom-cache")),t.remove()},closeButton:function(e){return'<button type="button" class="'+(e=e?"close "+e:"close")+'" aria-label="Close">\n  <span aria-hidden="true">&times;</span>\n</button>'},getRotation:function(e){switch(e){case 2:return"rotateY(180deg)";case 3:return"rotate(180deg)";case 4:return"rotate(180deg) rotateY(180deg)";case 5:return"rotate(270deg) rotateY(180deg)";case 6:return"rotate(90deg)";case 7:return"rotate(90deg) rotateY(180deg)";case 8:return"rotate(270deg)";default:return""}},setTransform:function(e,t){e&&(e.style.transform=t,e.style.webkitTransform=t,e.style["-moz-transform"]=t,e.style["-ms-transform"]=t,e.style["-o-transform"]=t)},setImageOrientation:function(e,i,n){if(e&&e.length){var a="load.fileinputimageorient";e.off(a).on(a,function(){var a=e.get(0),o=i&&i.length?i.get(0):null,r=a.offsetHeight,s=a.offsetWidth,l=t.getRotation(n);if(e.data("orientation",n),o&&i.data("orientation",n),n<5)return t.setTransform(a,l),void t.setTransform(o,l);var d=Math.atan(s/r),c=Math.sqrt(Math.pow(r,2)+Math.pow(s,2)),p=c?r/Math.cos(Math.PI/2+d)/c:1,h=" scale("+Math.abs(p)+")";t.setTransform(a,l+h),t.setTransform(o,l+h)})}}},i=function(i,n){var a=this;a.$element=e(i),a.$parent=a.$element.parent(),a._validate()&&(a.isPreviewable=t.hasFileAPISupport(),a.isIE9=t.isIE(9),a.isIE10=t.isIE(10),(a.isPreviewable||a.isIE9)&&(a._init(n),a._listen()),a.$element.removeClass("file-loading"))},i.prototype={constructor:i,_cleanup:function(){var e=this;e.reader=null,e.formdata={},e.uploadCount=0,e.uploadStatus={},e.uploadLog=[],e.uploadAsyncCount=0,e.loadedImages=[],e.totalImagesCount=0,e.ajaxRequests=[],e.clearStack(),e.fileBatchCompleted=!0,e.isPreviewable||(e.showPreview=!1),e.isError=!1,e.ajaxAborted=!1,e.cancelling=!1},_init:function(i,n){var a,o,r,s,l=this,d=l.$element;l.options=i,e.each(i,function(e,i){switch(e){case"minFileCount":case"maxFileCount":case"minFileSize":case"maxFileSize":case"maxFilePreviewSize":case"resizeImageQuality":case"resizeIfSizeMoreThan":case"progressUploadThreshold":case"initialPreviewCount":case"zoomModalHeight":case"minImageHeight":case"maxImageHeight":case"minImageWidth":case"maxImageWidth":l[e]=t.getNum(i);break;default:l[e]=i}}),l.rtl&&(s=l.previewZoomButtonIcons.prev,l.previewZoomButtonIcons.prev=l.previewZoomButtonIcons.next,l.previewZoomButtonIcons.next=s),n||l._cleanup(),l.$form=d.closest("form"),l._initTemplateDefaults(),l.uploadFileAttr=t.isEmpty(d.attr("name"))?"file_data":d.attr("name"),r=l._getLayoutTemplate("progress"),l.progressTemplate=r.replace("{class}",l.progressClass),l.progressCompleteTemplate=r.replace("{class}",l.progressCompleteClass),l.progressErrorTemplate=r.replace("{class}",l.progressErrorClass),l.isDisabled=d.attr("disabled")||d.attr("readonly"),l.isDisabled&&d.attr("disabled",!0),l.isClickable=l.browseOnZoneClick&&l.showPreview&&(l.dropZoneEnabled||!t.isEmpty(l.defaultPreviewContent)),l.isAjaxUpload=t.hasFileUploadSupport()&&!t.isEmpty(l.uploadUrl),l.dropZoneEnabled=t.hasDragDropSupport()&&l.dropZoneEnabled,l.isAjaxUpload||(l.dropZoneEnabled=l.dropZoneEnabled&&t.canAssignFilesToInput()),l.slug="function"==typeof i.slugCallback?i.slugCallback:l._slugDefault,l.mainTemplate=l.showCaption?l._getLayoutTemplate("main1"):l._getLayoutTemplate("main2"),l.captionTemplate=l._getLayoutTemplate("caption"),l.previewGenericTemplate=l._getPreviewTemplate("generic"),!l.imageCanvas&&l.resizeImage&&(l.maxImageWidth||l.maxImageHeight)&&(l.imageCanvas=document.createElement("canvas"),l.imageCanvasContext=l.imageCanvas.getContext("2d")),t.isEmpty(d.attr("id"))&&d.attr("id",t.uniqId()),l.namespace=".fileinput_"+d.attr("id").replace(/-/g,"_"),void 0===l.$container?l.$container=l._createContainer():l._refreshContainer(),o=l.$container,l.$dropZone=o.find(".file-drop-zone"),l.$progress=o.find(".kv-upload-progress"),l.$btnUpload=o.find(".fileinput-upload"),l.$captionContainer=t.getElement(i,"elCaptionContainer",o.find(".file-caption")),l.$caption=t.getElement(i,"elCaptionText",o.find(".file-caption-name")),t.isEmpty(l.msgPlaceholder)||(a=d.attr("multiple")?l.filePlural:l.fileSingle,l.$caption.attr("placeholder",l.msgPlaceholder.replace("{files}",a))),l.$captionIcon=l.$captionContainer.find(".file-caption-icon"),l.$previewContainer=t.getElement(i,"elPreviewContainer",o.find(".file-preview")),l.$preview=t.getElement(i,"elPreviewImage",o.find(".file-preview-thumbnails")),l.$previewStatus=t.getElement(i,"elPreviewStatus",o.find(".file-preview-status")),l.$errorContainer=t.getElement(i,"elErrorContainer",l.$previewContainer.find(".kv-fileinput-error")),l._validateDisabled(),t.isEmpty(l.msgErrorClass)||t.addCss(l.$errorContainer,l.msgErrorClass),n?l._errorsExist()||l.$errorContainer.hide():(l.$errorContainer.hide(),l.previewInitId="preview-"+t.uniqId(),l._initPreviewCache(),l._initPreview(!0),l._initPreviewActions(),l.$parent.hasClass("file-loading")&&(l.$container.insertBefore(l.$parent),l.$parent.remove())),l._setFileDropZoneTitle(),d.attr("disabled")&&l.disable(),l._initZoom(),l.hideThumbnailContent&&t.addCss(l.$preview,"hide-content")},_initTemplateDefaults:function(){
var i,n,a,o,r,s,l,d,c,p,h,u,f,m,g,v,b,w,y,C,x,S,k,T,_,E,I,$,D,P,A,O,R,L,F,z,M,j,N,B,U=this;i='{preview}\n<div class="kv-upload-progress kv-hidden"></div><div class="clearfix"></div>\n<div class="input-group {class}">\n  {caption}\n<div class="input-group-btn input-group-append">\n      {remove}\n      {cancel}\n      {upload}\n      {browse}\n    </div>\n</div>',n='{preview}\n<div class="kv-upload-progress kv-hidden"></div>\n<div class="clearfix"></div>\n{remove}\n{cancel}\n{upload}\n{browse}\n',a='<div class="file-preview {class}">\n    {close}    <div class="{dropClass}">\n    <div class="file-preview-thumbnails">\n    </div>\n    <div class="clearfix"></div>    <div class="file-preview-status text-center text-success"></div>\n    <div class="kv-fileinput-error"></div>\n    </div>\n</div>',r=t.closeButton("fileinput-remove"),o='<i class="glyphicon glyphicon-file"></i>',s='<div class="file-caption form-control {class}" tabindex="500">\n  <span class="file-caption-icon"></span>\n  <input class="file-caption-name" onkeydown="return false;" onpaste="return false;">\n</div>',l='<button type="{type}" tabindex="500" title="{title}" class="{css}" {status}>{icon} {label}</button>',d='<a href="{href}" tabindex="500" title="{title}" class="{css}" {status}>{icon} {label}</a>',c='<div tabindex="500" class="{css}" {status}>{icon} {label}</div>',p='<div id="'+t.MODAL_ID+'" class="file-zoom-dialog modal fade" tabindex="-1" aria-labelledby="'+t.MODAL_ID+'Label"></div>',h='<div class="modal-dialog modal-lg{rtl}" role="document">\n  <div class="modal-content">\n    <div class="modal-header">\n      <h5 class="modal-title">{heading}</h5>\n      <span class="kv-zoom-title"></span>\n      <div class="kv-zoom-actions">{toggleheader}{fullscreen}{borderless}{close}</div>\n    </div>\n    <div class="modal-body">\n      <div class="floating-buttons"></div>\n      <div class="kv-zoom-body file-zoom-content {zoomFrameClass}"></div>\n{prev} {next}\n    </div>\n  </div>\n</div>\n',u='<div class="progress">\n    <div class="{class}" role="progressbar" aria-valuenow="{percent}" aria-valuemin="0" aria-valuemax="100" style="width:{percent}%;">\n        {status}\n     </div>\n</div>',f=" <samp>({sizeText})</samp>",m='<div class="file-thumbnail-footer">\n    <div class="file-footer-caption" title="{caption}">\n        <div class="file-caption-info">{caption}</div>\n        <div class="file-size-info">{size}</div>\n    </div>\n    {progress}\n{indicator}\n{actions}\n</div>',g='<div class="file-actions">\n    <div class="file-footer-buttons">\n        {download} {upload} {delete} {zoom} {other}    </div>\n</div>\n{drag}\n<div class="clearfix"></div>',v='<button type="button" class="kv-file-remove {removeClass}" title="{removeTitle}" {dataUrl}{dataKey}>{removeIcon}</button>\n',b='<button type="button" class="kv-file-upload {uploadClass}" title="{uploadTitle}">{uploadIcon}</button>',w='<a class="kv-file-download {downloadClass}" title="{downloadTitle}" href="{downloadUrl}" download="{caption}" target="_blank">{downloadIcon}</a>',y='<button type="button" class="kv-file-zoom {zoomClass}" title="{zoomTitle}">{zoomIcon}</button>',C='<span class="file-drag-handle {dragClass}" title="{dragTitle}">{dragIcon}</span>',x='<div class="file-upload-indicator" title="{indicatorTitle}">{indicator}</div>',S='<div class="file-preview-frame {frameClass}" id="{previewId}" data-fileindex="{fileindex}" data-template="{template}"',k=S+'><div class="kv-file-content">\n',T=S+' title="{caption}"><div class="kv-file-content">\n',_="</div>{footer}\n</div>\n",E="{content}\n",j=" {style}",I='<div class="kv-preview-data file-preview-html" title="{caption}"'+j+">{data}</div>\n",$='<img src="{data}" class="file-preview-image kv-preview-data" title="{caption}" alt="{caption}"'+j+">\n",D='<textarea class="kv-preview-data file-preview-text" title="{caption}" readonly'+j+">{data}</textarea>\n",P='<iframe class="kv-preview-data file-preview-office" src="https://view.officeapps.live.com/op/embed.aspx?src={data}"'+j+"></iframe>",A='<iframe class="kv-preview-data file-preview-gdocs" src="https://docs.google.com/gview?url={data}&embedded=true"'+j+"></iframe>",O='<video class="kv-preview-data file-preview-video" controls'+j+'>\n<source src="{data}" type="{type}">\n'+t.DEFAULT_PREVIEW+"\n</video>\n",R='\x3c!--suppress ALL --\x3e<audio class="kv-preview-data file-preview-audio" controls'+j+'>\n<source src="{data}" type="{type}">\n'+t.DEFAULT_PREVIEW+"\n</audio>\n",L='<embed class="kv-preview-data file-preview-flash" src="{data}" type="application/x-shockwave-flash"'+j+">\n",z='<embed class="kv-preview-data file-preview-pdf" src="{data}" type="application/pdf"'+j+">\n",F='<object class="kv-preview-data file-preview-object file-object {typeCss}" data="{data}" type="{type}"'+j+'>\n<param name="movie" value="{caption}" />\n'+t.OBJECT_PARAMS+" "+t.DEFAULT_PREVIEW+"\n</object>\n",M='<div class="kv-preview-data file-preview-other-frame"'+j+">\n"+t.DEFAULT_PREVIEW+"\n</div>\n",N='<div class="kv-zoom-cache" style="display:none">{zoomContent}</div>',B={width:"100%",height:"100%","min-height":"480px"},U._isPdfRendered()&&(z=U.pdfRendererTemplate.replace("{renderer}",U.pdfRendererUrl)),U.defaults={layoutTemplates:{main1:i,main2:n,preview:a,close:r,fileIcon:o,caption:s,modalMain:p,modal:h,progress:u,size:f,footer:m,indicator:x,actions:g,actionDelete:v,actionUpload:b,actionDownload:w,actionZoom:y,actionDrag:C,btnDefault:l,btnLink:d,btnBrowse:c,zoomCache:N},previewMarkupTags:{tagBefore1:k,tagBefore2:T,tagAfter:_},previewContentTemplates:{generic:E,html:I,image:$,text:D,office:P,gdocs:A,video:O,audio:R,flash:L,object:F,pdf:z,other:M},allowedPreviewTypes:["image","html","text","video","audio","flash","pdf","object"],previewTemplates:{},previewSettings:{image:{width:"auto",height:"auto","max-width":"100%","max-height":"100%"},html:{width:"213px",height:"160px"},text:{width:"213px",height:"160px"},office:{width:"213px",height:"160px"},gdocs:{width:"213px",height:"160px"},video:{width:"213px",height:"160px"},audio:{width:"100%",height:"30px"},flash:{width:"213px",height:"160px"},object:{width:"213px",height:"160px"},pdf:{width:"100%",height:"160px"},other:{width:"213px",height:"160px"}},previewSettingsSmall:{image:{width:"auto",height:"auto","max-width":"100%","max-height":"100%"},html:{width:"100%",height:"160px"},text:{width:"100%",height:"160px"},office:{width:"100%",height:"160px"},gdocs:{width:"100%",height:"160px"},video:{width:"100%",height:"auto"},audio:{width:"100%",height:"30px"},flash:{width:"100%",height:"auto"},object:{width:"100%",height:"auto"},pdf:{width:"100%",height:"160px"},other:{width:"100%",height:"160px"}},previewZoomSettings:{image:{width:"auto",height:"auto","max-width":"100%","max-height":"100%"},html:B,text:B,office:{width:"100%",height:"100%","max-width":"100%","min-height":"480px"},gdocs:{width:"100%",height:"100%","max-width":"100%","min-height":"480px"},video:{width:"auto",height:"100%","max-width":"100%"},audio:{width:"100%",height:"30px"},flash:{width:"auto",height:"480px"},object:{width:"auto",height:"100%","max-width":"100%","min-height":"480px"},pdf:B,other:{width:"auto",height:"100%","min-height":"480px"}},fileTypeSettings:{image:function(e,i){return t.compare(e,"image.*")&&!t.compare(e,/(tiff?|wmf)$/i)||t.compare(i,/\.(gif|png|jpe?g)$/i)},html:function(e,i){return t.compare(e,"text/html")||t.compare(i,/\.(htm|html)$/i)},office:function(e,i){return t.compare(e,/(word|excel|powerpoint|office)$/i)||t.compare(i,/\.(docx?|xlsx?|pptx?|pps|potx?)$/i)},gdocs:function(e,i){return t.compare(e,/(word|excel|powerpoint|office|iwork-pages|tiff?)$/i)||t.compare(i,/\.(docx?|xlsx?|pptx?|pps|potx?|rtf|ods|odt|pages|ai|dxf|ttf|tiff?|wmf|e?ps)$/i)},text:function(e,i){return t.compare(e,"text.*")||t.compare(i,/\.(xml|javascript)$/i)||t.compare(i,/\.(txt|md|csv|nfo|ini|json|php|js|css)$/i)},video:function(e,i){return t.compare(e,"video.*")&&(t.compare(e,/(ogg|mp4|mp?g|mov|webm|3gp)$/i)||t.compare(i,/\.(og?|mp4|webm|mp?g|mov|3gp)$/i))},audio:function(e,i){return t.compare(e,"audio.*")&&(t.compare(i,/(ogg|mp3|mp?g|wav)$/i)||t.compare(i,/\.(og?|mp3|mp?g|wav)$/i))},flash:function(e,i){return t.compare(e,"application/x-shockwave-flash",!0)||t.compare(i,/\.(swf)$/i)},pdf:function(e,i){return t.compare(e,"application/pdf",!0)||t.compare(i,/\.(pdf)$/i)},object:function(){return!0},other:function(){return!0}},fileActionSettings:{showRemove:!0,showUpload:!0,showDownload:!0,showZoom:!0,showDrag:!0,removeIcon:'<i class="glyphicon glyphicon-trash"></i>',removeClass:"btn btn-sm btn-kv btn-default btn-outline-secondary",removeErrorClass:"btn btn-sm btn-kv btn-danger",removeTitle:"Remove file",uploadIcon:'<i class="glyphicon glyphicon-upload"></i>',uploadClass:"btn btn-sm btn-kv btn-default btn-outline-secondary",uploadTitle:"Upload file",uploadRetryIcon:'<i class="glyphicon glyphicon-repeat"></i>',uploadRetryTitle:"Retry upload",downloadIcon:'<i class="glyphicon glyphicon-download"></i>',downloadClass:"btn btn-sm btn-kv btn-default btn-outline-secondary",downloadTitle:"Download file",zoomIcon:'<i class="glyphicon glyphicon-zoom-in"></i>',zoomClass:"btn btn-sm btn-kv btn-default btn-outline-secondary",zoomTitle:"View Details",dragIcon:'<i class="glyphicon glyphicon-move"></i>',dragClass:"text-info",dragTitle:"Move / Rearrange",dragSettings:{},indicatorNew:'<i class="glyphicon glyphicon-plus-sign text-warning"></i>',indicatorSuccess:'<i class="glyphicon glyphicon-ok-sign text-success"></i>',indicatorError:'<i class="glyphicon glyphicon-exclamation-sign text-danger"></i>',indicatorLoading:'<i class="glyphicon glyphicon-hourglass text-muted"></i>',indicatorNewTitle:"Not uploaded yet",indicatorSuccessTitle:"Uploaded",indicatorErrorTitle:"Upload Error",indicatorLoadingTitle:"Uploading ..."}},e.each(U.defaults,function(t,i){if("allowedPreviewTypes"===t)return void(void 0===U.allowedPreviewTypes&&(U.allowedPreviewTypes=i));U[t]=e.extend(!0,{},i,U[t])}),U._initPreviewTemplates()},_initPreviewTemplates:function(){var i,n=this,a=n.previewMarkupTags,o=a.tagAfter;e.each(n.previewContentTemplates,function(e,r){t.isEmpty(n.previewTemplates[e])&&(i=a.tagBefore2,"generic"!==e&&"image"!==e&&"html"!==e&&"text"!==e||(i=a.tagBefore1),n._isPdfRendered()&&"pdf"===e&&(i=i.replace("kv-file-content","kv-file-content kv-pdf-rendered")),n.previewTemplates[e]=i+r+o)})},_initPreviewCache:function(){var i=this;i.previewCache={data:{},init:function(){var e=i.initialPreview;e.length>0&&!t.isArray(e)&&(e=e.split(i.initialPreviewDelimiter)),i.previewCache.data={content:e,config:i.initialPreviewConfig,tags:i.initialPreviewThumbTags}},count:function(){return i.previewCache.data&&i.previewCache.data.content?i.previewCache.data.content.length:0},get:function(n,a){var o,r,s,l,d,c,p,h="init_"+n,u=i.previewCache.data,f=u.config[n],m=u.content[n],g=i.previewInitId+"-"+h,v=t.ifSet("previewAsData",f,i.initialPreviewAsData),b=function(e,n,a,o,r,s,l,d,c){return d=" file-preview-initial "+t.SORT_CSS+(d?" "+d:""),i._generatePreviewTemplate(e,n,a,o,r,!1,null,d,s,l,c)};return m?(a=void 0===a||a,s=t.ifSet("type",f,i.initialPreviewFileType||"generic"),d=t.ifSet("filename",f,t.ifSet("caption",f)),c=t.ifSet("filetype",f,s),l=i.previewCache.footer(n,a,f&&f.size||null),p=t.ifSet("frameClass",f),o=v?b(s,m,d,c,g,l,h,p):b("generic",m,d,c,g,l,h,p,s).setTokens({content:u.content[n]}),u.tags.length&&u.tags[n]&&(o=t.replaceTags(o,u.tags[n])),t.isEmpty(f)||t.isEmpty(f.frameAttr)||(r=e(document.createElement("div")).html(o),r.find(".file-preview-initial").attr(f.frameAttr),o=r.html(),r.remove()),o):""},add:function(e,n,a,o){var r,s=i.previewCache.data;return t.isArray(e)||(e=e.split(i.initialPreviewDelimiter)),o?(r=s.content.push(e)-1,s.config[r]=n,s.tags[r]=a):(r=e.length-1,s.content=e,s.config=n,s.tags=a),i.previewCache.data=s,r},set:function(e,n,a,o){var r,s,l=i.previewCache.data;if(e&&e.length&&(t.isArray(e)||(e=e.split(i.initialPreviewDelimiter)),s=e.filter(function(e){return null!==e}),s.length)){if(void 0===l.content&&(l.content=[]),void 0===l.config&&(l.config=[]),void 0===l.tags&&(l.tags=[]),o){for(r=0;r<e.length;r++)e[r]&&l.content.push(e[r]);for(r=0;r<n.length;r++)n[r]&&l.config.push(n[r]);for(r=0;r<a.length;r++)a[r]&&l.tags.push(a[r])}else l.content=e,l.config=n,l.tags=a;i.previewCache.data=l}},unset:function(e){var n=i.previewCache.count(),a=i.reversePreviewOrder;if(n){if(1===n)return i.previewCache.data.content=[],i.previewCache.data.config=[],i.previewCache.data.tags=[],i.initialPreview=[],i.initialPreviewConfig=[],void(i.initialPreviewThumbTags=[]);i.previewCache.data.content=t.spliceArray(i.previewCache.data.content,e,a),i.previewCache.data.config=t.spliceArray(i.previewCache.data.config,e,a),i.previewCache.data.tags=t.spliceArray(i.previewCache.data.tags,e,a)}},out:function(){var e,t,n,a="",o=i.previewCache.count();if(0===o)return{content:"",caption:""};for(t=0;t<o;t++)n=i.previewCache.get(t),a=i.reversePreviewOrder?n+a:a+n;return e=i._getMsgSelected(o),{content:a,caption:e}},footer:function(e,n,a){var o=i.previewCache.data||{};if(t.isEmpty(o.content))return"";(t.isEmpty(o.config)||t.isEmpty(o.config[e]))&&(o.config[e]={}),n=void 0===n||n;var r,s=o.config[e],l=t.ifSet("caption",s),d=t.ifSet("width",s,"auto"),c=t.ifSet("url",s,!1),p=t.ifSet("key",s,null),h=i.fileActionSettings,u=i.initialPreviewShowDelete||!1,f=s.downloadUrl||i.initialPreviewDownloadUrl||"",m=s.filename||s.caption||"",g=!!f,v=t.ifSet("showRemove",s,t.ifSet("showRemove",h,u)),b=t.ifSet("showDownload",s,t.ifSet("showDownload",h,g)),w=t.ifSet("showZoom",s,t.ifSet("showZoom",h,!0)),y=t.ifSet("showDrag",s,t.ifSet("showDrag",h,!0)),C=!1===c&&n;return b=b&&!1!==s.downloadUrl&&!!f,r=i._renderFileActions(!1,b,v,w,y,C,c,p,!0,f,m),i._getLayoutTemplate("footer").setTokens({progress:i._renderThumbProgress(),actions:r,caption:l,size:i._getSize(a),width:d,indicator:""})}},i.previewCache.init()},_isPdfRendered:function(){var e=this,t=e.usePdfRenderer;return("function"==typeof t?t():!!t)&&e.pdfRendererUrl},_handler:function(e,t,i){var n=this,a=n.namespace,o=t.split(" ").join(a+" ")+a;e&&e.length&&e.off(o).on(o,i)},_log:function(e){var t=this,i=t.$element.attr("id");i&&(e='"'+i+'": '+e),e="bootstrap-fileinput: "+e,void 0!==window.console.log?window.console.log(e):window.alert(e)},_validate:function(){var e=this,t="file"===e.$element.attr("type");return t||e._log('The input "type" must be set to "file" for initializing the "bootstrap-fileinput" plugin.'),t},_errorsExist:function(){var t,i=this;return!!i.$errorContainer.find("li").length||(t=e(document.createElement("div")).html(i.$errorContainer.html()),t.find(".kv-error-close").remove(),t.find("ul").remove(),!!e.trim(t.text()).length)},_errorHandler:function(e,t){var i=this,n=e.target.error,a=function(e){i._showError(e.replace("{name}",t))};a(n.code===n.NOT_FOUND_ERR?i.msgFileNotFound:n.code===n.SECURITY_ERR?i.msgFileSecured:n.code===n.NOT_READABLE_ERR?i.msgFileNotReadable:n.code===n.ABORT_ERR?i.msgFilePreviewAborted:i.msgFilePreviewError)},_addError:function(e){var t=this,i=t.$errorContainer;e&&i.length&&(i.html(t.errorCloseButton+e),t._handler(i.find(".kv-error-close"),"click",function(){setTimeout(function(){t.showPreview&&!t.getFrames().length&&t.clear(),i.fadeOut("slow")},10)}))},_setValidationError:function(e){var i=this;e=(e?e+" ":"")+"has-error",i.$container.removeClass(e).addClass("has-error"),t.addCss(i.$captionContainer,"is-invalid")},_resetErrors:function(e){var t=this,i=t.$errorContainer;t.isError=!1,t.$container.removeClass("has-error"),t.$captionContainer.removeClass("is-invalid"),i.html(""),e?i.fadeOut("slow"):i.hide()},_showFolderError:function(e){var t,i=this,n=i.$errorContainer;e&&(i.isAjaxUpload||i._clearFileInput(),t=i.msgFoldersNotAllowed.replace("{n}",e),i._addError(t),i._setValidationError(),n.fadeIn(800),i._raise("filefoldererror",[e,t]))},_showUploadError:function(e,t,i){var n=this,a=n.$errorContainer,o=i||"fileuploaderror",r=t&&t.id?'<li data-file-id="'+t.id+'">'+e+"</li>":"<li>"+e+"</li>";return 0===a.find("ul").length?n._addError("<ul>"+r+"</ul>"):a.find("ul").append(r),a.fadeIn(800),n._raise(o,[t,e]),n._setValidationError("file-input-new"),!0},_showError:function(e,t,i){var n=this,a=n.$errorContainer,o=i||"fileerror";return t=t||{},t.reader=n.reader,n._addError(e),a.fadeIn(800),n._raise(o,[t,e]),n.isAjaxUpload||n._clearFileInput(),n._setValidationError("file-input-new"),n.$btnUpload.attr("disabled",!0),!0},_noFilesError:function(e){var t=this,i=t.minFileCount>1?t.filePlural:t.fileSingle,n=t.msgFilesTooLess.replace("{n}",t.minFileCount).replace("{files}",i),a=t.$errorContainer;t._addError(n),t.isError=!0,t._updateFileDetails(0),a.fadeIn(800),t._raise("fileerror",[e,n]),t._clearFileInput(),t._setValidationError()},_parseError:function(t,i,n,a){var o,r=this,s=e.trim(n+""),l=void 0!==i.responseJSON&&void 0!==i.responseJSON.error?i.responseJSON.error:i.responseText;return r.cancelling&&r.msgUploadAborted&&(s=r.msgUploadAborted),r.showAjaxErrorDetails&&l&&(l=e.trim(l.replace(/\n\s*\n/g,"\n")),o=l.length?"<pre>"+l+"</pre>":"",s+=s?o:l),s||(s=r.msgAjaxError.replace("{operation}",t)),r.cancelling=!1,a?"<b>"+a+": </b>"+s:s},_parseFileType:function(e,i){var n,a,o,r,s=this,l=s.allowedPreviewTypes||[];if("application/text-plain"===e)return"text";for(r=0;r<l.length;r++)if(o=l[r],n=s.fileTypeSettings[o],a=n(e,i)?o:"",!t.isEmpty(a))return a;return"other"},_getPreviewIcon:function(t){var i,n=this,a=null;return t&&t.indexOf(".")>-1&&(i=t.split(".").pop(),n.previewFileIconSettings&&(a=n.previewFileIconSettings[i]||n.previewFileIconSettings[i.toLowerCase()]||null),n.previewFileExtSettings&&e.each(n.previewFileExtSettings,function(e,t){if(n.previewFileIconSettings[e]&&t(i))return void(a=n.previewFileIconSettings[e])})),a},_parseFilePreviewIcon:function(e,t){var i=this,n=i._getPreviewIcon(t)||i.previewFileIcon,a=e;return a.indexOf("{previewFileIcon}")>-1&&(a=a.setTokens({previewFileIconClass:i.previewFileIconClass,previewFileIcon:n})),a},_raise:function(t,i){var n=this,a=e.Event(t);if(void 0!==i?n.$element.trigger(a,i):n.$element.trigger(a),a.isDefaultPrevented()||!1===a.result)return!1;switch(t){case"filebatchuploadcomplete":case"filebatchuploadsuccess":case"fileuploaded":case"fileclear":case"filecleared":case"filereset":case"fileerror":case"filefoldererror":case"fileuploaderror":case"filebatchuploaderror":case"filedeleteerror":case"filecustomerror":case"filesuccessremove":break;default:n.ajaxAborted||(n.ajaxAborted=a.result)}return!0},_listenFullScreen:function(e){var t,i,n=this,a=n.$modal;a&&a.length&&(t=a&&a.find(".btn-fullscreen"),i=a&&a.find(".btn-borderless"),t.length&&i.length&&(t.removeClass("active").attr("aria-pressed","false"),i.removeClass("active").attr("aria-pressed","false"),e?t.addClass("active").attr("aria-pressed","true"):i.addClass("active").attr("aria-pressed","true"),a.hasClass("file-zoom-fullscreen")?n._maximizeZoomDialog():e?n._maximizeZoomDialog():i.removeClass("active").attr("aria-pressed","false")))},_listen:function(){var i,n=this,a=n.$element,o=n.$form,r=n.$container;n._handler(a,"click",function(e){a.hasClass("file-no-browse")&&(a.data("zoneClicked")?a.data("zoneClicked",!1):e.preventDefault())}),n._handler(a,"change",e.proxy(n._change,n)),n.showBrowse&&n._handler(n.$btnFile,"click",e.proxy(n._browse,n)),n._handler(r.find(".fileinput-remove:not([disabled])"),"click",e.proxy(n.clear,n)),n._handler(r.find(".fileinput-cancel"),"click",e.proxy(n.cancel,n)),n._initDragDrop(),n._handler(o,"reset",e.proxy(n.clear,n)),n.isAjaxUpload||n._handler(o,"submit",e.proxy(n._submitForm,n)),n._handler(n.$container.find(".fileinput-upload"),"click",e.proxy(n._uploadClick,n)),n._handler(e(window),"resize",function(){n._listenFullScreen(screen.width===window.innerWidth&&screen.height===window.innerHeight)}),i="webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange",n._handler(e(document),i,function(){n._listenFullScreen(t.checkFullScreen())}),n._autoFitContent(),n._initClickable(),n._refreshPreview()},_autoFitContent:function(){var t,i=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,n=this,a=i<400?n.previewSettingsSmall||n.defaults.previewSettingsSmall:n.previewSettings||n.defaults.previewSettings;e.each(a,function(e,i){t=".file-preview-frame .file-preview-"+e,n.$preview.find(t+".kv-preview-data,"+t+" .kv-preview-data").css(i)})},_scanDroppedItems:function(e,t,i){i=i||"";var n,a,o,r=this,s=function(e){r._log("Error scanning dropped files!"),r._log(e)};e.isFile?e.file(function(e){t.push(e)},s):e.isDirectory&&(a=e.createReader(),(o=function(){a.readEntries(function(a){if(a&&a.length>0){for(n=0;n<a.length;n++)r._scanDroppedItems(a[n],t,i+e.name+"/");o()}return null},s)})())},_initDragDrop:function(){var t=this,i=t.$dropZone;t.dropZoneEnabled&&t.showPreview&&(t._handler(i,"dragenter dragover",e.proxy(t._zoneDragEnter,t)),t._handler(i,"dragleave",e.proxy(t._zoneDragLeave,t)),t._handler(i,"drop",e.proxy(t._zoneDrop,t)),t._handler(e(document),"dragenter dragover drop",t._zoneDragDropInit))},_zoneDragDropInit:function(e){e.stopPropagation(),e.preventDefault()},_zoneDragEnter:function(i){var n=this,a=e.inArray("Files",i.originalEvent.dataTransfer.types)>-1;if(n._zoneDragDropInit(i),n.isDisabled||!a)return i.originalEvent.dataTransfer.effectAllowed="none",void(i.originalEvent.dataTransfer.dropEffect="none");t.addCss(n.$dropZone,"file-highlighted")},_zoneDragLeave:function(e){var t=this;t._zoneDragDropInit(e),t.isDisabled||t.$dropZone.removeClass("file-highlighted")},_zoneDrop:function(e){var i,n=this,a=n.$element,o=e.originalEvent.dataTransfer,r=o.files,s=o.items,l=t.getDragDropFolders(s),d=function(){n.isAjaxUpload?n._change(e,r):(n.changeTriggered=!0,a.get(0).files=r,setTimeout(function(){n.changeTriggered=!1,a.trigger("change"+n.namespace)},10)),n.$dropZone.removeClass("file-highlighted")};if(e.preventDefault(),!n.isDisabled&&!t.isEmpty(r))if(l>0){if(!n.isAjaxUpload)return void n._showFolderError(l);for(r=[],i=0;i<s.length;i++){var c=s[i].webkitGetAsEntry();c&&n._scanDroppedItems(c,r)}setTimeout(function(){d()},500)}else d()},_uploadClick:function(e){var i,n=this,a=n.$container.find(".fileinput-upload"),o=!a.hasClass("disabled")&&t.isEmpty(a.attr("disabled"));if(!e||!e.isDefaultPrevented()){if(!n.isAjaxUpload)return void(o&&"submit"!==a.attr("type")&&(i=a.closest("form"),i.length&&i.trigger("submit"),e.preventDefault()));e.preventDefault(),o&&n.upload()}},_submitForm:function(){var e=this;return e._isFileSelectionValid()&&!e._abort({})},_clearPreview:function(){var i=this,n=i.$preview;(i.showUploadedThumbs?i.getFrames(":not(.file-preview-success)"):i.getFrames()).each(function(){var i=e(this);i.remove(),t.cleanZoomCache(n.find("#zoom-"+i.attr("id")))}),i.getFrames().length&&i.showPreview||i._resetUpload(),i._validateDefaultPreview()},_initSortable:function(){var i,n=this,a=n.$preview,o="."+t.SORT_CSS,r=n.reversePreviewOrder;window.KvSortable&&0!==a.find(o).length&&(i={handle:".drag-handle-init",dataIdAttr:"data-preview-id",scroll:!1,draggable:o,onSort:function(i){var a=i.oldIndex,o=i.newIndex,s=0;n.initialPreview=t.moveArray(n.initialPreview,a,o,r),n.initialPreviewConfig=t.moveArray(n.initialPreviewConfig,a,o,r),n.previewCache.init(),n.getFrames(".file-preview-initial").each(function(){e(this).attr("data-fileindex","init_"+s),s++}),n._raise("filesorted",{previewId:e(i.item).attr("id"),oldIndex:a,newIndex:o,stack:n.initialPreviewConfig})}},a.data("kvsortable")&&a.kvsortable("destroy"),e.extend(!0,i,n.fileActionSettings.dragSettings),a.kvsortable(i))},_setPreviewContent:function(e){var t=this;t.$preview.html(e),t._autoFitContent()},_initPreview:function(e){var i,n=this,a=n.initialCaption||"";if(!n.previewCache.count())return n._clearPreview(),void(e?n._setCaption(a):n._initCaption());i=n.previewCache.out(),a=e&&n.initialCaption?n.initialCaption:i.caption,n._setPreviewContent(i.content),n._setInitThumbAttr(),n._setCaption(a),n._initSortable(),t.isEmpty(i.content)||n.$container.removeClass("file-input-new")},_getZoomButton:function(e){var t=this,i=t.previewZoomButtonIcons[e],n=t.previewZoomButtonClasses[e],a=' title="'+(t.previewZoomButtonTitles[e]||"")+'" ',o=a+("close"===e?' data-dismiss="modal" aria-hidden="true"':"");return"fullscreen"!==e&&"borderless"!==e&&"toggleheader"!==e||(o+=' data-toggle="button" aria-pressed="false" autocomplete="off"'),'<button type="button" class="'+n+" btn-"+e+'"'+o+">"+i+"</button>"},_getModalContent:function(){var e=this;return e._getLayoutTemplate("modal").setTokens({rtl:e.rtl?" kv-rtl":"",zoomFrameClass:e.frameClass,heading:e.msgZoomModalHeading,prev:e._getZoomButton("prev"),next:e._getZoomButton("next"),toggleheader:e._getZoomButton("toggleheader"),fullscreen:e._getZoomButton("fullscreen"),borderless:e._getZoomButton("borderless"),close:e._getZoomButton("close")})},_listenModalEvent:function(e){var i=this,n=i.$modal,a=function(e){return{sourceEvent:e,previewId:n.data("previewId"),modal:n}};n.on(e+".bs.modal",function(o){var r=n.find(".btn-fullscreen"),s=n.find(".btn-borderless");i._raise("filezoom"+e,a(o)),"shown"===e&&(s.removeClass("active").attr("aria-pressed","false"),r.removeClass("active").attr("aria-pressed","false"),n.hasClass("file-zoom-fullscreen")&&(i._maximizeZoomDialog(),t.checkFullScreen()?r.addClass("active").attr("aria-pressed","true"):s.addClass("active").attr("aria-pressed","true")))})},_initZoom:function(){var i,n=this,a=n._getLayoutTemplate("modalMain"),o="#"+t.MODAL_ID;n.showPreview&&(n.$modal=e(o),n.$modal&&n.$modal.length||(i=e(document.createElement("div")).html(a).insertAfter(n.$container),n.$modal=e(o).insertBefore(i),i.remove()),t.initModal(n.$modal),n.$modal.html(n._getModalContent()),e.each(t.MODAL_EVENTS,function(e,t){n._listenModalEvent(t)}))},_initZoomButtons:function(){var t,i,n=this,a=n.$modal.data("previewId")||"",o=n.getFrames().toArray(),r=o.length,s=n.$modal.find(".btn-prev"),l=n.$modal.find(".btn-next");if(o.length<2)return s.hide(),void l.hide();s.show(),l.show(),r&&(t=e(o[0]),i=e(o[r-1]),s.removeAttr("disabled"),l.removeAttr("disabled"),t.length&&t.attr("id")===a&&s.attr("disabled",!0),i.length&&i.attr("id")===a&&l.attr("disabled",!0))},_maximizeZoomDialog:function(){var t=this,i=t.$modal,n=i.find(".modal-header:visible"),a=i.find(".modal-footer:visible"),o=i.find(".modal-body"),r=e(window).height(),s=0;i.addClass("file-zoom-fullscreen"),n&&n.length&&(r-=n.outerHeight(!0)),a&&a.length&&(r-=a.outerHeight(!0)),o&&o.length&&(s=o.outerHeight(!0)-o.height(),r-=s),i.find(".kv-zoom-body").height(r)},_resizeZoomDialog:function(e){var i=this,n=i.$modal,a=n.find(".btn-fullscreen"),o=n.find(".btn-borderless");if(n.hasClass("file-zoom-fullscreen"))t.toggleFullScreen(!1),e?a.hasClass("active")||(n.removeClass("file-zoom-fullscreen"),i._resizeZoomDialog(!0),o.hasClass("active")&&o.removeClass("active").attr("aria-pressed","false")):a.hasClass("active")?a.removeClass("active").attr("aria-pressed","false"):(n.removeClass("file-zoom-fullscreen"),i.$modal.find(".kv-zoom-body").css("height",i.zoomModalHeight));else{if(!e)return void i._maximizeZoomDialog();t.toggleFullScreen(!0)}n.focus()},_setZoomContent:function(i,n){var a,o,r,s,l,d,c,p,h,u,f=this,m=i.attr("id"),g=f.$modal,v=g.find(".btn-prev"),b=g.find(".btn-next"),w=g.find(".btn-fullscreen"),y=g.find(".btn-borderless"),C=g.find(".btn-toggleheader"),x=f.$preview.find("#zoom-"+m);o=x.attr("data-template")||"generic",a=x.find(".kv-file-content"),r=a.length?a.html():"",h=i.data("caption")||"",u=i.data("size")||"",s=h+" "+u,g.find(".kv-zoom-title").attr("title",e("<div/>").html(s).text()).html(s),l=g.find(".kv-zoom-body"),g.removeClass("kv-single-content"),n?(p=l.addClass("file-thumb-loading").clone().insertAfter(l),l.html(r).hide(),p.fadeOut("fast",function(){l.fadeIn("fast",function(){l.removeClass("file-thumb-loading")}),p.remove()})):l.html(r),c=f.previewZoomSettings[o],c&&(d=l.find(".kv-preview-data"),t.addCss(d,"file-zoom-detail"),e.each(c,function(e,t){d.css(e,t),(d.attr("width")&&"width"===e||d.attr("height")&&"height"===e)&&d.removeAttr(e)})),g.data("previewId",m),f._handler(v,"click",function(){f._zoomSlideShow("prev",m)}),f._handler(b,"click",function(){f._zoomSlideShow("next",m)}),f._handler(w,"click",function(){f._resizeZoomDialog(!0)}),f._handler(y,"click",function(){f._resizeZoomDialog(!1)}),f._handler(C,"click",function(){var e,t=g.find(".modal-header"),i=g.find(".modal-body .floating-buttons"),n=t.find(".kv-zoom-actions"),a=function(e){var i=f.$modal.find(".kv-zoom-body"),n=f.zoomModalHeight;g.hasClass("file-zoom-fullscreen")&&(n=i.outerHeight(!0),e||(n-=t.outerHeight(!0))),i.css("height",e?n+e:n)};t.is(":visible")?(e=t.outerHeight(!0),t.slideUp("slow",function(){n.find(".btn").appendTo(i),a(e)})):(i.find(".btn").appendTo(n),t.slideDown("slow",function(){a()})),g.focus()}),f._handler(g,"keydown",function(e){var t=e.which||e.keyCode;37!==t||v.attr("disabled")||f._zoomSlideShow("prev",m),39!==t||b.attr("disabled")||f._zoomSlideShow("next",m)})},_zoomPreview:function(e){var i,n=this,a=n.$modal;if(!e.length)throw"Cannot zoom to detailed preview!";t.initModal(a),a.html(n._getModalContent()),i=e.closest(t.FRAMES),n._setZoomContent(i),a.modal("show"),n._initZoomButtons()},_zoomSlideShow:function(t,i){var n,a,o,r=this,s=r.$modal.find(".kv-zoom-actions .btn-"+t),l=r.getFrames().toArray(),d=l.length;if(!s.attr("disabled")){for(a=0;a<d;a++)if(e(l[a]).attr("id")===i){o="prev"===t?a-1:a+1;break}o<0||o>=d||!l[o]||(n=e(l[o]),n.length&&r._setZoomContent(n,!0),r._initZoomButtons(),r._raise("filezoom"+t,{previewId:i,modal:r.$modal}))}},_initZoomButton:function(){var t=this;t.$preview.find(".kv-file-zoom").each(function(){var i=e(this);t._handler(i,"click",function(){t._zoomPreview(i)})})},_inputFileCount:function(){return this.$element.get(0).files.length},_refreshPreview:function(){var e,t=this;t._inputFileCount()&&t.showPreview&&t.isPreviewable&&(t.isAjaxUpload?(e=t.getFileStack(),t.filestack=[],e.length?t._clearFileInput():e=t.$element.get(0).files):e=t.$element.get(0).files,e&&e.length&&(t.readFiles(e),t._setFileDropZoneTitle()))},_clearObjects:function(t){t.find("video audio").each(function(){this.pause(),e(this).remove()}),t.find("img object div").each(function(){e(this).remove()})},_clearFileInput:function(){var t,i,n,a=this,o=a.$element;a._inputFileCount()&&(t=o.closest("form"),i=e(document.createElement("form")),n=e(document.createElement("div")),o.before(n),t.length?t.after(i):n.after(i),i.append(o).trigger("reset"),n.before(o).remove(),i.remove())},_resetUpload:function(){var e=this;e.uploadCache={content:[],config:[],tags:[],append:!0},e.uploadCount=0,e.uploadStatus={},e.uploadLog=[],e.uploadAsyncCount=0,e.loadedImages=[],e.totalImagesCount=0,e.$btnUpload.removeAttr("disabled"),e._setProgress(0),e.$progress.hide(),e._resetErrors(!1),e.ajaxAborted=!1,e.ajaxRequests=[],e._resetCanvas(),e.cacheInitialPreview={},e.overwriteInitial&&(e.initialPreview=[],e.initialPreviewConfig=[],e.initialPreviewThumbTags=[],e.previewCache.data={content:[],config:[],tags:[]})},_resetCanvas:function(){var e=this;e.canvas&&e.imageCanvasContext&&e.imageCanvasContext.clearRect(0,0,e.canvas.width,e.canvas.height)},_hasInitialPreview:function(){var e=this;return!e.overwriteInitial&&e.previewCache.count()},_resetPreview:function(){var e,t,i=this;i.previewCache.count()?(e=i.previewCache.out(),i._setPreviewContent(e.content),i._setInitThumbAttr(),t=i.initialCaption?i.initialCaption:e.caption,i._setCaption(t)):(i._clearPreview(),i._initCaption()),i.showPreview&&(i._initZoom(),i._initSortable())},_clearDefaultPreview:function(){this.$preview.find(".file-default-preview").remove()},_validateDefaultPreview:function(){var e=this;e.showPreview&&!t.isEmpty(e.defaultPreviewContent)&&(e._setPreviewContent('<div class="file-default-preview">'+e.defaultPreviewContent+"</div>"),e.$container.removeClass("file-input-new"),e._initClickable())},_resetPreviewThumbs:function(e){var t,i=this;if(e)return i._clearPreview(),void i.clearStack();i._hasInitialPreview()?(t=i.previewCache.out(),
i._setPreviewContent(t.content),i._setInitThumbAttr(),i._setCaption(t.caption),i._initPreviewActions()):i._clearPreview()},_getLayoutTemplate:function(e){var i=this,n=i.layoutTemplates[e];return t.isEmpty(i.customLayoutTags)?n:t.replaceTags(n,i.customLayoutTags)},_getPreviewTemplate:function(e){var i=this,n=i.previewTemplates[e];return t.isEmpty(i.customPreviewTags)?n:t.replaceTags(n,i.customPreviewTags)},_getOutData:function(e,t,i){var n=this;return e=e||{},t=t||{},i=i||n.filestack.slice(0)||{},{form:n.formdata,files:i,filenames:n.filenames,filescount:n.getFilesCount(),extra:n._getExtraData(),response:t,reader:n.reader,jqXHR:e}},_getMsgSelected:function(e){var t=this,i=1===e?t.fileSingle:t.filePlural;return e>0?t.msgSelected.replace("{n}",e).replace("{files}",i):t.msgNoFilesSelected},_getFrame:function(t){var i=this,n=e("#"+t);return n.length?n:(i._log('Invalid thumb frame with id: "'+t+'".'),null)},_getThumbs:function(e){return e=e||"",this.getFrames(":not(.file-preview-initial)"+e)},_getExtraData:function(e,t){var i=this,n=i.uploadExtraData;return"function"==typeof i.uploadExtraData&&(n=i.uploadExtraData(e,t)),n},_initXhr:function(e,t,i){var n=this;return e.upload&&e.upload.addEventListener("progress",function(e){var a=0,o=e.total,r=e.loaded||e.position;e.lengthComputable&&(a=Math.floor(r/o*100)),t?n._setAsyncUploadStatus(t,a,i):n._setProgress(a)},!1),e},_initAjaxSettings:function(){var t=this;t._ajaxSettings=e.extend(!0,{},t.ajaxSettings),t._ajaxDeleteSettings=e.extend(!0,{},t.ajaxDeleteSettings)},_mergeAjaxCallback:function(e,t,i){var n,a=this,o=a._ajaxSettings,r=a.mergeAjaxCallbacks;"delete"===i&&(o=a._ajaxDeleteSettings,r=a.mergeAjaxDeleteCallbacks),n=o[e],o[e]=r&&"function"==typeof n?"before"===r?function(){n.apply(this,arguments),t.apply(this,arguments)}:function(){t.apply(this,arguments),n.apply(this,arguments)}:t},_ajaxSubmit:function(t,i,n,a,o,r){var s,l=this;l._raise("filepreajax",[o,r])&&(l._uploadExtra(o,r),l._initAjaxSettings(),l._mergeAjaxCallback("beforeSend",t),l._mergeAjaxCallback("success",i),l._mergeAjaxCallback("complete",n),l._mergeAjaxCallback("error",a),s=e.extend(!0,{},{xhr:function(){var t=e.ajaxSettings.xhr();return l._initXhr(t,o,l.getFileStack().length)},url:r&&l.uploadUrlThumb?l.uploadUrlThumb:l.uploadUrl,type:"POST",dataType:"json",data:l.formdata,cache:!1,processData:!1,contentType:!1},l._ajaxSettings),l.ajaxRequests.push(e.ajax(s)))},_mergeArray:function(e,i){var n=this,a=t.cleanArray(n[e]),o=t.cleanArray(i);n[e]=a.concat(o)},_initUploadSuccess:function(i,n,a){var o,r,s,l,d,c,p,h,u,f=this;f.showPreview&&"object"==typeof i&&!e.isEmptyObject(i)&&void 0!==i.initialPreview&&i.initialPreview.length>0&&(f.hasInitData=!0,c=i.initialPreview||[],p=i.initialPreviewConfig||[],h=i.initialPreviewThumbTags||[],o=void 0===i.append||i.append,c.length>0&&!t.isArray(c)&&(c=c.split(f.initialPreviewDelimiter)),f._mergeArray("initialPreview",c),f._mergeArray("initialPreviewConfig",p),f._mergeArray("initialPreviewThumbTags",h),void 0!==n?a?(u=n.attr("data-fileindex"),f.uploadCache.content[u]=c[0],f.uploadCache.config[u]=p[0]||[],f.uploadCache.tags[u]=h[0]||[],f.uploadCache.append=o):(s=f.previewCache.add(c,p[0],h[0],o),r=f.previewCache.get(s,!1),l=e(document.createElement("div")).html(r).hide().insertAfter(n),d=l.find(".kv-zoom-cache"),d&&d.length&&d.insertAfter(n),n.fadeOut("slow",function(){var e=l.find(".file-preview-frame");e&&e.length&&e.insertBefore(n).fadeIn("slow").css("display:inline-block"),f._initPreviewActions(),f._clearFileInput(),t.cleanZoomCache(f.$preview.find("#zoom-"+n.attr("id"))),n.remove(),l.remove(),f._initSortable()})):(f.previewCache.set(c,p,h,o),f._initPreview(),f._initPreviewActions()))},_initSuccessThumbs:function(){var i=this;i.showPreview&&i._getThumbs(t.FRAMES+".file-preview-success").each(function(){var n=e(this),a=i.$preview,o=n.find(".kv-file-remove");o.removeAttr("disabled"),i._handler(o,"click",function(){var e=n.attr("id"),o=i._raise("filesuccessremove",[e,n.attr("data-fileindex")]);t.cleanMemory(n),!1!==o&&n.fadeOut("slow",function(){t.cleanZoomCache(a.find("#zoom-"+e)),n.remove(),i.getFrames().length||i.reset()})})})},_checkAsyncComplete:function(){var t,i,n=this;for(i=0;i<n.filestack.length;i++)if(n.filestack[i]&&(t=n.previewInitId+"-"+i,-1===e.inArray(t,n.uploadLog)))return!1;return n.uploadAsyncCount===n.uploadLog.length},_uploadExtra:function(t,i){var n=this,a=n._getExtraData(t,i);0!==a.length&&e.each(a,function(e,t){n.formdata.append(e,t)})},_uploadSingle:function(i,n){var a,o,r,s,l,d,c,p,h,u,f,m=this,g=m.getFileStack().length,v=new FormData,b=m.previewInitId+"-"+i,w=m.filestack.length>0||!e.isEmptyObject(m.uploadExtraData),y=e("#"+b).find(".file-thumb-progress"),C={id:b,index:i};m.formdata=v,m.showPreview&&(o=e("#"+b+":not(.file-preview-initial)"),s=o.find(".kv-file-upload"),l=o.find(".kv-file-remove"),y.show()),0===g||!w||s&&s.hasClass("disabled")||m._abort(C)||(f=function(e,t){d||m.updateStack(e,void 0),m.uploadLog.push(t),m._checkAsyncComplete()&&(m.fileBatchCompleted=!0)},r=function(){var e,i,n,a=m.uploadCache,o=0,r=m.cacheInitialPreview;m.fileBatchCompleted&&(r&&r.content&&(o=r.content.length),setTimeout(function(){var s=0===m.getFileStack(!0).length;if(m.showPreview){if(m.previewCache.set(a.content,a.config,a.tags,a.append),o){for(i=0;i<a.content.length;i++)n=i+o,r.content[n]=a.content[i],r.config.length&&(r.config[n]=a.config[i]),r.tags.length&&(r.tags[n]=a.tags[i]);m.initialPreview=t.cleanArray(r.content),m.initialPreviewConfig=t.cleanArray(r.config),m.initialPreviewThumbTags=t.cleanArray(r.tags)}else m.initialPreview=a.content,m.initialPreviewConfig=a.config,m.initialPreviewThumbTags=a.tags;m.cacheInitialPreview={},m.hasInitData&&(m._initPreview(),m._initPreviewActions())}m.unlock(s),s&&m._clearFileInput(),e=m.$preview.find(".file-preview-initial"),m.uploadAsync&&e.length&&(t.addCss(e,t.SORT_CSS),m._initSortable()),m._raise("filebatchuploadcomplete",[m.filestack,m._getExtraData()]),m.uploadCount=0,m.uploadStatus={},m.uploadLog=[],m._setProgress(101),m.ajaxAborted=!1},100))},c=function(r){a=m._getOutData(r),m.fileBatchCompleted=!1,n||(m.ajaxAborted=!1),m.showPreview&&(o.hasClass("file-preview-success")||(m._setThumbStatus(o,"Loading"),t.addCss(o,"file-uploading")),s.attr("disabled",!0),l.attr("disabled",!0)),n||m.lock(),m._raise("filepreupload",[a,b,i]),e.extend(!0,C,a),m._abort(C)&&(r.abort(),n||(m._setThumbStatus(o,"New"),o.removeClass("file-uploading"),s.removeAttr("disabled"),l.removeAttr("disabled"),m.unlock()),m._setProgressCancelled())},p=function(r,l,c){var p=m.showPreview&&o.attr("id")?o.attr("id"):b;a=m._getOutData(c,r),e.extend(!0,C,a),setTimeout(function(){t.isEmpty(r)||t.isEmpty(r.error)?(m.showPreview&&(m._setThumbStatus(o,"Success"),s.hide(),m._initUploadSuccess(r,o,n),m._setProgress(101,y)),m._raise("fileuploaded",[a,p,i]),n?f(i,p):m.updateStack(i,void 0)):(d=!0,m._showUploadError(r.error,C),m._setPreviewError(o,i,m.filestack[i],m.retryErrorUploads),m.retryErrorUploads||s.hide(),n&&f(i,p),m._setProgress(101,e("#"+p).find(".file-thumb-progress"),m.msgUploadError))},100)},h=function(){setTimeout(function(){m.showPreview&&(s.removeAttr("disabled"),l.removeAttr("disabled"),o.removeClass("file-uploading")),n?r():(m.unlock(!1),m._clearFileInput()),m._initSuccessThumbs()},100)},u=function(t,a,r){var l=m.ajaxOperations.uploadThumb,c=m._parseError(l,t,r,n&&m.filestack[i].name?m.filestack[i].name:null);d=!0,setTimeout(function(){n&&f(i,b),m.uploadStatus[b]=100,m._setPreviewError(o,i,m.filestack[i],m.retryErrorUploads),m.retryErrorUploads||s.hide(),e.extend(!0,C,m._getOutData(t)),m._setProgress(101,y,m.msgAjaxProgressError.replace("{operation}",l)),m._setProgress(101,e("#"+b).find(".file-thumb-progress"),m.msgUploadError),m._showUploadError(c,C)},100)},v.append(m.uploadFileAttr,m.filestack[i],m.filenames[i]),v.append("file_id",i),m._ajaxSubmit(c,p,h,u,b,i))},_uploadBatch:function(){var i,n,a,o,r,s=this,l=s.filestack,d=l.length,c={},p=s.filestack.length>0||!e.isEmptyObject(s.uploadExtraData);s.formdata=new FormData,0!==d&&p&&!s._abort(c)&&(r=function(){e.each(l,function(e){s.updateStack(e,void 0)}),s._clearFileInput()},i=function(i){s.lock();var n=s._getOutData(i);s.ajaxAborted=!1,s.showPreview&&s._getThumbs().each(function(){var i=e(this),n=i.find(".kv-file-upload"),a=i.find(".kv-file-remove");i.hasClass("file-preview-success")||(s._setThumbStatus(i,"Loading"),t.addCss(i,"file-uploading")),n.attr("disabled",!0),a.attr("disabled",!0)}),s._raise("filebatchpreupload",[n]),s._abort(n)&&(i.abort(),s._getThumbs().each(function(){var t=e(this),i=t.find(".kv-file-upload"),n=t.find(".kv-file-remove");t.hasClass("file-preview-loading")&&(s._setThumbStatus(t,"New"),t.removeClass("file-uploading")),i.removeAttr("disabled"),n.removeAttr("disabled")}),s._setProgressCancelled())},n=function(i,n,a){var o=s._getOutData(a,i),l=0,d=s._getThumbs(":not(.file-preview-success)"),c=t.isEmpty(i)||t.isEmpty(i.errorkeys)?[]:i.errorkeys;t.isEmpty(i)||t.isEmpty(i.error)?(s._raise("filebatchuploadsuccess",[o]),r(),s.showPreview?(d.each(function(){var t=e(this);s._setThumbStatus(t,"Success"),t.removeClass("file-uploading"),t.find(".kv-file-upload").hide().removeAttr("disabled")}),s._initUploadSuccess(i)):s.reset(),s._setProgress(101)):(s.showPreview&&(d.each(function(){var t=e(this),i=t.attr("data-fileindex");t.removeClass("file-uploading"),t.find(".kv-file-upload").removeAttr("disabled"),t.find(".kv-file-remove").removeAttr("disabled"),0===c.length||-1!==e.inArray(l,c)?(s._setPreviewError(t,i,s.filestack[i],s.retryErrorUploads),s.retryErrorUploads||(t.find(".kv-file-upload").hide(),s.updateStack(i,void 0))):(t.find(".kv-file-upload").hide(),s._setThumbStatus(t,"Success"),s.updateStack(i,void 0)),t.hasClass("file-preview-error")&&!s.retryErrorUploads||l++}),s._initUploadSuccess(i)),s._showUploadError(i.error,o,"filebatchuploaderror"),s._setProgress(101,s.$progress,s.msgUploadError))},o=function(){s.unlock(),s._initSuccessThumbs(),s._clearFileInput(),s._raise("filebatchuploadcomplete",[s.filestack,s._getExtraData()])},a=function(t,i,n){var a=s._getOutData(t),o=s.ajaxOperations.uploadBatch,r=s._parseError(o,t,n);s._showUploadError(r,a,"filebatchuploaderror"),s.uploadFileCount=d-1,s.showPreview&&(s._getThumbs().each(function(){var t=e(this),i=t.attr("data-fileindex");t.removeClass("file-uploading"),void 0!==s.filestack[i]&&s._setPreviewError(t)}),s._getThumbs().removeClass("file-uploading"),s._getThumbs(" .kv-file-upload").removeAttr("disabled"),s._getThumbs(" .kv-file-delete").removeAttr("disabled"),s._setProgress(101,s.$progress,s.msgAjaxProgressError.replace("{operation}",o)))},e.each(l,function(e,i){t.isEmpty(l[e])||s.formdata.append(s.uploadFileAttr,i,s.filenames[e])}),s._ajaxSubmit(i,n,o,a))},_uploadExtraOnly:function(){var e,i,n,a,o=this,r={};o.formdata=new FormData,o._abort(r)||(e=function(e){o.lock();var t=o._getOutData(e);o._raise("filebatchpreupload",[t]),o._setProgress(50),r.data=t,r.xhr=e,o._abort(r)&&(e.abort(),o._setProgressCancelled())},i=function(e,i,n){var a=o._getOutData(n,e);t.isEmpty(e)||t.isEmpty(e.error)?(o._raise("filebatchuploadsuccess",[a]),o._clearFileInput(),o._initUploadSuccess(e),o._setProgress(101)):o._showUploadError(e.error,a,"filebatchuploaderror")},n=function(){o.unlock(),o._clearFileInput(),o._raise("filebatchuploadcomplete",[o.filestack,o._getExtraData()])},a=function(e,t,i){var n=o._getOutData(e),a=o.ajaxOperations.uploadExtra,s=o._parseError(a,e,i);r.data=n,o._showUploadError(s,n,"filebatchuploaderror"),o._setProgress(101,o.$progress,o.msgAjaxProgressError.replace("{operation}",a))},o._ajaxSubmit(e,i,n,a))},_deleteFileIndex:function(i){var n=this,a=i.attr("data-fileindex"),o=n.reversePreviewOrder;"init_"===a.substring(0,5)&&(a=parseInt(a.replace("init_","")),n.initialPreview=t.spliceArray(n.initialPreview,a,o),n.initialPreviewConfig=t.spliceArray(n.initialPreviewConfig,a,o),n.initialPreviewThumbTags=t.spliceArray(n.initialPreviewThumbTags,a,o),n.getFrames().each(function(){var t=e(this),i=t.attr("data-fileindex");"init_"===i.substring(0,5)&&(i=parseInt(i.replace("init_","")))>a&&(i--,t.attr("data-fileindex","init_"+i))}),n.uploadAsync&&(n.cacheInitialPreview=n.getPreview()))},_initFileActions:function(){var i=this,n=i.$preview;i.showPreview&&(i._initZoomButton(),i.getFrames(" .kv-file-remove").each(function(){var a,o,r,s,l=e(this),d=l.closest(t.FRAMES),c=d.attr("id"),p=d.attr("data-fileindex");i._handler(l,"click",function(){if(!1===(s=i._raise("filepreremove",[c,p]))||!i._validateMinCount())return!1;a=d.hasClass("file-preview-error"),t.cleanMemory(d),d.fadeOut("slow",function(){t.cleanZoomCache(n.find("#zoom-"+c)),i.updateStack(p,void 0),i._clearObjects(d),d.remove(),c&&a&&i.$errorContainer.find('li[data-file-id="'+c+'"]').fadeOut("fast",function(){e(this).remove(),i._errorsExist()||i._resetErrors()}),i._clearFileInput();var s=i.getFileStack(!0),l=i.previewCache.count(),h=s.length,u=i.showPreview&&i.getFrames().length;0!==h||0!==l||u?(o=l+h,r=o>1?i._getMsgSelected(o):s[0]?i._getFileNames()[0]:"",i._setCaption(r)):i.reset(),i._raise("fileremoved",[c,p])})})}),i.getFrames(" .kv-file-upload").each(function(){var n=e(this);i._handler(n,"click",function(){var e=n.closest(t.FRAMES),a=e.attr("data-fileindex");i.$progress.hide(),e.hasClass("file-preview-error")&&!i.retryErrorUploads||i._uploadSingle(a,!1)})}))},_initPreviewActions:function(){var i=this,n=i.$preview,a=i.deleteExtraData||{},o=t.FRAMES+" .kv-file-remove",r=i.fileActionSettings,s=r.removeClass,l=r.removeErrorClass,d=function(){var e=i.isAjaxUpload?i.previewCache.count():i._inputFileCount();n.find(t.FRAMES).length||e||(i._setCaption(""),i.reset(),i.initialCaption="")};i._initZoomButton(),n.find(o).each(function(){var o,r,c,p=e(this),h=p.data("url")||i.deleteUrl,u=p.data("key");if(!t.isEmpty(h)&&void 0!==u){var f,m,g,v,b=p.closest(t.FRAMES),w=i.previewCache.data,y=b.attr("data-fileindex");y=parseInt(y.replace("init_","")),g=t.isEmpty(w.config)&&t.isEmpty(w.config[y])?null:w.config[y],v=t.isEmpty(g)||t.isEmpty(g.extra)?a:g.extra,"function"==typeof v&&(v=v()),m={id:p.attr("id"),key:u,extra:v},o=function(e){i.ajaxAborted=!1,i._raise("filepredelete",[u,e,v]),i._abort()?e.abort():(p.removeClass(l),t.addCss(b,"file-uploading"),t.addCss(p,"disabled "+s))},r=function(e,a,o){var r,c;if(!t.isEmpty(e)&&!t.isEmpty(e.error))return m.jqXHR=o,m.response=e,i._showError(e.error,m,"filedeleteerror"),b.removeClass("file-uploading"),p.removeClass("disabled "+s).addClass(l),void d();b.removeClass("file-uploading").addClass("file-deleted"),b.fadeOut("slow",function(){y=parseInt(b.attr("data-fileindex").replace("init_","")),i.previewCache.unset(y),i._deleteFileIndex(b),r=i.previewCache.count(),c=r>0?i._getMsgSelected(r):"",i._setCaption(c),i._raise("filedeleted",[u,o,v]),t.cleanZoomCache(n.find("#zoom-"+b.attr("id"))),i._clearObjects(b),b.remove(),d()})},c=function(e,t,n){var a=i.ajaxOperations.deleteThumb,o=i._parseError(a,e,n);m.jqXHR=e,m.response={},i._showError(o,m,"filedeleteerror"),b.removeClass("file-uploading"),p.removeClass("disabled "+s).addClass(l),d()},i._initAjaxSettings(),i._mergeAjaxCallback("beforeSend",o,"delete"),i._mergeAjaxCallback("success",r,"delete"),i._mergeAjaxCallback("error",c,"delete"),f=e.extend(!0,{},{url:h,type:"POST",dataType:"json",data:e.extend(!0,{},{key:u},v)},i._ajaxDeleteSettings),i._handler(p,"click",function(){if(!i._validateMinCount())return!1;i.ajaxAborted=!1,i._raise("filebeforedelete",[u,v]),i.ajaxAborted instanceof Promise?i.ajaxAborted.then(function(t){t||e.ajax(f)}):i.ajaxAborted||e.ajax(f)})}})},_hideFileIcon:function(){var e=this;e.overwriteInitial&&e.$captionContainer.removeClass("icon-visible")},_showFileIcon:function(){var e=this;t.addCss(e.$captionContainer,"icon-visible")},_getSize:function(t){var i,n,a,o=this,r=parseFloat(t),s=o.fileSizeGetter;return e.isNumeric(t)&&e.isNumeric(r)?("function"==typeof s?a=s(r):0===r?a="0.00 B":(i=Math.floor(Math.log(r)/Math.log(1024)),n=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],a=1*(r/Math.pow(1024,i)).toFixed(2)+" "+n[i]),o._getLayoutTemplate("size").replace("{sizeText}",a)):""},_generatePreviewTemplate:function(i,n,a,o,r,s,l,d,c,p,h){var u,f=this,m=f.slug(a),g="",v="",b=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,w=b<400?f.previewSettingsSmall[i]||f.defaults.previewSettingsSmall[i]:f.previewSettings[i]||f.defaults.previewSettings[i],y=c||f._renderFileFooter(m,l,"auto",s),C=f._getPreviewIcon(a),x="type-default",S=C&&f.preferIconicPreview,k=C&&f.preferIconicZoomPreview;return w&&e.each(w,function(e,t){v+=e+":"+t+";"}),u=function(n,s,l,c){var u=l?"zoom-"+r:r,g=f._getPreviewTemplate(n),b=(d||"")+" "+c;return f.frameClass&&(b=f.frameClass+" "+b),l&&(b=b.replace(" "+t.SORT_CSS,"")),g=f._parseFilePreviewIcon(g,a),"text"===n&&(s=t.htmlEncode(s)),"object"!==i||o||e.each(f.defaults.fileTypeSettings,function(e,t){"object"!==e&&"other"!==e&&t(a,o)&&(x="type-"+e)}),g.setTokens({previewId:u,caption:m,frameClass:b,type:o,fileindex:p,typeCss:x,footer:y,data:s,template:h||i,style:v?'style="'+v+'"':""})},p=p||r.slice(r.lastIndexOf("-")+1),f.fileActionSettings.showZoom&&(g=u(k?"other":i,n,!0,"kv-zoom-thumb")),g="\n"+f._getLayoutTemplate("zoomCache").replace("{zoomContent}",g),u(S?"other":i,n,!1,"kv-preview-thumb")+g},_addToPreview:function(e,t){return this.reversePreviewOrder?e.prepend(t):e.append(t)},_previewDefault:function(i,n,a){var o=this,r=o.$preview;if(o.showPreview){var s,l=i?i.name:"",d=i?i.type:"",c=i.size||0,p=o.slug(l),h=!0===a&&!o.isAjaxUpload,u=t.objUrl.createObjectURL(i);o._clearDefaultPreview(),s=o._generatePreviewTemplate("other",u,l,d,n,h,c),o._addToPreview(r,s),o._setThumbAttr(n,p,c),!0===a&&o.isAjaxUpload&&o._setThumbStatus(e("#"+n),"Error")}},_previewFile:function(e,t,i,n,a,o){if(this.showPreview){var r,s=this,l=t?t.name:"",d=o.type,c=o.name,p=s._parseFileType(d,l),h=s.allowedPreviewTypes,u=s.allowedPreviewMimeTypes,f=s.$preview,m=t.size||0,g=h&&h.indexOf(p)>=0,v=u&&-1!==u.indexOf(d),b="text"===p||"html"===p||"image"===p?i.target.result:a;if("html"===p&&s.purifyHtml&&window.DOMPurify&&(b=window.DOMPurify.sanitize(b)),g||v){r=s._generatePreviewTemplate(p,b,l,d,n,!1,m),s._clearDefaultPreview(),s._addToPreview(f,r);var w=f.find("#"+n+" img");s._validateImageOrientation(w,t,n,c,d,m,b)}else s._previewDefault(t,n);s._setThumbAttr(n,c,m),s._initSortable()}},_setThumbAttr:function(t,i,n){var a=this,o=e("#"+t);o.length&&(n=n&&n>0?a._getSize(n):"",o.data({caption:i,size:n}))},_setInitThumbAttr:function(){var e,i,n,a,o=this,r=o.previewCache.data,s=o.previewCache.count();if(0!==s)for(var l=0;l<s;l++)e=r.config[l],a=o.previewInitId+"-init_"+l,i=t.ifSet("caption",e,t.ifSet("filename",e)),n=t.ifSet("size",e),o._setThumbAttr(a,i,n)},_slugDefault:function(e){return t.isEmpty(e)?"":String(e).replace(/[\[\]\/\{}:;#%=\(\)\*\+\?\\\^\$\|<>&"']/g,"_")},_updateFileDetails:function(e){var i=this,n=i.$element,a=i.getFileStack(),o=t.isIE(9)&&t.findFileName(n.val())||n[0].files[0]&&n[0].files[0].name||a.length&&a[0].name||"",r=i.slug(o),s=i.isAjaxUpload?a.length:e,l=i.previewCache.count()+s,d=1===s?r:i._getMsgSelected(l);i.isError?(i.$previewContainer.removeClass("file-thumb-loading"),i.$previewStatus.html(""),i.$captionContainer.removeClass("icon-visible")):i._showFileIcon(),i._setCaption(d,i.isError),i.$container.removeClass("file-input-new file-input-ajax-new"),1===arguments.length&&i._raise("fileselect",[e,r]),i.previewCache.count()&&i._initPreviewActions()},_setThumbStatus:function(e,t){var i=this;if(i.showPreview){var n="indicator"+t,a=n+"Title",o="file-preview-"+t.toLowerCase(),r=e.find(".file-upload-indicator"),s=i.fileActionSettings;e.removeClass("file-preview-success file-preview-error file-preview-loading"),"Success"===t&&e.find(".file-drag-handle").remove(),r.html(s[n]),r.attr("title",s[a]),e.addClass(o),"Error"!==t||i.retryErrorUploads||e.find(".kv-file-upload").attr("disabled",!0)}},_setProgressCancelled:function(){var e=this;e._setProgress(101,e.$progress,e.msgCancelled)},_setProgress:function(e,i,n){var a,o=this,r=Math.min(e,100),s=o.progressUploadThreshold,l=e<=100?o.progressTemplate:o.progressCompleteTemplate,d=r<100?o.progressTemplate:n?o.progressErrorTemplate:l;i=i||o.$progress,t.isEmpty(d)||(a=s&&r>s&&e<=100?d.setTokens({percent:s,status:o.msgUploadThreshold}):d.setTokens({percent:r,status:e>100?o.msgUploadEnd:r+"%"}),i.html(a),n&&i.find('[role="progressbar"]').html(n))},_setFileDropZoneTitle:function(){var e,i=this,n=i.$container.find(".file-drop-zone"),a=i.dropZoneTitle;i.isClickable&&(e=t.isEmpty(i.$element.attr("multiple"))?i.fileSingle:i.filePlural,a+=i.dropZoneClickTitle.replace("{files}",e)),n.find("."+i.dropZoneTitleClass).remove(),!i.showPreview||0===n.length||i.getFileStack().length>0||!i.dropZoneEnabled||!i.isAjaxUpload&&i.$element.files||(0===n.find(t.FRAMES).length&&t.isEmpty(i.defaultPreviewContent)&&n.prepend('<div class="'+i.dropZoneTitleClass+'">'+a+"</div>"),i.$container.removeClass("file-input-new"),t.addCss(i.$container,"file-input-ajax-new"))},_setAsyncUploadStatus:function(t,i,n){var a=this,o=0;a._setProgress(i,e("#"+t).find(".file-thumb-progress")),a.uploadStatus[t]=i,e.each(a.uploadStatus,function(e,t){o+=t}),a._setProgress(Math.floor(o/n))},_validateMinCount:function(){var e=this,t=e.isAjaxUpload?e.getFileStack().length:e._inputFileCount();return!(e.validateInitialCount&&e.minFileCount>0&&e._getFileCount(t-1)<e.minFileCount)||(e._noFilesError({}),!1)},_getFileCount:function(e){var t=this,i=0;return t.validateInitialCount&&!t.overwriteInitial&&(i=t.previewCache.count(),e+=i),e},_getFileId:function(e){var t,i=this,n=i.generateFileId;return"function"==typeof n?n(e,event):e?(t=String(e.webkitRelativePath||e.fileName||e.name||null),t?e.size+"-"+t.replace(/[^0-9a-zA-Z_-]/gim,""):null):null},_getFileName:function(e){return e&&e.name?this.slug(e.name):void 0},_getFileIds:function(e){return this.fileids.filter(function(t){return e?void 0!==t:void 0!==t&&null!==t})},_getFileNames:function(e){return this.filenames.filter(function(t){return e?void 0!==t:void 0!==t&&null!==t})},_setPreviewError:function(e,t,i,n){var a=this;if(void 0!==t&&a.updateStack(t,i),a.showPreview){if(a.removeFromPreviewOnError&&!n)return void e.remove();a._setThumbStatus(e,"Error"),a._refreshUploadButton(e,n)}},_refreshUploadButton:function(e,t){var i=this,n=e.find(".kv-file-upload"),a=i.fileActionSettings,o=a.uploadIcon,r=a.uploadTitle;n.length&&(t&&(o=a.uploadRetryIcon,r=a.uploadRetryTitle),n.attr("title",r).html(o))},_checkDimensions:function(e,i,n,a,o,r,s){var l,d,c,p=this,h="Small"===i?"min":"max",u=p[h+"Image"+r];!t.isEmpty(u)&&n.length&&(c=n[0],d="Width"===r?c.naturalWidth||c.width:c.naturalHeight||c.height,("Small"===i?d>=u:d<=u)||(l=p["msgImage"+r+i].setTokens({name:o,size:u}),p._showUploadError(l,s),p._setPreviewError(a,e,null)))},_getExifObj:function(e){var t=this,i=null;try{i=window.piexif?window.piexif.load(e):null}catch(e){i=null}return i||t._log("Error loading the piexif.js library."),i},_validateImageOrientation:function(e,i,n,a,o,r,s){var l,d,c=this;if(l=e.length&&c.autoOrientImage?c._getExifObj(s):null,!(d=l?l["0th"][piexif.ImageIFD.Orientation]:null))return void c._validateImage(n,a,o,r,s,l);t.setImageOrientation(e,c.$preview.find("#zoom-"+n+" img"),d),c._raise("fileimageoriented",{$img:e,file:i}),c._validateImage(n,a,o,r,s,l)},_validateImage:function(t,i,n,a,o,r){var s,l,d,c=this,p=c.$preview,h=p.find("#"+t),u=h.attr("data-fileindex"),f=h.find("img");i=i||"Untitled",f.one("load",function(){l=h.width(),d=p.width(),l>d&&f.css("width","100%"),s={ind:u,id:t},c._checkDimensions(u,"Small",f,h,i,"Width",s),c._checkDimensions(u,"Small",f,h,i,"Height",s),c.resizeImage||(c._checkDimensions(u,"Large",f,h,i,"Width",s),c._checkDimensions(u,"Large",f,h,i,"Height",s)),c._raise("fileimageloaded",[t]),c.loadedImages.push({ind:u,img:f,thumb:h,pid:t,typ:n,siz:a,validated:!1,imgData:o,exifObj:r}),h.data("exif",r),c._validateAllImages()}).one("error",function(){c._raise("fileimageloaderror",[t])}).each(function(){this.complete?e(this).trigger("load"):this.error&&e(this).trigger("error")})},_validateAllImages:function(){var e,t,i,n=this,a={val:0},o=n.loadedImages.length,r=n.resizeIfSizeMoreThan;if(o===n.totalImagesCount&&(n._raise("fileimagesloaded"),n.resizeImage))for(e=0;e<n.loadedImages.length;e++)t=n.loadedImages[e],t.validated||(i=t.siz,i&&i>1e3*r&&n._getResizedImage(t,a,o),n.loadedImages[e].validated=!0)},_getResizedImage:function(i,n,a){var o,r,s,l,d,c,p,h=this,u=e(i.img)[0],f=u.naturalWidth,m=u.naturalHeight,g=1,v=h.maxImageWidth||f,b=h.maxImageHeight||m,w=!(!f||!m),y=h.imageCanvas,C=h.imageCanvasContext,x=i.typ,S=i.pid,k=i.ind,T=i.thumb,_=i.exifObj;if(d=function(e,t,i){h.isAjaxUpload?h._showUploadError(e,t,i):h._showError(e,t,i),h._setPreviewError(T,k)},(!h.filestack[k]||!w||f<=v&&m<=b)&&(w&&h.filestack[k]&&h._raise("fileimageresized",[S,k]),n.val++,n.val===a&&h._raise("fileimagesresized"),!w))return void d(h.msgImageResizeError,{id:S,index:k},"fileimageresizeerror");x=x||h.resizeDefaultImageType,r=f>v,s=m>b,g="width"===h.resizePreference?r?v/f:s?b/m:1:s?b/m:r?v/f:1,h._resetCanvas(),f*=g,m*=g,y.width=f,y.height=m;try{C.drawImage(u,0,0,f,m),l=y.toDataURL(x,h.resizeQuality),_&&(p=window.piexif.dump(_),l=window.piexif.insert(p,l)),o=t.dataURI2Blob(l),h.filestack[k]=o,h._raise("fileimageresized",[S,k]),n.val++,n.val===a&&h._raise("fileimagesresized",[void 0,void 0]),o instanceof Blob||d(h.msgImageResizeError,{id:S,index:k},"fileimageresizeerror")}catch(e){n.val++,n.val===a&&h._raise("fileimagesresized",[void 0,void 0]),c=h.msgImageResizeException.replace("{errors}",e.message),d(c,{id:S,index:k},"fileimageresizeexception")}},_initBrowse:function(e){var i=this,n=i.$element;i.showBrowse?i.$btnFile=e.find(".btn-file").append(n):(n.appendTo(e).attr("tabindex",-1),t.addCss(n,"file-no-browse"))},_initClickable:function(){var i,n,a=this;a.isClickable&&(i=a.$dropZone,a.isAjaxUpload||(n=a.$preview.find(".file-default-preview"),n.length&&(i=n)),t.addCss(i,"clickable"),i.attr("tabindex",-1),a._handler(i,"click",function(t){var n=e(t.target);e(a.elErrorContainer+":visible").length||n.parents(".file-preview-thumbnails").length&&!n.parents(".file-default-preview").length||(a.$element.data("zoneClicked",!0).trigger("click"),i.blur())}))},_initCaption:function(){var e=this,i=e.initialCaption||"";return e.overwriteInitial||t.isEmpty(i)?(e.$caption.val(""),!1):(e._setCaption(i),!0)},_setCaption:function(i,n){var a,o,r,s,l,d=this,c=d.getFileStack();if(d.$caption.length){if(d.$captionContainer.removeClass("icon-visible"),n)a=e("<div>"+d.msgValidationError+"</div>").text(),s=c.length,l=s?1===s&&c[0]?d._getFileNames()[0]:d._getMsgSelected(s):d._getMsgSelected(d.msgNo),o=t.isEmpty(i)?l:i,r='<span class="'+d.msgValidationErrorClass+'">'+d.msgValidationErrorIcon+"</span>";else{if(t.isEmpty(i))return;a=e("<div>"+i+"</div>").text(),o=a,r=d._getLayoutTemplate("fileIcon")}d.$captionContainer.addClass("icon-visible"),d.$caption.attr("title",a).val(o),d.$captionIcon.html(r)}},_createContainer:function(){var t=this,i={class:"file-input file-input-new"+(t.rtl?" kv-rtl":"")},n=e(document.createElement("div")).attr(i).html(t._renderMain());return n.insertBefore(t.$element),t._initBrowse(n),t.theme&&n.addClass("theme-"+t.theme),n},_refreshContainer:function(){var e=this,t=e.$container;e.$element.insertAfter(t),t.html(e._renderMain()),e._initBrowse(t),e._validateDisabled()},_validateDisabled:function(){var e=this;e.$caption.attr({readonly:e.isDisabled})},_renderMain:function(){var e=this,t=e.dropZoneEnabled?" file-drop-zone":"file-drop-disabled",i=e.showClose?e._getLayoutTemplate("close"):"",n=e.showPreview?e._getLayoutTemplate("preview").setTokens({class:e.previewClass,dropClass:t}):"",a=e.isDisabled?e.captionClass+" file-caption-disabled":e.captionClass,o=e.captionTemplate.setTokens({class:a+" kv-fileinput-caption"});return e.mainTemplate.setTokens({class:e.mainClass+(!e.showBrowse&&e.showCaption?" no-browse":""),preview:n,close:i,caption:o,upload:e._renderButton("upload"),remove:e._renderButton("remove"),cancel:e._renderButton("cancel"),browse:e._renderButton("browse")})},_renderButton:function(e){var i=this,n=i._getLayoutTemplate("btnDefault"),a=i[e+"Class"],o=i[e+"Title"],r=i[e+"Icon"],s=i[e+"Label"],l=i.isDisabled?" disabled":"",d="button";switch(e){case"remove":if(!i.showRemove)return"";break;case"cancel":if(!i.showCancel)return"";a+=" kv-hidden";break;case"upload":if(!i.showUpload)return"";i.isAjaxUpload&&!i.isDisabled?n=i._getLayoutTemplate("btnLink").replace("{href}",i.uploadUrl):d="submit";break;case"browse":if(!i.showBrowse)return"";n=i._getLayoutTemplate("btnBrowse");break;default:return""}return a+="browse"===e?" btn-file":" fileinput-"+e+" fileinput-"+e+"-button",t.isEmpty(s)||(s=' <span class="'+i.buttonLabelClass+'">'+s+"</span>"),n.setTokens({type:d,css:a,title:o,status:l,icon:r,label:s})},_renderThumbProgress:function(){var e=this;return'<div class="file-thumb-progress kv-hidden">'+e.progressTemplate.setTokens({percent:"0",status:e.msgUploadBegin})+"</div>"},_renderFileFooter:function(e,i,n,a){var o,r=this,s=r.fileActionSettings,l=s.showRemove,d=s.showDrag,c=s.showUpload,p=s.showZoom,h=r._getLayoutTemplate("footer"),u=r._getLayoutTemplate("indicator"),f=a?s.indicatorError:s.indicatorNew,m=a?s.indicatorErrorTitle:s.indicatorNewTitle,g=u.setTokens({indicator:f,indicatorTitle:m});return i=r._getSize(i),o=r.isAjaxUpload?h.setTokens({actions:r._renderFileActions(c,!1,l,p,d,!1,!1,!1),caption:e,size:i,width:n,progress:r._renderThumbProgress(),indicator:g}):h.setTokens({actions:r._renderFileActions(!1,!1,!1,p,d,!1,!1,!1),caption:e,size:i,width:n,progress:"",indicator:g}),o=t.replaceTags(o,r.previewThumbTags)},_renderFileActions:function(e,t,i,n,a,o,r,s,l,d,c){if(!(e||t||i||n||a))return"";var p,h=this,u=!1===r?"":' data-url="'+r+'"',f=!1===s?"":' data-key="'+s+'"',m="",g="",v="",b="",w="",y=h._getLayoutTemplate("actions"),C=h.fileActionSettings,x=h.otherActionButtons.setTokens({dataKey:f,key:s}),S=o?C.removeClass+" disabled":C.removeClass;return i&&(m=h._getLayoutTemplate("actionDelete").setTokens({removeClass:S,removeIcon:C.removeIcon,removeTitle:C.removeTitle,dataUrl:u,dataKey:f,key:s})),e&&(g=h._getLayoutTemplate("actionUpload").setTokens({uploadClass:C.uploadClass,uploadIcon:C.uploadIcon,uploadTitle:C.uploadTitle})),t&&(v=h._getLayoutTemplate("actionDownload").setTokens({downloadClass:C.downloadClass,downloadIcon:C.downloadIcon,downloadTitle:C.downloadTitle,downloadUrl:d||h.initialPreviewDownloadUrl}),v=v.setTokens({filename:c,key:s})),n&&(b=h._getLayoutTemplate("actionZoom").setTokens({zoomClass:C.zoomClass,zoomIcon:C.zoomIcon,zoomTitle:C.zoomTitle})),a&&l&&(p="drag-handle-init "+C.dragClass,w=h._getLayoutTemplate("actionDrag").setTokens({dragClass:p,dragTitle:C.dragTitle,dragIcon:C.dragIcon})),y.setTokens({delete:m,upload:g,download:v,zoom:b,drag:w,other:x})},_browse:function(e){var t=this;e&&e.isDefaultPrevented()||!t._raise("filebrowse")||(t.isError&&!t.isAjaxUpload&&t.clear(),t.$captionContainer.focus())},_filterDuplicate:function(e,t,i){var n=this,a=n._getFileId(e);a&&i&&i.indexOf(a)>-1||(i||(i=[]),t.push(e),i.push(a))},_change:function(i){var n=this;if(!n.changeTriggered){var a,o,r=n.$element,s=arguments.length>1,l=n.isAjaxUpload,d=[],c=s?arguments[1]:r.get(0).files,p=!l&&t.isEmpty(r.attr("multiple"))?1:n.maxFileCount,h=n.filestack.length,u=t.isEmpty(r.attr("multiple")),f=u&&h>0,m=n._getFileIds(),g=function(t,i,a,o){var r=e.extend(!0,{},n._getOutData({},{},c),{id:a,index:o}),s={id:a,index:o,file:i,files:c};return l?n._showUploadError(t,r):n._showError(t,s)};if(n.reader=null,n._resetUpload(),n._hideFileIcon(),n.dropZoneEnabled&&n.$container.find(".file-drop-zone ."+n.dropZoneTitleClass).remove(),l?e.each(c,function(e,t){n._filterDuplicate(t,d,m)}):(c=i.target&&void 0===i.target.files?i.target.value?[{name:i.target.value.replace(/^.+\\/,"")}]:[]:i.target.files||{},d=c),t.isEmpty(d)||0===d.length)return l||n.clear(),void n._raise("fileselectnone");if(n._resetErrors(),o=d.length,
a=n._getFileCount(l?n.getFileStack().length+o:o),p>0&&a>p){if(!n.autoReplace||o>p)return void function(e,t){var i=n.msgFilesTooMany.replace("{m}",t).replace("{n}",e);n.isError=g(i,null,null,null),n.$captionContainer.removeClass("icon-visible"),n._setCaption("",!0),n.$container.removeClass("file-input-new file-input-ajax-new")}(n.autoReplace&&o>p?o:a,p);a>p&&n._resetPreviewThumbs(l)}else!l||f?(n._resetPreviewThumbs(!1),f&&n.clearStack()):!l||0!==h||n.previewCache.count()&&!n.overwriteInitial||n._resetPreviewThumbs(!0);n.isPreviewable?n.readFiles(d):n._updateFileDetails(1)}},_abort:function(t){var i,n=this;return n.ajaxAborted&&"object"==typeof n.ajaxAborted&&void 0!==n.ajaxAborted.message?(i=e.extend(!0,{},n._getOutData(),t),i.abortData=n.ajaxAborted.data||{},i.abortMessage=n.ajaxAborted.message,n._setProgress(101,n.$progress,n.msgCancelled),n._showUploadError(n.ajaxAborted.message,i,"filecustomerror"),n.cancel(),!0):!!n.ajaxAborted},_resetFileStack:function(){var i=this,n=0,a=[],o=[],r=[];i._getThumbs().each(function(){var s=e(this),l=s.attr("data-fileindex"),d=i.filestack[l],c=s.attr("id");"-1"!==l&&-1!==l&&(void 0!==d?(a[n]=d,o[n]=i._getFileName(d),r[n]=i._getFileId(d),s.attr({id:i.previewInitId+"-"+n,"data-fileindex":n}),n++):s.attr({id:"uploaded-"+t.uniqId(),"data-fileindex":"-1"}),i.$preview.find("#zoom-"+c).attr({id:"zoom-"+s.attr("id"),"data-fileindex":s.attr("data-fileindex")}))}),i.filestack=a,i.filenames=o,i.fileids=r},_isFileSelectionValid:function(e){var t=this;return e=e||0,t.required&&!t.getFilesCount()?(t.$errorContainer.html(""),t._showUploadError(t.msgFileRequired),!1):!(t.minFileCount>0&&t._getFileCount(e)<t.minFileCount)||(t._noFilesError({}),!1)},clearStack:function(){var e=this;return e.filestack=[],e.filenames=[],e.fileids=[],e.$element},updateStack:function(e,t){var i=this;return i.filestack[e]=t,i.filenames[e]=i._getFileName(t),i.fileids[e]=t&&i._getFileId(t)||null,i.$element},addToStack:function(e){var t=this;return t.filestack.push(e),t.filenames.push(t._getFileName(e)),t.fileids.push(t._getFileId(e)),t.$element},getFileStack:function(e){return this.filestack.filter(function(t){return e?void 0!==t:void 0!==t&&null!==t})},getFilesCount:function(){var e=this,t=e.isAjaxUpload?e.getFileStack().length:e._inputFileCount();return e._getFileCount(t)},readFiles:function(i){this.reader=new FileReader;var n,a=this,o=a.$element,r=a.$preview,s=a.reader,l=a.$previewContainer,d=a.$previewStatus,c=a.msgLoading,p=a.msgProgress,h=a.previewInitId,u=i.length,f=a.fileTypeSettings,m=a.filestack.length,g=a.allowedFileTypes,v=g?g.length:0,b=a.allowedFileExtensions,w=t.isEmpty(b)?"":b.join(", "),y=a.maxFilePreviewSize&&parseFloat(a.maxFilePreviewSize),C=r.length&&(!y||isNaN(y)),x=function(t,o,r,s){var l,d=e.extend(!0,{},a._getOutData({},{},i),{id:r,index:s}),c={id:r,index:s,file:o,files:i};a._previewDefault(o,r,!0),a.isAjaxUpload?(a.addToStack(void 0),setTimeout(function(){n(s+1)},100)):u=0,a._initFileActions(),l=e("#"+r),l.find(".kv-file-upload").hide(),a.removeFromPreviewOnError&&l.remove(),a.isError=a.isAjaxUpload?a._showUploadError(t,d):a._showError(t,c),a._updateFileDetails(u)};a.loadedImages=[],a.totalImagesCount=0,e.each(i,function(e,t){var i=a.fileTypeSettings.image;i&&i(t.type)&&a.totalImagesCount++}),n=function(S){if(t.isEmpty(o.attr("multiple"))&&(u=1),S>=u)return a.isAjaxUpload&&a.filestack.length>0?a._raise("filebatchselected",[a.getFileStack()]):a._raise("filebatchselected",[i]),l.removeClass("file-thumb-loading"),void d.html("");var k,T,_,E,I,$,D,P,A,O,R,L,F=m+S,z=h+"-"+F,M=i[S],j=f.text,N=f.image,B=f.html,U=M&&M.name?a.slug(M.name):"",H=(M&&M.size||0)/1e3,G="",W=M?t.objUrl.createObjectURL(M):null,q=0,V="",Z=0,Y=function(){var e=p.setTokens({index:S+1,files:u,percent:50,name:U});setTimeout(function(){d.html(e),a._updateFileDetails(u),n(S+1)},100),a._raise("fileloaded",[M,z,S,s])};if(M){if(v>0)for(T=0;T<v;T++)$=g[T],D=a.msgFileTypes[$]||$,V+=0===T?D:", "+D;if(!1===U)return void n(S+1);if(0===U.length)return _=a.msgInvalidFileName.replace("{name}",t.htmlEncode(M.name,"[unknown]")),void x(_,M,z,S);if(t.isEmpty(b)||(G=new RegExp("\\.("+b.join("|")+")$","i")),k=H.toFixed(2),a.maxFileSize>0&&H>a.maxFileSize)return _=a.msgSizeTooLarge.setTokens({name:U,size:k,maxSize:a.maxFileSize}),void x(_,M,z,S);if(null!==a.minFileSize&&H<=t.getNum(a.minFileSize))return _=a.msgSizeTooSmall.setTokens({name:U,size:k,minSize:a.minFileSize}),void x(_,M,z,S);if(!t.isEmpty(g)&&t.isArray(g)){for(T=0;T<g.length;T+=1)E=g[T],P=f[E],q+=P&&"function"==typeof P&&P(M.type,M.name)?1:0;if(0===q)return _=a.msgInvalidFileType.setTokens({name:U,types:V}),void x(_,M,z,S)}if(0===q&&!t.isEmpty(b)&&t.isArray(b)&&!t.isEmpty(G)&&(I=t.compare(U,G),0===(q+=t.isEmpty(I)?0:I.length)))return _=a.msgInvalidFileExtension.setTokens({name:U,extensions:w}),void x(_,M,z,S);if(!a.showPreview)return a.isAjaxUpload&&a.addToStack(M),setTimeout(function(){n(S+1),a._updateFileDetails(u)},100),void a._raise("fileloaded",[M,z,S,s]);if(!C&&H>y)return a.addToStack(M),l.addClass("file-thumb-loading"),a._previewDefault(M,z),a._initFileActions(),a._updateFileDetails(u),void n(S+1);r.length&&void 0!==FileReader?(A=j(M.type,U),O=B(M.type,U),R=N(M.type,U),d.html(c.replace("{index}",S+1).replace("{files}",u)),l.addClass("file-thumb-loading"),s.onerror=function(e){a._errorHandler(e,U)},s.onload=function(i){var n,o,r,l,d,c,p=[];if(o={name:U,type:M.type},e.each(f,function(e,t){"object"!==e&&"other"!==e&&t(M.type,U)&&Z++}),0===Z){for(r=new Uint8Array(i.target.result),T=0;T<r.length;T++)l=r[T].toString(16),p.push(l);if(n=p.join("").toLowerCase().substring(0,8),c=t.getMimeType(n,"",""),t.isEmpty(c)&&(d=t.arrayBuffer2String(s.result),c=t.isSvg(d)?"image/svg+xml":t.getMimeType(n,d,M.type)),o={name:U,type:c},A=j(c,""),O=B(c,""),R=N(c,""),(L=A||O)||R)return void function(e){var t=new FileReader;t.onerror=function(e){a._errorHandler(e,U)},t.onload=function(e){a._previewFile(S,M,e,z,W,o),a._initFileActions(),Y()},e?t.readAsText(M,a.textEncoding):t.readAsDataURL(M)}(L)}a._previewFile(S,M,i,z,W,o),a._initFileActions(),Y()},s.onprogress=function(e){if(e.lengthComputable){var t=e.loaded/e.total*100,i=Math.ceil(t);_=p.setTokens({index:S+1,files:u,percent:i,name:U}),setTimeout(function(){d.html(_)},100)}},A||O?s.readAsText(M,a.textEncoding):R?s.readAsDataURL(M):s.readAsArrayBuffer(M)):(a._previewDefault(M,z),setTimeout(function(){n(S+1),a._updateFileDetails(u)},100),a._raise("fileloaded",[M,z,S,s])),a.addToStack(M)}},n(0),a._updateFileDetails(u,!1)},lock:function(){var e=this;return e._resetErrors(),e.disable(),e.showRemove&&e.$container.find(".fileinput-remove").hide(),e.showCancel&&e.$container.find(".fileinput-cancel").show(),e._raise("filelock",[e.filestack,e._getExtraData()]),e.$element},unlock:function(e){var t=this;return void 0===e&&(e=!0),t.enable(),t.showCancel&&t.$container.find(".fileinput-cancel").hide(),t.showRemove&&t.$container.find(".fileinput-remove").show(),e&&t._resetFileStack(),t._raise("fileunlock",[t.filestack,t._getExtraData()]),t.$element},cancel:function(){var t,i=this,n=i.ajaxRequests,a=n.length;if(a>0)for(t=0;t<a;t+=1)i.cancelling=!0,n[t].abort();return i._setProgressCancelled(),i._getThumbs().each(function(){var t=e(this),n=t.attr("data-fileindex");t.removeClass("file-uploading"),void 0!==i.filestack[n]&&(t.find(".kv-file-upload").removeClass("disabled").removeAttr("disabled"),t.find(".kv-file-remove").removeClass("disabled").removeAttr("disabled")),i.unlock()}),i.$element},clear:function(){var i,n=this;if(n._raise("fileclear"))return n.$btnUpload.removeAttr("disabled"),n._getThumbs().find("video,audio,img").each(function(){t.cleanMemory(e(this))}),n._clearFileInput(),n._resetUpload(),n.clearStack(),n._resetErrors(!0),n._hasInitialPreview()?(n._showFileIcon(),n._resetPreview(),n._initPreviewActions(),n.$container.removeClass("file-input-new")):(n._getThumbs().each(function(){n._clearObjects(e(this))}),n.isAjaxUpload&&(n.previewCache.data={}),n.$preview.html(""),i=!n.overwriteInitial&&n.initialCaption.length>0?n.initialCaption:"",n.$caption.attr("title","").val(i),t.addCss(n.$container,"file-input-new"),n._validateDefaultPreview()),0===n.$container.find(t.FRAMES).length&&(n._initCaption()||n.$captionContainer.removeClass("icon-visible")),n._hideFileIcon(),n._raise("filecleared"),n.$captionContainer.focus(),n._setFileDropZoneTitle(),n.$element},reset:function(){var e=this;if(e._raise("filereset"))return e._resetPreview(),e.$container.find(".fileinput-filename").text(""),t.addCss(e.$container,"file-input-new"),(e.getFrames().length||e.dropZoneEnabled)&&e.$container.removeClass("file-input-new"),e.clearStack(),e.formdata={},e._setFileDropZoneTitle(),e.$element},disable:function(){var e=this;return e.isDisabled=!0,e._raise("filedisabled"),e.$element.attr("disabled","disabled"),e.$container.find(".kv-fileinput-caption").addClass("file-caption-disabled"),e.$container.find(".fileinput-remove, .fileinput-upload, .file-preview-frame button").attr("disabled",!0),t.addCss(e.$container.find(".btn-file"),"disabled"),e._initDragDrop(),e.$element},enable:function(){var e=this;return e.isDisabled=!1,e._raise("fileenabled"),e.$element.removeAttr("disabled"),e.$container.find(".kv-fileinput-caption").removeClass("file-caption-disabled"),e.$container.find(".fileinput-remove, .fileinput-upload, .file-preview-frame button").removeAttr("disabled"),e.$container.find(".btn-file").removeClass("disabled"),e._initDragDrop(),e.$element},upload:function(){var i,n,a,o=this,r=o.getFileStack().length,s=!e.isEmptyObject(o._getExtraData());if(o.isAjaxUpload&&!o.isDisabled&&o._isFileSelectionValid(r)){if(o._resetUpload(),0===r&&!s)return void o._showUploadError(o.msgUploadEmpty);if(o.$progress.show(),o.uploadCount=0,o.uploadStatus={},o.uploadLog=[],o.lock(),o._setProgress(2),0===r&&s)return void o._uploadExtraOnly();if(a=o.filestack.length,o.hasInitData=!1,!o.uploadAsync)return o._uploadBatch(),o.$element;for(n=o._getOutData(),o._raise("filebatchpreupload",[n]),o.fileBatchCompleted=!1,o.uploadCache={content:[],config:[],tags:[],append:!0},o.uploadAsyncCount=o.getFileStack().length,i=0;i<a;i++)o.uploadCache.content[i]=null,o.uploadCache.config[i]=null,o.uploadCache.tags[i]=null;for(o.$preview.find(".file-preview-initial").removeClass(t.SORT_CSS),o._initSortable(),o.cacheInitialPreview=o.getPreview(),i=0;i<a;i++)o.filestack[i]&&o._uploadSingle(i,!0)}},destroy:function(){var t=this,i=t.$form,n=t.$container,a=t.$element,o=t.namespace;return e(document).off(o),e(window).off(o),i&&i.length&&i.off(o),t.isAjaxUpload&&t._clearFileInput(),t._cleanup(),t._initPreviewCache(),a.insertBefore(n).off(o).removeData(),n.off().remove(),a},refresh:function(i){var n=this,a=n.$element;return i="object"!=typeof i||t.isEmpty(i)?n.options:e.extend(!0,{},n.options,i),n._init(i,!0),n._listen(),a},zoom:function(e){var i=this,n=i._getFrame(e),a=i.$modal;n&&(t.initModal(a),a.html(i._getModalContent()),i._setZoomContent(n),a.modal("show"),i._initZoomButtons())},getExif:function(e){var t=this,i=t._getFrame(e);return i&&i.data("exif")||null},getFrames:function(i){var n,a=this;return i=i||"",n=a.$preview.find(t.FRAMES+i),a.reversePreviewOrder&&(n=e(n.get().reverse())),n},getPreview:function(){var e=this;return{content:e.initialPreview,config:e.initialPreviewConfig,tags:e.initialPreviewThumbTags}}},e.fn.fileinput=function(n){if(t.hasFileAPISupport()||t.isIE(9)){var a=Array.apply(null,arguments),o=[];switch(a.shift(),this.each(function(){var r,s=e(this),l=s.data("fileinput"),d="object"==typeof n&&n,c=d.theme||s.data("theme"),p={},h={},u=d.language||s.data("language")||e.fn.fileinput.defaults.language||"en";l||(c&&(h=e.fn.fileinputThemes[c]||{}),"en"===u||t.isEmpty(e.fn.fileinputLocales[u])||(p=e.fn.fileinputLocales[u]||{}),r=e.extend(!0,{},e.fn.fileinput.defaults,h,e.fn.fileinputLocales.en,p,d,s.data()),l=new i(this,r),s.data("fileinput",l)),"string"==typeof n&&o.push(l[n].apply(l,a))}),o.length){case 0:return this;case 1:return o[0];default:return o}}},e.fn.fileinput.defaults={language:"en",showCaption:!0,showBrowse:!0,showPreview:!0,showRemove:!0,showUpload:!0,showCancel:!0,showClose:!0,showUploadedThumbs:!0,browseOnZoneClick:!1,autoReplace:!1,autoOrientImage:!1,required:!1,rtl:!1,hideThumbnailContent:!1,generateFileId:null,previewClass:"",captionClass:"",frameClass:"krajee-default",mainClass:"file-caption-main",mainTemplate:null,purifyHtml:!0,fileSizeGetter:null,initialCaption:"",initialPreview:[],initialPreviewDelimiter:"*$$*",initialPreviewAsData:!1,initialPreviewFileType:"image",initialPreviewConfig:[],initialPreviewThumbTags:[],previewThumbTags:{},initialPreviewShowDelete:!0,initialPreviewDownloadUrl:"",removeFromPreviewOnError:!1,deleteUrl:"",deleteExtraData:{},overwriteInitial:!0,previewZoomButtonIcons:{prev:'<i class="glyphicon glyphicon-triangle-left"></i>',next:'<i class="glyphicon glyphicon-triangle-right"></i>',toggleheader:'<i class="glyphicon glyphicon-resize-vertical"></i>',fullscreen:'<i class="glyphicon glyphicon-fullscreen"></i>',borderless:'<i class="glyphicon glyphicon-resize-full"></i>',close:'<i class="glyphicon glyphicon-remove"></i>'},previewZoomButtonClasses:{prev:"btn btn-navigate",next:"btn btn-navigate",toggleheader:"btn btn-sm btn-kv btn-default btn-outline-secondary",fullscreen:"btn btn-sm btn-kv btn-default btn-outline-secondary",borderless:"btn btn-sm btn-kv btn-default btn-outline-secondary",close:"btn btn-sm btn-kv btn-default btn-outline-secondary"},previewTemplates:{},previewContentTemplates:{},preferIconicPreview:!1,preferIconicZoomPreview:!1,allowedPreviewTypes:void 0,allowedPreviewMimeTypes:null,allowedFileTypes:null,allowedFileExtensions:null,defaultPreviewContent:null,customLayoutTags:{},customPreviewTags:{},previewFileIcon:'<i class="glyphicon glyphicon-file"></i>',previewFileIconClass:"file-other-icon",previewFileIconSettings:{},previewFileExtSettings:{},buttonLabelClass:"hidden-xs",browseIcon:'<i class="glyphicon glyphicon-folder-open"></i>&nbsp;',browseClass:"btn btn-primary",removeIcon:'<i class="glyphicon glyphicon-trash"></i>',removeClass:"btn btn-default btn-secondary",cancelIcon:'<i class="glyphicon glyphicon-ban-circle"></i>',cancelClass:"btn btn-default btn-secondary",uploadIcon:'<i class="glyphicon glyphicon-upload"></i>',uploadClass:"btn btn-default btn-secondary",uploadUrl:null,uploadUrlThumb:null,uploadAsync:!0,uploadExtraData:{},zoomModalHeight:480,minImageWidth:null,minImageHeight:null,maxImageWidth:null,maxImageHeight:null,resizeImage:!1,resizePreference:"width",resizeQuality:.92,resizeDefaultImageType:"image/jpeg",resizeIfSizeMoreThan:0,minFileSize:0,maxFileSize:0,maxFilePreviewSize:25600,minFileCount:0,maxFileCount:0,validateInitialCount:!1,msgValidationErrorClass:"text-danger",msgValidationErrorIcon:'<i class="glyphicon glyphicon-exclamation-sign"></i> ',msgErrorClass:"file-error-message",progressThumbClass:"progress-bar bg-success progress-bar-success progress-bar-striped active",progressClass:"progress-bar bg-success progress-bar-success progress-bar-striped active",progressCompleteClass:"progress-bar bg-success progress-bar-success",progressErrorClass:"progress-bar bg-danger progress-bar-danger",progressUploadThreshold:99,previewFileType:"image",elCaptionContainer:null,elCaptionText:null,elPreviewContainer:null,elPreviewImage:null,elPreviewStatus:null,elErrorContainer:null,errorCloseButton:t.closeButton("kv-error-close"),slugCallback:null,dropZoneEnabled:!0,dropZoneTitleClass:"file-drop-zone-title",fileActionSettings:{},otherActionButtons:"",textEncoding:"UTF-8",ajaxSettings:{},ajaxDeleteSettings:{},showAjaxErrorDetails:!0,mergeAjaxCallbacks:!1,mergeAjaxDeleteCallbacks:!1,retryErrorUploads:!0,reversePreviewOrder:!1},e.fn.fileinputLocales.en={fileSingle:"file",filePlural:"files",browseLabel:"Browse &hellip;",removeLabel:"Remove",removeTitle:"Clear selected files",cancelLabel:"Cancel",cancelTitle:"Abort ongoing upload",uploadLabel:"Upload",uploadTitle:"Upload selected files",msgNo:"No",msgNoFilesSelected:"No files selected",msgCancelled:"Cancelled",msgPlaceholder:"Select {files}...",msgZoomModalHeading:"Detailed Preview",msgFileRequired:"You must select a file to upload.",msgSizeTooSmall:'File "{name}" (<b>{size} KB</b>) is too small and must be larger than <b>{minSize} KB</b>.',msgSizeTooLarge:'File "{name}" (<b>{size} KB</b>) exceeds maximum allowed upload size of <b>{maxSize} KB</b>.',msgFilesTooLess:"You must select at least <b>{n}</b> {files} to upload.",msgFilesTooMany:"Number of files selected for upload <b>({n})</b> exceeds maximum allowed limit of <b>{m}</b>.",msgFileNotFound:'File "{name}" not found!',msgFileSecured:'Security restrictions prevent reading the file "{name}".',msgFileNotReadable:'File "{name}" is not readable.',msgFilePreviewAborted:'File preview aborted for "{name}".',msgFilePreviewError:'An error occurred while reading the file "{name}".',msgInvalidFileName:'Invalid or unsupported characters in file name "{name}".',msgInvalidFileType:'Invalid type for file "{name}". Only "{types}" files are supported.',msgInvalidFileExtension:'Invalid extension for file "{name}". Only "{extensions}" files are supported.',msgFileTypes:{image:"image",html:"HTML",text:"text",video:"video",audio:"audio",flash:"flash",pdf:"PDF",object:"object"},msgUploadAborted:"The file upload was aborted",msgUploadThreshold:"Processing...",msgUploadBegin:"Initializing...",msgUploadEnd:"Done",msgUploadEmpty:"No valid data available for upload.",msgUploadError:"Error",msgValidationError:"Validation Error",msgLoading:"Loading file {index} of {files} &hellip;",msgProgress:"Loading file {index} of {files} - {name} - {percent}% completed.",msgSelected:"{n} {files} selected",msgFoldersNotAllowed:"Drag & drop files only! {n} folder(s) dropped were skipped.",msgImageWidthSmall:'Width of image file "{name}" must be at least {size} px.',msgImageHeightSmall:'Height of image file "{name}" must be at least {size} px.',msgImageWidthLarge:'Width of image file "{name}" cannot exceed {size} px.',msgImageHeightLarge:'Height of image file "{name}" cannot exceed {size} px.',msgImageResizeError:"Could not get the image dimensions to resize.",msgImageResizeException:"Error while resizing the image.<pre>{errors}</pre>",msgAjaxError:"Something went wrong with the {operation} operation. Please try again later!",msgAjaxProgressError:"{operation} failed",ajaxOperations:{deleteThumb:"file delete",uploadThumb:"file upload",uploadBatch:"batch file upload",uploadExtra:"form data upload"},dropZoneTitle:"Drag & drop files here &hellip;",dropZoneClickTitle:"<br>(or click to select {files})",previewZoomButtonTitles:{prev:"View previous file",next:"View next file",toggleheader:"Toggle header",fullscreen:"Toggle full screen",borderless:"Toggle borderless mode",close:"Close detailed preview"},usePdfRenderer:function(){return!!navigator.userAgent.match(/(iPod|iPhone|iPad|Android)/i)},pdfRendererUrl:"",pdfRendererTemplate:'<iframe class="kv-preview-data file-preview-pdf" src="{renderer}?file={data}" {style}></iframe>'},e.fn.fileinput.Constructor=i,e(document).ready(function(){var t=e("input.file[type=file]");t.length&&t.fileinput()})}),function(){"use strict";function e(e){return JSON.parse(JSON.stringify(e))}function t(e){for(var t=p(e);""<=t[1].slice(0,2)&&t[1].slice(0,2)<="";)t=[t[0]].concat(t.slice(2));return t.join("")}function i(e){return l(">"+c("B",e.length),e)}function n(e){return l(">"+c("H",e.length),e)}function a(e){return l(">"+c("L",e.length),e)}function o(e,t,o){var r,s,d,p,h="",u="";if("Byte"==t)r=e.length,r<=4?u=i(e)+c("\0",4-r):(u=l(">L",[o]),h=i(e));else if("Short"==t)r=e.length,r<=2?u=n(e)+c("\0\0",2-r):(u=l(">L",[o]),h=n(e));else if("Long"==t)r=e.length,r<=1?u=a(e):(u=l(">L",[o]),h=a(e));else if("Ascii"==t)s=e+"\0",r=s.length,r>4?(u=l(">L",[o]),h=s):u=s+c("\0",4-r);else if("Rational"==t){if("number"==typeof e[0])r=1,d=e[0],p=e[1],s=l(">L",[d])+l(">L",[p]);else{r=e.length,s="";for(var f=0;f<r;f++)d=e[f][0],p=e[f][1],s+=l(">L",[d])+l(">L",[p])}u=l(">L",[o]),h=s}else if("SRational"==t){if("number"==typeof e[0])r=1,d=e[0],p=e[1],s=l(">l",[d])+l(">l",[p]);else{r=e.length,s="";for(var f=0;f<r;f++)d=e[f][0],p=e[f][1],s+=l(">l",[d])+l(">l",[p])}u=l(">L",[o]),h=s}else"Undefined"==t&&(r=e.length,r>4?(u=l(">L",[o]),h=e):u=e+c("\0",4-r));return[l(">L",[r]),u,h]}function r(e,t,i){var n,a=Object.keys(e).length,r=l(">H",[a]);n=["0th","1st"].indexOf(t)>-1?2+12*a+4:2+12*a;var s,d="",c="";for(var s in e)if("string"==typeof s&&(s=parseInt(s)),!("0th"==t&&[34665,34853].indexOf(s)>-1||"Exif"==t&&40965==s||"1st"==t&&[513,514].indexOf(s)>-1)){var p=e[s],h=l(">H",[s]),u=b[t][s].type,f=l(">H",[v[u]]);"number"==typeof p&&(p=[p]);var m=8+n+i+c.length,g=o(p,u,m),w=g[0],y=g[1],C=g[2];d+=h+f+w+y,c+=C}return[r+d,c]}function s(e){var t,i;if(""==e.slice(0,2))t=p(e),i=h(t),this.tiftag=i?i.slice(10):null;else if(["II","MM"].indexOf(e.slice(0,2))>-1)this.tiftag=e;else{if("Exif"!=e.slice(0,4))throw"Given file is neither JPEG nor TIFF.";this.tiftag=e.slice(6)}}function l(e,t){if(!(t instanceof Array))throw"'pack' error. Got invalid type argument.";if(e.length-1!=t.length)throw"'pack' error. "+(e.length-1)+" marks, "+t.length+" elements.";var i;if("<"==e[0])i=!0;else{if(">"!=e[0])throw"";i=!1}for(var n="",a=1,o=null,r=null,s=null;r=e[a];){if("b"==r.toLowerCase()){if(o=t[a-1],"b"==r&&o<0&&(o+=256),o>255||o<0)throw"'pack' error.";s=String.fromCharCode(o)}else if("H"==r){if((o=t[a-1])>65535||o<0)throw"'pack' error.";s=String.fromCharCode(Math.floor(o%65536/256))+String.fromCharCode(o%256),i&&(s=s.split("").reverse().join(""))}else{if("l"!=r.toLowerCase())throw"'pack' error.";if(o=t[a-1],"l"==r&&o<0&&(o+=4294967296),o>4294967295||o<0)throw"'pack' error.";s=String.fromCharCode(Math.floor(o/16777216))+String.fromCharCode(Math.floor(o%16777216/65536))+String.fromCharCode(Math.floor(o%65536/256))+String.fromCharCode(o%256),i&&(s=s.split("").reverse().join(""))}n+=s,a+=1}return n}function d(e,t){if("string"!=typeof t)throw"'unpack' error. Got invalid type argument.";for(var i=0,n=1;n<e.length;n++)if("b"==e[n].toLowerCase())i+=1;else if("h"==e[n].toLowerCase())i+=2;else{if("l"!=e[n].toLowerCase())throw"'unpack' error. Got invalid mark.";i+=4}if(i!=t.length)throw"'unpack' error. Mismatch between symbol and string length. "+i+":"+t.length;var a;if("<"==e[0])a=!0;else{if(">"!=e[0])throw"'unpack' error.";a=!1}for(var o=[],r=0,s=1,l=null,d=null,c=null,p="";d=e[s];){if("b"==d.toLowerCase())c=1,p=t.slice(r,r+c),l=p.charCodeAt(0),"b"==d&&l>=128&&(l-=256);else if("H"==d)c=2,p=t.slice(r,r+c),a&&(p=p.split("").reverse().join("")),l=256*p.charCodeAt(0)+p.charCodeAt(1);else{if("l"!=d.toLowerCase())throw"'unpack' error. "+d;c=4,p=t.slice(r,r+c),a&&(p=p.split("").reverse().join("")),l=16777216*p.charCodeAt(0)+65536*p.charCodeAt(1)+256*p.charCodeAt(2)+p.charCodeAt(3),"l"==d&&l>=2147483648&&(l-=4294967296)}o.push(l),r+=c,s+=1}return o}function c(e,t){for(var i="",n=0;n<t;n++)i+=e;return i}function p(e){if(""!=e.slice(0,2))throw"Given data isn't JPEG.";for(var t=2,i=[""];;){if(""==e.slice(t,t+2)){i.push(e.slice(t));break}var n=d(">H",e.slice(t+2,t+4))[0],a=t+n+2;if(i.push(e.slice(t,a)),(t=a)>=e.length)throw"Wrong JPEG data."}return i}function h(e){for(var t,i=0;i<e.length;i++)if(t=e[i],""==t.slice(0,2)&&"Exif\0\0"==t.slice(4,10))return t;return null}function u(e,t){return""==e[1].slice(0,2)&&""==e[2].slice(0,2)&&"Exif\0\0"==e[2].slice(4,10)?t?(e[2]=t,e=[""].concat(e.slice(2))):e=null==t?e.slice(0,2).concat(e.slice(3)):e.slice(0).concat(e.slice(2)):""==e[1].slice(0,2)?t&&(e[1]=t):""==e[1].slice(0,2)&&"Exif\0\0"==e[1].slice(4,10)?t?e[1]=t:null==t&&(e=e.slice(0).concat(e.slice(2))):t&&(e=[e[0],t].concat(e.slice(1))),e.join("")}var f={};if(f.version="1.03",f.remove=function(e){var t=!1;if(""==e.slice(0,2));else{if("data:image/jpeg;base64,"!=e.slice(0,23)&&"data:image/jpg;base64,"!=e.slice(0,22))throw"Given data is not jpeg.";e=g(e.split(",")[1]),t=!0}var i=p(e);if(""==i[1].slice(0,2)&&"Exif\0\0"==i[1].slice(4,10))i=[i[0]].concat(i.slice(2));else{if(""!=i[2].slice(0,2)||"Exif\0\0"!=i[2].slice(4,10))throw"Exif not found.";i=i.slice(0,2).concat(i.slice(3))}var n=i.join("");return t&&(n="data:image/jpeg;base64,"+m(n)),n},f.insert=function(e,t){var i=!1;if("Exif\0\0"!=e.slice(0,6))throw"Given data is not exif.";if(""==t.slice(0,2));else{if("data:image/jpeg;base64,"!=t.slice(0,23)&&"data:image/jpg;base64,"!=t.slice(0,22))throw"Given data is not jpeg.";t=g(t.split(",")[1]),i=!0}var n=""+l(">H",[e.length+2])+e,a=p(t),o=u(a,n);return i&&(o="data:image/jpeg;base64,"+m(o)),o},f.load=function(e){var t;if("string"!=typeof e)throw"'load' gots invalid type argument.";if(""==e.slice(0,2))t=e;else if("data:image/jpeg;base64,"==e.slice(0,23)||"data:image/jpg;base64,"==e.slice(0,22))t=g(e.split(",")[1]);else{if("Exif"!=e.slice(0,4))throw"'load' gots invalid file data.";t=e.slice(6)}var i={"0th":{},Exif:{},GPS:{},Interop:{},"1st":{},thumbnail:null},n=new s(t);if(null===n.tiftag)return i;"II"==n.tiftag.slice(0,2)?n.endian_mark="<":n.endian_mark=">";var a=d(n.endian_mark+"L",n.tiftag.slice(4,8))[0];i["0th"]=n.get_ifd(a,"0th");var o=i["0th"].first_ifd_pointer;if(delete i["0th"].first_ifd_pointer,34665 in i["0th"]&&(a=i["0th"][34665],i.Exif=n.get_ifd(a,"Exif")),34853 in i["0th"]&&(a=i["0th"][34853],i.GPS=n.get_ifd(a,"GPS")),40965 in i.Exif&&(a=i.Exif[40965],i.Interop=n.get_ifd(a,"Interop")),"\0\0\0\0"!=o&&(a=d(n.endian_mark+"L",o)[0],i["1st"]=n.get_ifd(a,"1st"),513 in i["1st"]&&514 in i["1st"])){var r=i["1st"][513]+i["1st"][514],l=n.tiftag.slice(i["1st"][513],r);i.thumbnail=l}return i},f.dump=function(i){var n,a,o,s,d,c=e(i),p=!1,h=!1,u=!1,m=!1;n="0th"in c?c["0th"]:{},"Exif"in c&&Object.keys(c.Exif).length||"Interop"in c&&Object.keys(c.Interop).length?(n[34665]=1,p=!0,a=c.Exif,"Interop"in c&&Object.keys(c.Interop).length?(a[40965]=1,u=!0,o=c.Interop):Object.keys(a).indexOf(f.ExifIFD.InteroperabilityTag.toString())>-1&&delete a[40965]):Object.keys(n).indexOf(f.ImageIFD.ExifTag.toString())>-1&&delete n[34665],"GPS"in c&&Object.keys(c.GPS).length?(n[f.ImageIFD.GPSTag]=1,h=!0,s=c.GPS):Object.keys(n).indexOf(f.ImageIFD.GPSTag.toString())>-1&&delete n[f.ImageIFD.GPSTag],"1st"in c&&"thumbnail"in c&&null!=c.thumbnail&&(m=!0,c["1st"][513]=1,c["1st"][514]=1,d=c["1st"]);var g,b,w,y,C,x=r(n,"0th",0),S=x[0].length+12*p+12*h+4+x[1].length,k="",T=0,_="",E=0,I="",$=0,D="";if(p&&(g=r(a,"Exif",S),T=g[0].length+12*u+g[1].length),h&&(b=r(s,"GPS",S+T),_=b.join(""),E=_.length),u){var P=S+T+E;w=r(o,"Interop",P),I=w.join(""),$=I.length}if(m){var P=S+T+E+$;if(y=r(d,"1st",P),C=t(c.thumbnail),C.length>64e3)throw"Given thumbnail is too large. max 64kB"}var A="",O="",R="",L="\0\0\0\0";if(p){var F=8+S,z=l(">L",[F]),M=34665,j=l(">H",[M]),N=l(">H",[v.Long]),B=l(">L",[1]);A=j+N+B+z}if(h){var F=8+S+T,z=l(">L",[F]),M=34853,j=l(">H",[M]),N=l(">H",[v.Long]),B=l(">L",[1]);O=j+N+B+z}if(u){var F=8+S+T+E,z=l(">L",[F]),M=40965,j=l(">H",[M]),N=l(">H",[v.Long]),B=l(">L",[1]);R=j+N+B+z}if(m){var F=8+S+T+E+$;L=l(">L",[F]);var U=F+y[0].length+24+4+y[1].length,H="\0\0\0\0"+l(">L",[U]),G="\0\0\0\0"+l(">L",[C.length]);D=y[0]+H+G+"\0\0\0\0"+y[1]+C}var W=x[0]+A+O+L+x[1];return p&&(k=g[0]+R+g[1]),"Exif\0\0MM\0*\0\0\0\b"+W+k+_+I+D},s.prototype={get_ifd:function(e,t){var i,n={},a=d(this.endian_mark+"H",this.tiftag.slice(e,e+2))[0],o=e+2;i=["0th","1st"].indexOf(t)>-1?"Image":t;for(var r=0;r<a;r++){e=o+12*r;var s=d(this.endian_mark+"H",this.tiftag.slice(e,e+2))[0],l=d(this.endian_mark+"H",this.tiftag.slice(e+2,e+4))[0],c=d(this.endian_mark+"L",this.tiftag.slice(e+4,e+8))[0],p=this.tiftag.slice(e+8,e+12),h=[l,c,p];s in b[i]&&(n[s]=this.convert_value(h))}return"0th"==t&&(e=o+12*a,n.first_ifd_pointer=this.tiftag.slice(e,e+4)),n},convert_value:function(e){var t,i=null,n=e[0],a=e[1],o=e[2];if(1==n)a>4?(t=d(this.endian_mark+"L",o)[0],i=d(this.endian_mark+c("B",a),this.tiftag.slice(t,t+a))):i=d(this.endian_mark+c("B",a),o.slice(0,a));else if(2==n)a>4?(t=d(this.endian_mark+"L",o)[0],i=this.tiftag.slice(t,t+a-1)):i=o.slice(0,a-1);else if(3==n)a>2?(t=d(this.endian_mark+"L",o)[0],i=d(this.endian_mark+c("H",a),this.tiftag.slice(t,t+2*a))):i=d(this.endian_mark+c("H",a),o.slice(0,2*a));else if(4==n)a>1?(t=d(this.endian_mark+"L",o)[0],i=d(this.endian_mark+c("L",a),this.tiftag.slice(t,t+4*a))):i=d(this.endian_mark+c("L",a),o);else if(5==n)if(t=d(this.endian_mark+"L",o)[0],a>1){i=[];for(var r=0;r<a;r++)i.push([d(this.endian_mark+"L",this.tiftag.slice(t+8*r,t+4+8*r))[0],d(this.endian_mark+"L",this.tiftag.slice(t+4+8*r,t+8+8*r))[0]])}else i=[d(this.endian_mark+"L",this.tiftag.slice(t,t+4))[0],d(this.endian_mark+"L",this.tiftag.slice(t+4,t+8))[0]];else if(7==n)a>4?(t=d(this.endian_mark+"L",o)[0],i=this.tiftag.slice(t,t+a)):i=o.slice(0,a);else{if(10!=n)throw"Exif might be wrong. Got incorrect value type to decode. type:"+n;if(t=d(this.endian_mark+"L",o)[0],a>1){i=[];for(var r=0;r<a;r++)i.push([d(this.endian_mark+"l",this.tiftag.slice(t+8*r,t+4+8*r))[0],d(this.endian_mark+"l",this.tiftag.slice(t+4+8*r,t+8+8*r))[0]])}else i=[d(this.endian_mark+"l",this.tiftag.slice(t,t+4))[0],d(this.endian_mark+"l",this.tiftag.slice(t+4,t+8))[0]]}return i instanceof Array&&1==i.length?i[0]:i}},"undefined"!=typeof window&&"function"==typeof window.btoa)var m=window.btoa;if(void 0===m)var m=function(e){for(var t,i,n,a,o,r,s,l="",d=0,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";d<e.length;)t=e.charCodeAt(d++),i=e.charCodeAt(d++),n=e.charCodeAt(d++),a=t>>2,o=(3&t)<<4|i>>4,r=(15&i)<<2|n>>6,s=63&n,isNaN(i)?r=s=64:isNaN(n)&&(s=64),l=l+c.charAt(a)+c.charAt(o)+c.charAt(r)+c.charAt(s);return l};if("undefined"!=typeof window&&"function"==typeof window.atob)var g=window.atob;if(void 0===g)var g=function(e){var t,i,n,a,o,r,s,l="",d=0,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");d<e.length;)a=c.indexOf(e.charAt(d++)),o=c.indexOf(e.charAt(d++)),r=c.indexOf(e.charAt(d++)),s=c.indexOf(e.charAt(d++)),t=a<<2|o>>4,i=(15&o)<<4|r>>2,n=(3&r)<<6|s,l+=String.fromCharCode(t),64!=r&&(l+=String.fromCharCode(i)),64!=s&&(l+=String.fromCharCode(n));return l};var v={Byte:1,Ascii:2,Short:3,Long:4,Rational:5,Undefined:7,SLong:9,SRational:10},b={Image:{11:{name:"ProcessingSoftware",type:"Ascii"},254:{name:"NewSubfileType",type:"Long"},255:{name:"SubfileType",type:"Short"},256:{name:"ImageWidth",type:"Long"},257:{name:"ImageLength",type:"Long"},258:{name:"BitsPerSample",type:"Short"},259:{name:"Compression",type:"Short"},262:{name:"PhotometricInterpretation",type:"Short"},263:{name:"Threshholding",type:"Short"},264:{name:"CellWidth",type:"Short"},265:{name:"CellLength",type:"Short"},266:{name:"FillOrder",type:"Short"},269:{name:"DocumentName",type:"Ascii"},270:{name:"ImageDescription",type:"Ascii"},271:{name:"Make",type:"Ascii"},272:{name:"Model",type:"Ascii"},273:{name:"StripOffsets",type:"Long"},274:{name:"Orientation",type:"Short"},277:{name:"SamplesPerPixel",type:"Short"},278:{name:"RowsPerStrip",type:"Long"},279:{name:"StripByteCounts",type:"Long"},282:{name:"XResolution",type:"Rational"},283:{name:"YResolution",type:"Rational"},284:{name:"PlanarConfiguration",type:"Short"},290:{name:"GrayResponseUnit",type:"Short"},291:{name:"GrayResponseCurve",type:"Short"},292:{name:"T4Options",type:"Long"},293:{name:"T6Options",type:"Long"},296:{name:"ResolutionUnit",type:"Short"},301:{name:"TransferFunction",type:"Short"},305:{name:"Software",type:"Ascii"},306:{name:"DateTime",type:"Ascii"},315:{name:"Artist",type:"Ascii"},316:{name:"HostComputer",type:"Ascii"},317:{name:"Predictor",type:"Short"},318:{name:"WhitePoint",type:"Rational"},319:{name:"PrimaryChromaticities",type:"Rational"},320:{name:"ColorMap",type:"Short"},321:{name:"HalftoneHints",type:"Short"},322:{name:"TileWidth",type:"Short"},323:{name:"TileLength",type:"Short"},324:{name:"TileOffsets",type:"Short"},325:{name:"TileByteCounts",type:"Short"},330:{name:"SubIFDs",type:"Long"},332:{name:"InkSet",type:"Short"},333:{name:"InkNames",type:"Ascii"},334:{name:"NumberOfInks",type:"Short"},336:{
name:"DotRange",type:"Byte"},337:{name:"TargetPrinter",type:"Ascii"},338:{name:"ExtraSamples",type:"Short"},339:{name:"SampleFormat",type:"Short"},340:{name:"SMinSampleValue",type:"Short"},341:{name:"SMaxSampleValue",type:"Short"},342:{name:"TransferRange",type:"Short"},343:{name:"ClipPath",type:"Byte"},344:{name:"XClipPathUnits",type:"Long"},345:{name:"YClipPathUnits",type:"Long"},346:{name:"Indexed",type:"Short"},347:{name:"JPEGTables",type:"Undefined"},351:{name:"OPIProxy",type:"Short"},512:{name:"JPEGProc",type:"Long"},513:{name:"JPEGInterchangeFormat",type:"Long"},514:{name:"JPEGInterchangeFormatLength",type:"Long"},515:{name:"JPEGRestartInterval",type:"Short"},517:{name:"JPEGLosslessPredictors",type:"Short"},518:{name:"JPEGPointTransforms",type:"Short"},519:{name:"JPEGQTables",type:"Long"},520:{name:"JPEGDCTables",type:"Long"},521:{name:"JPEGACTables",type:"Long"},529:{name:"YCbCrCoefficients",type:"Rational"},530:{name:"YCbCrSubSampling",type:"Short"},531:{name:"YCbCrPositioning",type:"Short"},532:{name:"ReferenceBlackWhite",type:"Rational"},700:{name:"XMLPacket",type:"Byte"},18246:{name:"Rating",type:"Short"},18249:{name:"RatingPercent",type:"Short"},32781:{name:"ImageID",type:"Ascii"},33421:{name:"CFARepeatPatternDim",type:"Short"},33422:{name:"CFAPattern",type:"Byte"},33423:{name:"BatteryLevel",type:"Rational"},33432:{name:"Copyright",type:"Ascii"},33434:{name:"ExposureTime",type:"Rational"},34377:{name:"ImageResources",type:"Byte"},34665:{name:"ExifTag",type:"Long"},34675:{name:"InterColorProfile",type:"Undefined"},34853:{name:"GPSTag",type:"Long"},34857:{name:"Interlace",type:"Short"},34858:{name:"TimeZoneOffset",type:"Long"},34859:{name:"SelfTimerMode",type:"Short"},37387:{name:"FlashEnergy",type:"Rational"},37388:{name:"SpatialFrequencyResponse",type:"Undefined"},37389:{name:"Noise",type:"Undefined"},37390:{name:"FocalPlaneXResolution",type:"Rational"},37391:{name:"FocalPlaneYResolution",type:"Rational"},37392:{name:"FocalPlaneResolutionUnit",type:"Short"},37393:{name:"ImageNumber",type:"Long"},37394:{name:"SecurityClassification",type:"Ascii"},37395:{name:"ImageHistory",type:"Ascii"},37397:{name:"ExposureIndex",type:"Rational"},37398:{name:"TIFFEPStandardID",type:"Byte"},37399:{name:"SensingMethod",type:"Short"},40091:{name:"XPTitle",type:"Byte"},40092:{name:"XPComment",type:"Byte"},40093:{name:"XPAuthor",type:"Byte"},40094:{name:"XPKeywords",type:"Byte"},40095:{name:"XPSubject",type:"Byte"},50341:{name:"PrintImageMatching",type:"Undefined"},50706:{name:"DNGVersion",type:"Byte"},50707:{name:"DNGBackwardVersion",type:"Byte"},50708:{name:"UniqueCameraModel",type:"Ascii"},50709:{name:"LocalizedCameraModel",type:"Byte"},50710:{name:"CFAPlaneColor",type:"Byte"},50711:{name:"CFALayout",type:"Short"},50712:{name:"LinearizationTable",type:"Short"},50713:{name:"BlackLevelRepeatDim",type:"Short"},50714:{name:"BlackLevel",type:"Rational"},50715:{name:"BlackLevelDeltaH",type:"SRational"},50716:{name:"BlackLevelDeltaV",type:"SRational"},50717:{name:"WhiteLevel",type:"Short"},50718:{name:"DefaultScale",type:"Rational"},50719:{name:"DefaultCropOrigin",type:"Short"},50720:{name:"DefaultCropSize",type:"Short"},50721:{name:"ColorMatrix1",type:"SRational"},50722:{name:"ColorMatrix2",type:"SRational"},50723:{name:"CameraCalibration1",type:"SRational"},50724:{name:"CameraCalibration2",type:"SRational"},50725:{name:"ReductionMatrix1",type:"SRational"},50726:{name:"ReductionMatrix2",type:"SRational"},50727:{name:"AnalogBalance",type:"Rational"},50728:{name:"AsShotNeutral",type:"Short"},50729:{name:"AsShotWhiteXY",type:"Rational"},50730:{name:"BaselineExposure",type:"SRational"},50731:{name:"BaselineNoise",type:"Rational"},50732:{name:"BaselineSharpness",type:"Rational"},50733:{name:"BayerGreenSplit",type:"Long"},50734:{name:"LinearResponseLimit",type:"Rational"},50735:{name:"CameraSerialNumber",type:"Ascii"},50736:{name:"LensInfo",type:"Rational"},50737:{name:"ChromaBlurRadius",type:"Rational"},50738:{name:"AntiAliasStrength",type:"Rational"},50739:{name:"ShadowScale",type:"SRational"},50740:{name:"DNGPrivateData",type:"Byte"},50741:{name:"MakerNoteSafety",type:"Short"},50778:{name:"CalibrationIlluminant1",type:"Short"},50779:{name:"CalibrationIlluminant2",type:"Short"},50780:{name:"BestQualityScale",type:"Rational"},50781:{name:"RawDataUniqueID",type:"Byte"},50827:{name:"OriginalRawFileName",type:"Byte"},50828:{name:"OriginalRawFileData",type:"Undefined"},50829:{name:"ActiveArea",type:"Short"},50830:{name:"MaskedAreas",type:"Short"},50831:{name:"AsShotICCProfile",type:"Undefined"},50832:{name:"AsShotPreProfileMatrix",type:"SRational"},50833:{name:"CurrentICCProfile",type:"Undefined"},50834:{name:"CurrentPreProfileMatrix",type:"SRational"},50879:{name:"ColorimetricReference",type:"Short"},50931:{name:"CameraCalibrationSignature",type:"Byte"},50932:{name:"ProfileCalibrationSignature",type:"Byte"},50934:{name:"AsShotProfileName",type:"Byte"},50935:{name:"NoiseReductionApplied",type:"Rational"},50936:{name:"ProfileName",type:"Byte"},50937:{name:"ProfileHueSatMapDims",type:"Long"},50938:{name:"ProfileHueSatMapData1",type:"Float"},50939:{name:"ProfileHueSatMapData2",type:"Float"},50940:{name:"ProfileToneCurve",type:"Float"},50941:{name:"ProfileEmbedPolicy",type:"Long"},50942:{name:"ProfileCopyright",type:"Byte"},50964:{name:"ForwardMatrix1",type:"SRational"},50965:{name:"ForwardMatrix2",type:"SRational"},50966:{name:"PreviewApplicationName",type:"Byte"},50967:{name:"PreviewApplicationVersion",type:"Byte"},50968:{name:"PreviewSettingsName",type:"Byte"},50969:{name:"PreviewSettingsDigest",type:"Byte"},50970:{name:"PreviewColorSpace",type:"Long"},50971:{name:"PreviewDateTime",type:"Ascii"},50972:{name:"RawImageDigest",type:"Undefined"},50973:{name:"OriginalRawFileDigest",type:"Undefined"},50974:{name:"SubTileBlockSize",type:"Long"},50975:{name:"RowInterleaveFactor",type:"Long"},50981:{name:"ProfileLookTableDims",type:"Long"},50982:{name:"ProfileLookTableData",type:"Float"},51008:{name:"OpcodeList1",type:"Undefined"},51009:{name:"OpcodeList2",type:"Undefined"},51022:{name:"OpcodeList3",type:"Undefined"}},Exif:{33434:{name:"ExposureTime",type:"Rational"},33437:{name:"FNumber",type:"Rational"},34850:{name:"ExposureProgram",type:"Short"},34852:{name:"SpectralSensitivity",type:"Ascii"},34855:{name:"ISOSpeedRatings",type:"Short"},34856:{name:"OECF",type:"Undefined"},34864:{name:"SensitivityType",type:"Short"},34865:{name:"StandardOutputSensitivity",type:"Long"},34866:{name:"RecommendedExposureIndex",type:"Long"},34867:{name:"ISOSpeed",type:"Long"},34868:{name:"ISOSpeedLatitudeyyy",type:"Long"},34869:{name:"ISOSpeedLatitudezzz",type:"Long"},36864:{name:"ExifVersion",type:"Undefined"},36867:{name:"DateTimeOriginal",type:"Ascii"},36868:{name:"DateTimeDigitized",type:"Ascii"},37121:{name:"ComponentsConfiguration",type:"Undefined"},37122:{name:"CompressedBitsPerPixel",type:"Rational"},37377:{name:"ShutterSpeedValue",type:"SRational"},37378:{name:"ApertureValue",type:"Rational"},37379:{name:"BrightnessValue",type:"SRational"},37380:{name:"ExposureBiasValue",type:"SRational"},37381:{name:"MaxApertureValue",type:"Rational"},37382:{name:"SubjectDistance",type:"Rational"},37383:{name:"MeteringMode",type:"Short"},37384:{name:"LightSource",type:"Short"},37385:{name:"Flash",type:"Short"},37386:{name:"FocalLength",type:"Rational"},37396:{name:"SubjectArea",type:"Short"},37500:{name:"MakerNote",type:"Undefined"},37510:{name:"UserComment",type:"Ascii"},37520:{name:"SubSecTime",type:"Ascii"},37521:{name:"SubSecTimeOriginal",type:"Ascii"},37522:{name:"SubSecTimeDigitized",type:"Ascii"},40960:{name:"FlashpixVersion",type:"Undefined"},40961:{name:"ColorSpace",type:"Short"},40962:{name:"PixelXDimension",type:"Long"},40963:{name:"PixelYDimension",type:"Long"},40964:{name:"RelatedSoundFile",type:"Ascii"},40965:{name:"InteroperabilityTag",type:"Long"},41483:{name:"FlashEnergy",type:"Rational"},41484:{name:"SpatialFrequencyResponse",type:"Undefined"},41486:{name:"FocalPlaneXResolution",type:"Rational"},41487:{name:"FocalPlaneYResolution",type:"Rational"},41488:{name:"FocalPlaneResolutionUnit",type:"Short"},41492:{name:"SubjectLocation",type:"Short"},41493:{name:"ExposureIndex",type:"Rational"},41495:{name:"SensingMethod",type:"Short"},41728:{name:"FileSource",type:"Undefined"},41729:{name:"SceneType",type:"Undefined"},41730:{name:"CFAPattern",type:"Undefined"},41985:{name:"CustomRendered",type:"Short"},41986:{name:"ExposureMode",type:"Short"},41987:{name:"WhiteBalance",type:"Short"},41988:{name:"DigitalZoomRatio",type:"Rational"},41989:{name:"FocalLengthIn35mmFilm",type:"Short"},41990:{name:"SceneCaptureType",type:"Short"},41991:{name:"GainControl",type:"Short"},41992:{name:"Contrast",type:"Short"},41993:{name:"Saturation",type:"Short"},41994:{name:"Sharpness",type:"Short"},41995:{name:"DeviceSettingDescription",type:"Undefined"},41996:{name:"SubjectDistanceRange",type:"Short"},42016:{name:"ImageUniqueID",type:"Ascii"},42032:{name:"CameraOwnerName",type:"Ascii"},42033:{name:"BodySerialNumber",type:"Ascii"},42034:{name:"LensSpecification",type:"Rational"},42035:{name:"LensMake",type:"Ascii"},42036:{name:"LensModel",type:"Ascii"},42037:{name:"LensSerialNumber",type:"Ascii"},42240:{name:"Gamma",type:"Rational"}},GPS:{0:{name:"GPSVersionID",type:"Byte"},1:{name:"GPSLatitudeRef",type:"Ascii"},2:{name:"GPSLatitude",type:"Rational"},3:{name:"GPSLongitudeRef",type:"Ascii"},4:{name:"GPSLongitude",type:"Rational"},5:{name:"GPSAltitudeRef",type:"Byte"},6:{name:"GPSAltitude",type:"Rational"},7:{name:"GPSTimeStamp",type:"Rational"},8:{name:"GPSSatellites",type:"Ascii"},9:{name:"GPSStatus",type:"Ascii"},10:{name:"GPSMeasureMode",type:"Ascii"},11:{name:"GPSDOP",type:"Rational"},12:{name:"GPSSpeedRef",type:"Ascii"},13:{name:"GPSSpeed",type:"Rational"},14:{name:"GPSTrackRef",type:"Ascii"},15:{name:"GPSTrack",type:"Rational"},16:{name:"GPSImgDirectionRef",type:"Ascii"},17:{name:"GPSImgDirection",type:"Rational"},18:{name:"GPSMapDatum",type:"Ascii"},19:{name:"GPSDestLatitudeRef",type:"Ascii"},20:{name:"GPSDestLatitude",type:"Rational"},21:{name:"GPSDestLongitudeRef",type:"Ascii"},22:{name:"GPSDestLongitude",type:"Rational"},23:{name:"GPSDestBearingRef",type:"Ascii"},24:{name:"GPSDestBearing",type:"Rational"},25:{name:"GPSDestDistanceRef",type:"Ascii"},26:{name:"GPSDestDistance",type:"Rational"},27:{name:"GPSProcessingMethod",type:"Undefined"},28:{name:"GPSAreaInformation",type:"Undefined"},29:{name:"GPSDateStamp",type:"Ascii"},30:{name:"GPSDifferential",type:"Short"},31:{name:"GPSHPositioningError",type:"Rational"}},Interop:{1:{name:"InteroperabilityIndex",type:"Ascii"}}};b["0th"]=b.Image,b["1st"]=b.Image,f.TAGS=b,f.ImageIFD={ProcessingSoftware:11,NewSubfileType:254,SubfileType:255,ImageWidth:256,ImageLength:257,BitsPerSample:258,Compression:259,PhotometricInterpretation:262,Threshholding:263,CellWidth:264,CellLength:265,FillOrder:266,DocumentName:269,ImageDescription:270,Make:271,Model:272,StripOffsets:273,Orientation:274,SamplesPerPixel:277,RowsPerStrip:278,StripByteCounts:279,XResolution:282,YResolution:283,PlanarConfiguration:284,GrayResponseUnit:290,GrayResponseCurve:291,T4Options:292,T6Options:293,ResolutionUnit:296,TransferFunction:301,Software:305,DateTime:306,Artist:315,HostComputer:316,Predictor:317,WhitePoint:318,PrimaryChromaticities:319,ColorMap:320,HalftoneHints:321,TileWidth:322,TileLength:323,TileOffsets:324,TileByteCounts:325,SubIFDs:330,InkSet:332,InkNames:333,NumberOfInks:334,DotRange:336,TargetPrinter:337,ExtraSamples:338,SampleFormat:339,SMinSampleValue:340,SMaxSampleValue:341,TransferRange:342,ClipPath:343,XClipPathUnits:344,YClipPathUnits:345,Indexed:346,JPEGTables:347,OPIProxy:351,JPEGProc:512,JPEGInterchangeFormat:513,JPEGInterchangeFormatLength:514,JPEGRestartInterval:515,JPEGLosslessPredictors:517,JPEGPointTransforms:518,JPEGQTables:519,JPEGDCTables:520,JPEGACTables:521,YCbCrCoefficients:529,YCbCrSubSampling:530,YCbCrPositioning:531,ReferenceBlackWhite:532,XMLPacket:700,Rating:18246,RatingPercent:18249,ImageID:32781,CFARepeatPatternDim:33421,CFAPattern:33422,BatteryLevel:33423,Copyright:33432,ExposureTime:33434,ImageResources:34377,ExifTag:34665,InterColorProfile:34675,GPSTag:34853,Interlace:34857,TimeZoneOffset:34858,SelfTimerMode:34859,FlashEnergy:37387,SpatialFrequencyResponse:37388,Noise:37389,FocalPlaneXResolution:37390,FocalPlaneYResolution:37391,FocalPlaneResolutionUnit:37392,ImageNumber:37393,SecurityClassification:37394,ImageHistory:37395,ExposureIndex:37397,TIFFEPStandardID:37398,SensingMethod:37399,XPTitle:40091,XPComment:40092,XPAuthor:40093,XPKeywords:40094,XPSubject:40095,PrintImageMatching:50341,DNGVersion:50706,DNGBackwardVersion:50707,UniqueCameraModel:50708,LocalizedCameraModel:50709,CFAPlaneColor:50710,CFALayout:50711,LinearizationTable:50712,BlackLevelRepeatDim:50713,BlackLevel:50714,BlackLevelDeltaH:50715,BlackLevelDeltaV:50716,WhiteLevel:50717,DefaultScale:50718,DefaultCropOrigin:50719,DefaultCropSize:50720,ColorMatrix1:50721,ColorMatrix2:50722,CameraCalibration1:50723,CameraCalibration2:50724,ReductionMatrix1:50725,ReductionMatrix2:50726,AnalogBalance:50727,AsShotNeutral:50728,AsShotWhiteXY:50729,BaselineExposure:50730,BaselineNoise:50731,BaselineSharpness:50732,BayerGreenSplit:50733,LinearResponseLimit:50734,CameraSerialNumber:50735,LensInfo:50736,ChromaBlurRadius:50737,AntiAliasStrength:50738,ShadowScale:50739,DNGPrivateData:50740,MakerNoteSafety:50741,CalibrationIlluminant1:50778,CalibrationIlluminant2:50779,BestQualityScale:50780,RawDataUniqueID:50781,OriginalRawFileName:50827,OriginalRawFileData:50828,ActiveArea:50829,MaskedAreas:50830,AsShotICCProfile:50831,AsShotPreProfileMatrix:50832,CurrentICCProfile:50833,CurrentPreProfileMatrix:50834,ColorimetricReference:50879,CameraCalibrationSignature:50931,ProfileCalibrationSignature:50932,AsShotProfileName:50934,NoiseReductionApplied:50935,ProfileName:50936,ProfileHueSatMapDims:50937,ProfileHueSatMapData1:50938,ProfileHueSatMapData2:50939,ProfileToneCurve:50940,ProfileEmbedPolicy:50941,ProfileCopyright:50942,ForwardMatrix1:50964,ForwardMatrix2:50965,PreviewApplicationName:50966,PreviewApplicationVersion:50967,PreviewSettingsName:50968,PreviewSettingsDigest:50969,PreviewColorSpace:50970,PreviewDateTime:50971,RawImageDigest:50972,OriginalRawFileDigest:50973,SubTileBlockSize:50974,RowInterleaveFactor:50975,ProfileLookTableDims:50981,ProfileLookTableData:50982,OpcodeList1:51008,OpcodeList2:51009,OpcodeList3:51022,NoiseProfile:51041},f.ExifIFD={ExposureTime:33434,FNumber:33437,ExposureProgram:34850,SpectralSensitivity:34852,ISOSpeedRatings:34855,OECF:34856,SensitivityType:34864,StandardOutputSensitivity:34865,RecommendedExposureIndex:34866,ISOSpeed:34867,ISOSpeedLatitudeyyy:34868,ISOSpeedLatitudezzz:34869,ExifVersion:36864,DateTimeOriginal:36867,DateTimeDigitized:36868,ComponentsConfiguration:37121,CompressedBitsPerPixel:37122,ShutterSpeedValue:37377,ApertureValue:37378,BrightnessValue:37379,ExposureBiasValue:37380,MaxApertureValue:37381,SubjectDistance:37382,MeteringMode:37383,LightSource:37384,Flash:37385,FocalLength:37386,SubjectArea:37396,MakerNote:37500,UserComment:37510,SubSecTime:37520,SubSecTimeOriginal:37521,SubSecTimeDigitized:37522,FlashpixVersion:40960,ColorSpace:40961,PixelXDimension:40962,PixelYDimension:40963,RelatedSoundFile:40964,InteroperabilityTag:40965,FlashEnergy:41483,SpatialFrequencyResponse:41484,FocalPlaneXResolution:41486,FocalPlaneYResolution:41487,FocalPlaneResolutionUnit:41488,SubjectLocation:41492,ExposureIndex:41493,SensingMethod:41495,FileSource:41728,SceneType:41729,CFAPattern:41730,CustomRendered:41985,ExposureMode:41986,WhiteBalance:41987,DigitalZoomRatio:41988,FocalLengthIn35mmFilm:41989,SceneCaptureType:41990,GainControl:41991,Contrast:41992,Saturation:41993,Sharpness:41994,DeviceSettingDescription:41995,SubjectDistanceRange:41996,ImageUniqueID:42016,CameraOwnerName:42032,BodySerialNumber:42033,LensSpecification:42034,LensMake:42035,LensModel:42036,LensSerialNumber:42037,Gamma:42240},f.GPSIFD={GPSVersionID:0,GPSLatitudeRef:1,GPSLatitude:2,GPSLongitudeRef:3,GPSLongitude:4,GPSAltitudeRef:5,GPSAltitude:6,GPSTimeStamp:7,GPSSatellites:8,GPSStatus:9,GPSMeasureMode:10,GPSDOP:11,GPSSpeedRef:12,GPSSpeed:13,GPSTrackRef:14,GPSTrack:15,GPSImgDirectionRef:16,GPSImgDirection:17,GPSMapDatum:18,GPSDestLatitudeRef:19,GPSDestLatitude:20,GPSDestLongitudeRef:21,GPSDestLongitude:22,GPSDestBearingRef:23,GPSDestBearing:24,GPSDestDistanceRef:25,GPSDestDistance:26,GPSProcessingMethod:27,GPSAreaInformation:28,GPSDateStamp:29,GPSDifferential:30,GPSHPositioningError:31},f.InteropIFD={InteroperabilityIndex:1},f.GPSHelper={degToDmsRational:function(e){var t=e%1*60,i=t%1*60;return[[Math.floor(e),1],[Math.floor(t),1],[Math.round(100*i),100]]}},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=f),exports.piexif=f):window.piexif=f}(),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.DOMPurify=t()}(this,function(){"use strict";function e(e,t){for(var i=t.length;i--;)"string"==typeof t[i]&&(t[i]=t[i].toLowerCase()),e[t[i]]=!0;return e}function t(e){var t={},i=void 0;for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}function i(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}function n(){var x=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C(),S=function(e){return n(e)};if(S.version="1.0.7",S.removed=[],!x||!x.document||9!==x.document.nodeType)return S.isSupported=!1,S;var k=x.document,T=!1,_=!1,E=x.document,I=x.DocumentFragment,$=x.HTMLTemplateElement,D=x.Node,P=x.NodeFilter,A=x.NamedNodeMap,O=void 0===A?x.NamedNodeMap||x.MozNamedAttrMap:A,R=x.Text,L=x.Comment,F=x.DOMParser;if("function"==typeof $){var z=E.createElement("template");z.content&&z.content.ownerDocument&&(E=z.content.ownerDocument)}var M=E,j=M.implementation,N=M.createNodeIterator,B=M.getElementsByTagName,U=M.createDocumentFragment,H=k.importNode,G={};S.isSupported=j&&void 0!==j.createHTMLDocument&&9!==E.documentMode;var W=u,q=f,V=m,Z=g,Y=b,X=w,Q=v,J=null,K=e({},[].concat(i(a),i(o),i(r),i(s),i(l))),ee=null,te=e({},[].concat(i(d),i(c),i(p),i(h))),ie=null,ne=null,ae=!0,oe=!0,re=!1,se=!1,le=!1,de=!1,ce=!1,pe=!1,he=!1,ue=!1,fe=!1,me=!0,ge=!0,ve=!1,be={},we=e({},["audio","head","math","script","style","template","svg","video"]),ye=e({},["audio","video","img","source","image"]),Ce=e({},["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"]),xe=null,Se=E.createElement("form"),ke=function(n){"object"!==(void 0===n?"undefined":y(n))&&(n={}),J="ALLOWED_TAGS"in n?e({},n.ALLOWED_TAGS):K,ee="ALLOWED_ATTR"in n?e({},n.ALLOWED_ATTR):te,ie="FORBID_TAGS"in n?e({},n.FORBID_TAGS):{},ne="FORBID_ATTR"in n?e({},n.FORBID_ATTR):{},be="USE_PROFILES"in n&&n.USE_PROFILES,ae=!1!==n.ALLOW_ARIA_ATTR,oe=!1!==n.ALLOW_DATA_ATTR,re=n.ALLOW_UNKNOWN_PROTOCOLS||!1,se=n.SAFE_FOR_JQUERY||!1,le=n.SAFE_FOR_TEMPLATES||!1,de=n.WHOLE_DOCUMENT||!1,he=n.RETURN_DOM||!1,ue=n.RETURN_DOM_FRAGMENT||!1,fe=n.RETURN_DOM_IMPORT||!1,pe=n.FORCE_BODY||!1,me=!1!==n.SANITIZE_DOM,ge=!1!==n.KEEP_CONTENT,ve=n.IN_PLACE||!1,Q=n.ALLOWED_URI_REGEXP||Q,le&&(oe=!1),ue&&(he=!0),be&&(J=e({},[].concat(i(l))),ee=[],!0===be.html&&(e(J,a),e(ee,d)),!0===be.svg&&(e(J,o),e(ee,c),e(ee,h)),!0===be.svgFilters&&(e(J,r),e(ee,c),e(ee,h)),!0===be.mathMl&&(e(J,s),e(ee,p),e(ee,h))),n.ADD_TAGS&&(J===K&&(J=t(J)),e(J,n.ADD_TAGS)),n.ADD_ATTR&&(ee===te&&(ee=t(ee)),e(ee,n.ADD_ATTR)),n.ADD_URI_SAFE_ATTR&&e(Ce,n.ADD_URI_SAFE_ATTR),ge&&(J["#text"]=!0),de&&e(J,["html","head","body"]),J.table&&e(J,["tbody"]),Object&&"freeze"in Object&&Object.freeze(n),xe=n},Te=function(e){S.removed.push({element:e});try{e.parentNode.removeChild(e)}catch(t){e.outerHTML=""}},_e=function(e,t){try{S.removed.push({attribute:t.getAttributeNode(e),from:t})}catch(e){S.removed.push({attribute:null,from:t})}t.removeAttribute(e)},Ee=function(t){var i=void 0;if(pe&&(t="<remove></remove>"+t),T)try{i=(new F).parseFromString(t,"text/html")}catch(e){}if(_&&e(ie,["title"]),!i||!i.documentElement){i=j.createHTMLDocument("");var n=i,a=n.body;a.parentNode.removeChild(a.parentNode.firstElementChild),a.outerHTML=t}return B.call(i,de?"html":"body")[0]};S.isSupported&&(function(){try{Ee('<svg><p><style><img src="</style><img src=x onerror=alert(1)//">').querySelector("svg img")&&(T=!0)}catch(e){}}(),function(){try{Ee("<x/><title>&lt;/title&gt;&lt;img&gt;").querySelector("title").textContent.match(/<\/title/)&&(_=!0)}catch(e){}}());var Ie=function(e){return N.call(e.ownerDocument||e,e,P.SHOW_ELEMENT|P.SHOW_COMMENT|P.SHOW_TEXT,function(){return P.FILTER_ACCEPT},!1)},$e=function(e){return!(e instanceof R||e instanceof L)&&!("string"==typeof e.nodeName&&"string"==typeof e.textContent&&"function"==typeof e.removeChild&&e.attributes instanceof O&&"function"==typeof e.removeAttribute&&"function"==typeof e.setAttribute)},De=function(e){return"object"===(void 0===D?"undefined":y(D))?e instanceof D:e&&"object"===(void 0===e?"undefined":y(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},Pe=function(e,t,i){G[e]&&G[e].forEach(function(e){e.call(S,t,i,xe)})},Ae=function(e){var t=void 0;if(Pe("beforeSanitizeElements",e,null),$e(e))return Te(e),!0;var i=e.nodeName.toLowerCase();if(Pe("uponSanitizeElement",e,{tagName:i,allowedTags:J}),!J[i]||ie[i]){if(ge&&!we[i]&&"function"==typeof e.insertAdjacentHTML)try{e.insertAdjacentHTML("AfterEnd",e.innerHTML)}catch(e){}return Te(e),!0}return!se||e.firstElementChild||e.content&&e.content.firstElementChild||!/</g.test(e.textContent)||(S.removed.push({element:e.cloneNode()}),e.innerHTML?e.innerHTML=e.innerHTML.replace(/</g,"&lt;"):e.innerHTML=e.textContent.replace(/</g,"&lt;")),le&&3===e.nodeType&&(t=e.textContent,t=t.replace(W," "),t=t.replace(q," "),e.textContent!==t&&(S.removed.push({element:e.cloneNode()}),e.textContent=t)),Pe("afterSanitizeElements",e,null),!1},Oe=function(e,t,i){if(me&&("id"===t||"name"===t)&&(i in E||i in Se))return!1;if(le&&(i=i.replace(W," "),i=i.replace(q," ")),oe&&V.test(t));else if(ae&&Z.test(t));else{if(!ee[t]||ne[t])return!1;if(Ce[t]);else if(Q.test(i.replace(X,"")));else if("src"!==t&&"xlink:href"!==t||0!==i.indexOf("data:")||!ye[e]){if(re&&!Y.test(i.replace(X,"")));else if(i)return!1}else;}return!0},Re=function(e){var t=void 0,i=void 0,n=void 0,a=void 0,o=void 0;Pe("beforeSanitizeAttributes",e,null);var r=e.attributes;if(r){var s={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ee};for(o=r.length;o--;){t=r[o];var l=t,d=l.name;if(i=t.value.trim(),n=d.toLowerCase(),s.attrName=n,s.attrValue=i,s.keepAttr=!0,Pe("uponSanitizeAttribute",e,s),i=s.attrValue,"name"===n&&"IMG"===e.nodeName&&r.id)a=r.id,r=Array.prototype.slice.apply(r),_e("id",e),_e(d,e),r.indexOf(a)>o&&e.setAttribute("id",a.value);else{if("INPUT"===e.nodeName&&"type"===n&&"file"===i&&(ee[n]||!ne[n]))continue;"id"===d&&e.setAttribute(d,""),_e(d,e)}if(s.keepAttr){var c=e.nodeName.toLowerCase();if(Oe(c,n,i))try{e.setAttribute(d,i),S.removed.pop()}catch(e){}}}Pe("afterSanitizeAttributes",e,null)}},Le=function e(t){var i=void 0,n=Ie(t);for(Pe("beforeSanitizeShadowDOM",t,null);i=n.nextNode();)Pe("uponSanitizeShadowNode",i,null),Ae(i)||(i.content instanceof I&&e(i.content),Re(i));Pe("afterSanitizeShadowDOM",t,null)};return S.sanitize=function(e,t){var i=void 0,n=void 0,a=void 0,o=void 0,r=void 0;if(e||(e="\x3c!--\x3e"),"string"!=typeof e&&!De(e)){if("function"!=typeof e.toString)throw new TypeError("toString is not a function");if("string"!=typeof(e=e.toString()))throw new TypeError("dirty is not a string, aborting")}if(!S.isSupported){if("object"===y(x.toStaticHTML)||"function"==typeof x.toStaticHTML){if("string"==typeof e)return x.toStaticHTML(e);if(De(e))return x.toStaticHTML(e.outerHTML)}return e}if(ce||ke(t),S.removed=[],ve);else if(e instanceof D)i=Ee("\x3c!--\x3e"),n=i.ownerDocument.importNode(e,!0),1===n.nodeType&&"BODY"===n.nodeName?i=n:i.appendChild(n);else{if(!he&&!de&&-1===e.indexOf("<"))return e;if(!(i=Ee(e)))return he?null:""}i&&pe&&Te(i.firstChild);for(var s=Ie(ve?e:i);a=s.nextNode();)3===a.nodeType&&a===o||Ae(a)||(a.content instanceof I&&Le(a.content),Re(a),o=a);if(ve)return e;if(he){if(ue)for(r=U.call(i.ownerDocument);i.firstChild;)r.appendChild(i.firstChild);else r=i;return fe&&(r=H.call(k,r,!0)),r}return de?i.outerHTML:i.innerHTML},S.setConfig=function(e){ke(e),ce=!0},S.clearConfig=function(){xe=null,ce=!1},S.isValidAttribute=function(e,t,i){xe||ke({});var n=e.toLowerCase(),a=t.toLowerCase();return Oe(n,a,i)},S.addHook=function(e,t){"function"==typeof t&&(G[e]=G[e]||[],G[e].push(t))},S.removeHook=function(e){G[e]&&G[e].pop()},S.removeHooks=function(e){G[e]&&(G[e]=[])},S.removeAllHooks=function(){G={}},S}var a=["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"],o=["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","audio","canvas","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","video","view","vkern"],r=["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"],s=["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmuliscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mpspace","msqrt","mystyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"],l=["#text"],d=["accept","action","align","alt","autocomplete","background","bgcolor","border","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","coords","crossorigin","datetime","default","dir","disabled","download","enctype","face","for","headers","height","hidden","high","href","hreflang","id","integrity","ismap","label","lang","list","loop","low","max","maxlength","media","method","min","multiple","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","type","usemap","valign","value","width","xmlns"],c=["accent-height","accumulate","additivive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"],p=["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"],h=["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"],u=/\{\{[\s\S]*|[\s\S]*\}\}/gm,f=/<%[\s\S]*|[\s\S]*%>/gm,m=/^data-[\-\w.\u00B7-\uFFFF]/,g=/^aria-[\-\w]+$/,v=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,b=/^(?:\w+script|data):/i,w=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C=function(){return"undefined"==typeof window?null:window};return n()}),function(e){"use strict";if("function"==typeof define&&define.amd)define(["jquery","moment"],e);else if("object"==typeof exports)module.exports=e(require("jquery"),require("moment"));else{if("undefined"==typeof jQuery)throw"bootstrap-datetimepicker requires jQuery to be loaded first";if("undefined"==typeof moment)throw"bootstrap-datetimepicker requires Moment.js to be loaded first";e(jQuery,moment)}}(function(e,t){"use strict";if(!t)throw new Error("bootstrap-datetimepicker requires Moment.js to be loaded first");var i=function(i,n){var a,o,r,s,l,d,c,p={},h=!0,u=!1,f=!1,m=0,g=[{clsName:"days",navFnc:"M",navStep:1},{clsName:"months",navFnc:"y",navStep:1},{clsName:"years",navFnc:"y",navStep:10},{clsName:"decades",navFnc:"y",navStep:100}],v=["days","months","years","decades"],b=["top","bottom","auto"],w=["left","right","auto"],y=["default","top","bottom"],C={up:38,38:"up",down:40,40:"down",left:37,37:"left",right:39,39:"right",tab:9,9:"tab",escape:27,27:"escape",enter:13,13:"enter",pageUp:33,33:"pageUp",pageDown:34,34:"pageDown",shift:16,16:"shift",control:17,17:"control",space:32,32:"space",t:84,84:"t",delete:46,46:"delete"},x={},S=function(){return void 0!==t.tz&&void 0!==n.timeZone&&null!==n.timeZone&&""!==n.timeZone},k=function(e){var i
;return i=void 0===e||null===e?t():t.isDate(e)||t.isMoment(e)?t(e):S()?t.tz(e,d,n.useStrict,n.timeZone):t(e,d,n.useStrict),S()&&i.tz(n.timeZone),i},T=function(e){if("string"!=typeof e||e.length>1)throw new TypeError("isEnabled expects a single character string parameter");switch(e){case"y":return-1!==l.indexOf("Y");case"M":return-1!==l.indexOf("M");case"d":return-1!==l.toLowerCase().indexOf("d");case"h":case"H":return-1!==l.toLowerCase().indexOf("h");case"m":return-1!==l.indexOf("m");case"s":return-1!==l.indexOf("s");default:return!1}},_=function(){return T("h")||T("m")||T("s")},E=function(){return T("y")||T("M")||T("d")},I=function(){var t=e("<thead>").append(e("<tr>").append(e("<th>").addClass("prev").attr("data-action","previous").append(e("<span>").addClass(n.icons.previous))).append(e("<th>").addClass("picker-switch").attr("data-action","pickerSwitch").attr("colspan",n.calendarWeeks?"6":"5")).append(e("<th>").addClass("next").attr("data-action","next").append(e("<span>").addClass(n.icons.next)))),i=e("<tbody>").append(e("<tr>").append(e("<td>").attr("colspan",n.calendarWeeks?"8":"7")));return[e("<div>").addClass("datepicker-days").append(e("<table>").addClass("table-condensed").append(t).append(e("<tbody>"))),e("<div>").addClass("datepicker-months").append(e("<table>").addClass("table-condensed").append(t.clone()).append(i.clone())),e("<div>").addClass("datepicker-years").append(e("<table>").addClass("table-condensed").append(t.clone()).append(i.clone())),e("<div>").addClass("datepicker-decades").append(e("<table>").addClass("table-condensed").append(t.clone()).append(i.clone()))]},$=function(){var t=e("<tr>"),i=e("<tr>"),a=e("<tr>");return T("h")&&(t.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1",title:n.tooltips.incrementHour}).addClass("btn").attr("data-action","incrementHours").append(e("<span>").addClass(n.icons.up)))),i.append(e("<td>").append(e("<span>").addClass("timepicker-hour").attr({"data-time-component":"hours",title:n.tooltips.pickHour}).attr("data-action","showHours"))),a.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1",title:n.tooltips.decrementHour}).addClass("btn").attr("data-action","decrementHours").append(e("<span>").addClass(n.icons.down))))),T("m")&&(T("h")&&(t.append(e("<td>").addClass("separator")),i.append(e("<td>").addClass("separator").html(":")),a.append(e("<td>").addClass("separator"))),t.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1",title:n.tooltips.incrementMinute}).addClass("btn").attr("data-action","incrementMinutes").append(e("<span>").addClass(n.icons.up)))),i.append(e("<td>").append(e("<span>").addClass("timepicker-minute").attr({"data-time-component":"minutes",title:n.tooltips.pickMinute}).attr("data-action","showMinutes"))),a.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1",title:n.tooltips.decrementMinute}).addClass("btn").attr("data-action","decrementMinutes").append(e("<span>").addClass(n.icons.down))))),T("s")&&(T("m")&&(t.append(e("<td>").addClass("separator")),i.append(e("<td>").addClass("separator").html(":")),a.append(e("<td>").addClass("separator"))),t.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1",title:n.tooltips.incrementSecond}).addClass("btn").attr("data-action","incrementSeconds").append(e("<span>").addClass(n.icons.up)))),i.append(e("<td>").append(e("<span>").addClass("timepicker-second").attr({"data-time-component":"seconds",title:n.tooltips.pickSecond}).attr("data-action","showSeconds"))),a.append(e("<td>").append(e("<a>").attr({href:"#",tabindex:"-1",title:n.tooltips.decrementSecond}).addClass("btn").attr("data-action","decrementSeconds").append(e("<span>").addClass(n.icons.down))))),s||(t.append(e("<td>").addClass("separator")),i.append(e("<td>").append(e("<button>").addClass("btn btn-primary").attr({"data-action":"togglePeriod",tabindex:"-1",title:n.tooltips.togglePeriod}))),a.append(e("<td>").addClass("separator"))),e("<div>").addClass("timepicker-picker").append(e("<table>").addClass("table-condensed").append([t,i,a]))},D=function(){var t=e("<div>").addClass("timepicker-hours").append(e("<table>").addClass("table-condensed")),i=e("<div>").addClass("timepicker-minutes").append(e("<table>").addClass("table-condensed")),n=e("<div>").addClass("timepicker-seconds").append(e("<table>").addClass("table-condensed")),a=[$()];return T("h")&&a.push(t),T("m")&&a.push(i),T("s")&&a.push(n),a},P=function(){var t=[];return n.showTodayButton&&t.push(e("<td>").append(e("<a>").attr({"data-action":"today",title:n.tooltips.today}).append(e("<span>").addClass(n.icons.today)))),!n.sideBySide&&E()&&_()&&t.push(e("<td>").append(e("<a>").attr({"data-action":"togglePicker",title:n.tooltips.selectTime}).append(e("<span>").addClass(n.icons.time)))),n.showClear&&t.push(e("<td>").append(e("<a>").attr({"data-action":"clear",title:n.tooltips.clear}).append(e("<span>").addClass(n.icons.clear)))),n.showClose&&t.push(e("<td>").append(e("<a>").attr({"data-action":"close",title:n.tooltips.close}).append(e("<span>").addClass(n.icons.close)))),e("<table>").addClass("table-condensed").append(e("<tbody>").append(e("<tr>").append(t)))},A=function(){var t=e("<div>").addClass("bootstrap-datetimepicker-widget dropdown-menu"),i=e("<div>").addClass("datepicker").append(I()),a=e("<div>").addClass("timepicker").append(D()),o=e("<ul>").addClass("list-unstyled"),r=e("<li>").addClass("picker-switch"+(n.collapse?" accordion-toggle":"")).append(P());return n.inline&&t.removeClass("dropdown-menu"),s&&t.addClass("usetwentyfour"),T("s")&&!s&&t.addClass("wider"),n.sideBySide&&E()&&_()?(t.addClass("timepicker-sbs"),"top"===n.toolbarPlacement&&t.append(r),t.append(e("<div>").addClass("row").append(i.addClass("col-md-6")).append(a.addClass("col-md-6"))),"bottom"===n.toolbarPlacement&&t.append(r),t):("top"===n.toolbarPlacement&&o.append(r),E()&&o.append(e("<li>").addClass(n.collapse&&_()?"collapse in":"").append(i)),"default"===n.toolbarPlacement&&o.append(r),_()&&o.append(e("<li>").addClass(n.collapse&&E()?"collapse":"").append(a)),"bottom"===n.toolbarPlacement&&o.append(r),t.append(o))},O=function(){var t,a=(u||i).position(),o=(u||i).offset(),r=n.widgetPositioning.vertical,s=n.widgetPositioning.horizontal;if(n.widgetParent)t=n.widgetParent.append(f);else if(i.is("input"))t=i.after(f).parent();else{if(n.inline)return void(t=i.append(f));t=i,i.children().first().after(f)}if("auto"===r&&(r=o.top+1.5*f.height()>=e(window).height()+e(window).scrollTop()&&f.height()+i.outerHeight()<o.top?"top":"bottom"),"auto"===s&&(s=t.width()<o.left+f.outerWidth()/2&&o.left+f.outerWidth()>e(window).width()?"right":"left"),"top"===r?f.addClass("top").removeClass("bottom"):f.addClass("bottom").removeClass("top"),"right"===s?f.addClass("pull-right"):f.removeClass("pull-right"),"static"===t.css("position")&&(t=t.parents().filter(function(){return"static"!==e(this).css("position")}).first()),0===t.length)throw new Error("datetimepicker component should be placed within a non-static positioned container");f.css({top:"top"===r?"auto":a.top+i.outerHeight(),bottom:"top"===r?t.outerHeight()-(t===i?0:a.top):"auto",left:"left"===s?t===i?0:a.left:"auto",right:"left"===s?"auto":t.outerWidth()-i.outerWidth()-(t===i?0:a.left)})},R=function(e){"dp.change"===e.type&&(e.date&&e.date.isSame(e.oldDate)||!e.date&&!e.oldDate)||i.trigger(e)},L=function(e){"y"===e&&(e="YYYY"),R({type:"dp.update",change:e,viewDate:o.clone()})},F=function(e){f&&(e&&(c=Math.max(m,Math.min(3,c+e))),f.find(".datepicker > div").hide().filter(".datepicker-"+g[c].clsName).show())},z=function(){var t=e("<tr>"),i=o.clone().startOf("w").startOf("d");for(!0===n.calendarWeeks&&t.append(e("<th>").addClass("cw").text("#"));i.isBefore(o.clone().endOf("w"));)t.append(e("<th>").addClass("dow").text(i.format("dd"))),i.add(1,"d");f.find(".datepicker-days thead").append(t)},M=function(e){return!0===n.disabledDates[e.format("YYYY-MM-DD")]},j=function(e){return!0===n.enabledDates[e.format("YYYY-MM-DD")]},N=function(e){return!0===n.disabledHours[e.format("H")]},B=function(e){return!0===n.enabledHours[e.format("H")]},U=function(t,i){if(!t.isValid())return!1;if(n.disabledDates&&"d"===i&&M(t))return!1;if(n.enabledDates&&"d"===i&&!j(t))return!1;if(n.minDate&&t.isBefore(n.minDate,i))return!1;if(n.maxDate&&t.isAfter(n.maxDate,i))return!1;if(n.daysOfWeekDisabled&&"d"===i&&-1!==n.daysOfWeekDisabled.indexOf(t.day()))return!1;if(n.disabledHours&&("h"===i||"m"===i||"s"===i)&&N(t))return!1;if(n.enabledHours&&("h"===i||"m"===i||"s"===i)&&!B(t))return!1;if(n.disabledTimeIntervals&&("h"===i||"m"===i||"s"===i)){var a=!1;if(e.each(n.disabledTimeIntervals,function(){if(t.isBetween(this[0],this[1]))return a=!0,!1}),a)return!1}return!0},H=function(){for(var t=[],i=o.clone().startOf("y").startOf("d");i.isSame(o,"y");)t.push(e("<span>").attr("data-action","selectMonth").addClass("month").text(i.format("MMM"))),i.add(1,"M");f.find(".datepicker-months td").empty().append(t)},G=function(){var t=f.find(".datepicker-months"),i=t.find("th"),r=t.find("tbody").find("span");i.eq(0).find("span").attr("title",n.tooltips.prevYear),i.eq(1).attr("title",n.tooltips.selectYear),i.eq(2).find("span").attr("title",n.tooltips.nextYear),t.find(".disabled").removeClass("disabled"),U(o.clone().subtract(1,"y"),"y")||i.eq(0).addClass("disabled"),i.eq(1).text(o.year()),U(o.clone().add(1,"y"),"y")||i.eq(2).addClass("disabled"),r.removeClass("active"),a.isSame(o,"y")&&!h&&r.eq(a.month()).addClass("active"),r.each(function(t){U(o.clone().month(t),"M")||e(this).addClass("disabled")})},W=function(){var e=f.find(".datepicker-years"),t=e.find("th"),i=o.clone().subtract(5,"y"),r=o.clone().add(6,"y"),s="";for(t.eq(0).find("span").attr("title",n.tooltips.prevDecade),t.eq(1).attr("title",n.tooltips.selectDecade),t.eq(2).find("span").attr("title",n.tooltips.nextDecade),e.find(".disabled").removeClass("disabled"),n.minDate&&n.minDate.isAfter(i,"y")&&t.eq(0).addClass("disabled"),t.eq(1).text(i.year()+"-"+r.year()),n.maxDate&&n.maxDate.isBefore(r,"y")&&t.eq(2).addClass("disabled");!i.isAfter(r,"y");)s+='<span data-action="selectYear" class="year'+(i.isSame(a,"y")&&!h?" active":"")+(U(i,"y")?"":" disabled")+'">'+i.year()+"</span>",i.add(1,"y");e.find("td").html(s)},q=function(){var e,i=f.find(".datepicker-decades"),r=i.find("th"),s=t({y:o.year()-o.year()%100-1}),l=s.clone().add(100,"y"),d=s.clone(),c=!1,p=!1,h="";for(r.eq(0).find("span").attr("title",n.tooltips.prevCentury),r.eq(2).find("span").attr("title",n.tooltips.nextCentury),i.find(".disabled").removeClass("disabled"),(s.isSame(t({y:1900}))||n.minDate&&n.minDate.isAfter(s,"y"))&&r.eq(0).addClass("disabled"),r.eq(1).text(s.year()+"-"+l.year()),(s.isSame(t({y:2e3}))||n.maxDate&&n.maxDate.isBefore(l,"y"))&&r.eq(2).addClass("disabled");!s.isAfter(l,"y");)e=s.year()+12,c=n.minDate&&n.minDate.isAfter(s,"y")&&n.minDate.year()<=e,p=n.maxDate&&n.maxDate.isAfter(s,"y")&&n.maxDate.year()<=e,h+='<span data-action="selectDecade" class="decade'+(a.isAfter(s)&&a.year()<=e?" active":"")+(U(s,"y")||c||p?"":" disabled")+'" data-selection="'+(s.year()+6)+'">'+(s.year()+1)+" - "+(s.year()+12)+"</span>",s.add(12,"y");h+="<span></span><span></span><span></span>",i.find("td").html(h),r.eq(1).text(d.year()+1+"-"+s.year())},V=function(){var t,i,r,s=f.find(".datepicker-days"),l=s.find("th"),d=[],c=[];if(E()){for(l.eq(0).find("span").attr("title",n.tooltips.prevMonth),l.eq(1).attr("title",n.tooltips.selectMonth),l.eq(2).find("span").attr("title",n.tooltips.nextMonth),s.find(".disabled").removeClass("disabled"),l.eq(1).text(o.format(n.dayViewHeaderFormat)),U(o.clone().subtract(1,"M"),"M")||l.eq(0).addClass("disabled"),U(o.clone().add(1,"M"),"M")||l.eq(2).addClass("disabled"),t=o.clone().startOf("M").startOf("w").startOf("d"),r=0;r<42;r++)0===t.weekday()&&(i=e("<tr>"),n.calendarWeeks&&i.append('<td class="cw">'+t.week()+"</td>"),d.push(i)),c=["day"],t.isBefore(o,"M")&&c.push("old"),t.isAfter(o,"M")&&c.push("new"),t.isSame(a,"d")&&!h&&c.push("active"),U(t,"d")||c.push("disabled"),t.isSame(k(),"d")&&c.push("today"),0!==t.day()&&6!==t.day()||c.push("weekend"),R({type:"dp.classify",date:t,classNames:c}),i.append('<td data-action="selectDay" data-day="'+t.format("L")+'" class="'+c.join(" ")+'">'+t.date()+"</td>"),t.add(1,"d");s.find("tbody").empty().append(d),G(),W(),q()}},Z=function(){var t=f.find(".timepicker-hours table"),i=o.clone().startOf("d"),n=[],a=e("<tr>");for(o.hour()>11&&!s&&i.hour(12);i.isSame(o,"d")&&(s||o.hour()<12&&i.hour()<12||o.hour()>11);)i.hour()%4==0&&(a=e("<tr>"),n.push(a)),a.append('<td data-action="selectHour" class="hour'+(U(i,"h")?"":" disabled")+'">'+i.format(s?"HH":"hh")+"</td>"),i.add(1,"h");t.empty().append(n)},Y=function(){for(var t=f.find(".timepicker-minutes table"),i=o.clone().startOf("h"),a=[],r=e("<tr>"),s=1===n.stepping?5:n.stepping;o.isSame(i,"h");)i.minute()%(4*s)==0&&(r=e("<tr>"),a.push(r)),r.append('<td data-action="selectMinute" class="minute'+(U(i,"m")?"":" disabled")+'">'+i.format("mm")+"</td>"),i.add(s,"m");t.empty().append(a)},X=function(){for(var t=f.find(".timepicker-seconds table"),i=o.clone().startOf("m"),n=[],a=e("<tr>");o.isSame(i,"m");)i.second()%20==0&&(a=e("<tr>"),n.push(a)),a.append('<td data-action="selectSecond" class="second'+(U(i,"s")?"":" disabled")+'">'+i.format("ss")+"</td>"),i.add(5,"s");t.empty().append(n)},Q=function(){var e,t,i=f.find(".timepicker span[data-time-component]");s||(e=f.find(".timepicker [data-action=togglePeriod]"),t=a.clone().add(a.hours()>=12?-12:12,"h"),e.text(a.format("A")),U(t,"h")?e.removeClass("disabled"):e.addClass("disabled")),i.filter("[data-time-component=hours]").text(a.format(s?"HH":"hh")),i.filter("[data-time-component=minutes]").text(a.format("mm")),i.filter("[data-time-component=seconds]").text(a.format("ss")),Z(),Y(),X()},J=function(){f&&(V(),Q())},K=function(e){var t=h?null:a;if(!e)return h=!0,r.val(""),i.data("date",""),R({type:"dp.change",date:!1,oldDate:t}),void J();if(e=e.clone().locale(n.locale),S()&&e.tz(n.timeZone),1!==n.stepping)for(e.minutes(Math.round(e.minutes()/n.stepping)*n.stepping).seconds(0);n.minDate&&e.isBefore(n.minDate);)e.add(n.stepping,"minutes");U(e)?(a=e,o=a.clone(),r.val(a.format(l)),i.data("date",a.format(l)),h=!1,J(),R({type:"dp.change",date:a.clone(),oldDate:t})):(n.keepInvalid?R({type:"dp.change",date:e,oldDate:t}):r.val(h?"":a.format(l)),R({type:"dp.error",date:e,oldDate:t}))},ee=function(){var t=!1;return f?(f.find(".collapse").each(function(){var i=e(this).data("collapse");return!i||!i.transitioning||(t=!0,!1)}),t?p:(u&&u.hasClass("btn")&&u.toggleClass("active"),f.hide(),e(window).off("resize",O),f.off("click","[data-action]"),f.off("mousedown",!1),f.remove(),f=!1,R({type:"dp.hide",date:a.clone()}),r.blur(),o=a.clone(),p)):p},te=function(){K(null)},ie=function(e){return void 0===n.parseInputDate?(!t.isMoment(e)||e instanceof Date)&&(e=k(e)):e=n.parseInputDate(e),e},ne={next:function(){var e=g[c].navFnc;o.add(g[c].navStep,e),V(),L(e)},previous:function(){var e=g[c].navFnc;o.subtract(g[c].navStep,e),V(),L(e)},pickerSwitch:function(){F(1)},selectMonth:function(t){var i=e(t.target).closest("tbody").find("span").index(e(t.target));o.month(i),c===m?(K(a.clone().year(o.year()).month(o.month())),n.inline||ee()):(F(-1),V()),L("M")},selectYear:function(t){var i=parseInt(e(t.target).text(),10)||0;o.year(i),c===m?(K(a.clone().year(o.year())),n.inline||ee()):(F(-1),V()),L("YYYY")},selectDecade:function(t){var i=parseInt(e(t.target).data("selection"),10)||0;o.year(i),c===m?(K(a.clone().year(o.year())),n.inline||ee()):(F(-1),V()),L("YYYY")},selectDay:function(t){var i=o.clone();e(t.target).is(".old")&&i.subtract(1,"M"),e(t.target).is(".new")&&i.add(1,"M"),K(i.date(parseInt(e(t.target).text(),10))),_()||n.keepOpen||n.inline||ee()},incrementHours:function(){var e=a.clone().add(1,"h");U(e,"h")&&K(e)},incrementMinutes:function(){var e=a.clone().add(n.stepping,"m");U(e,"m")&&K(e)},incrementSeconds:function(){var e=a.clone().add(1,"s");U(e,"s")&&K(e)},decrementHours:function(){var e=a.clone().subtract(1,"h");U(e,"h")&&K(e)},decrementMinutes:function(){var e=a.clone().subtract(n.stepping,"m");U(e,"m")&&K(e)},decrementSeconds:function(){var e=a.clone().subtract(1,"s");U(e,"s")&&K(e)},togglePeriod:function(){K(a.clone().add(a.hours()>=12?-12:12,"h"))},togglePicker:function(t){var i,a=e(t.target),o=a.closest("ul"),r=o.find(".in"),s=o.find(".collapse:not(.in)");if(r&&r.length){if((i=r.data("collapse"))&&i.transitioning)return;r.collapse?(r.collapse("hide"),s.collapse("show")):(r.removeClass("in"),s.addClass("in")),a.is("span")?a.toggleClass(n.icons.time+" "+n.icons.date):a.find("span").toggleClass(n.icons.time+" "+n.icons.date)}},showPicker:function(){f.find(".timepicker > div:not(.timepicker-picker)").hide(),f.find(".timepicker .timepicker-picker").show()},showHours:function(){f.find(".timepicker .timepicker-picker").hide(),f.find(".timepicker .timepicker-hours").show()},showMinutes:function(){f.find(".timepicker .timepicker-picker").hide(),f.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){f.find(".timepicker .timepicker-picker").hide(),f.find(".timepicker .timepicker-seconds").show()},selectHour:function(t){var i=parseInt(e(t.target).text(),10);s||(a.hours()>=12?12!==i&&(i+=12):12===i&&(i=0)),K(a.clone().hours(i)),ne.showPicker.call(p)},selectMinute:function(t){K(a.clone().minutes(parseInt(e(t.target).text(),10))),ne.showPicker.call(p)},selectSecond:function(t){K(a.clone().seconds(parseInt(e(t.target).text(),10))),ne.showPicker.call(p)},clear:te,today:function(){var e=k();U(e,"d")&&K(e)},close:ee},ae=function(t){return!e(t.currentTarget).is(".disabled")&&(ne[e(t.currentTarget).data("action")].apply(p,arguments),!1)},oe=function(){var t,i={year:function(e){return e.month(0).date(1).hours(0).seconds(0).minutes(0)},month:function(e){return e.date(1).hours(0).seconds(0).minutes(0)},day:function(e){return e.hours(0).seconds(0).minutes(0)},hour:function(e){return e.seconds(0).minutes(0)},minute:function(e){return e.seconds(0)}};return r.prop("disabled")||!n.ignoreReadonly&&r.prop("readonly")||f?p:(void 0!==r.val()&&0!==r.val().trim().length?K(ie(r.val().trim())):h&&n.useCurrent&&(n.inline||r.is("input")&&0===r.val().trim().length)&&(t=k(),"string"==typeof n.useCurrent&&(t=i[n.useCurrent](t)),K(t)),f=A(),z(),H(),f.find(".timepicker-hours").hide(),f.find(".timepicker-minutes").hide(),f.find(".timepicker-seconds").hide(),J(),F(),e(window).on("resize",O),f.on("click","[data-action]",ae),f.on("mousedown",!1),u&&u.hasClass("btn")&&u.toggleClass("active"),O(),f.show(),n.focusOnShow&&!r.is(":focus")&&r.focus(),R({type:"dp.show"}),p)},re=function(){return f?ee():oe()},se=function(e){var t,i,a,o,r=null,s=[],l={},d=e.which;x[d]="p";for(t in x)x.hasOwnProperty(t)&&"p"===x[t]&&(s.push(t),parseInt(t,10)!==d&&(l[t]=!0));for(t in n.keyBinds)if(n.keyBinds.hasOwnProperty(t)&&"function"==typeof n.keyBinds[t]&&(a=t.split(" "),a.length===s.length&&C[d]===a[a.length-1])){for(o=!0,i=a.length-2;i>=0;i--)if(!(C[a[i]]in l)){o=!1;break}if(o){r=n.keyBinds[t];break}}r&&(r.call(p,f),e.stopPropagation(),e.preventDefault())},le=function(e){x[e.which]="r",e.stopPropagation(),e.preventDefault()},de=function(t){var i=e(t.target).val().trim(),n=i?ie(i):null;return K(n),t.stopImmediatePropagation(),!1},ce=function(){r.off({change:de,blur:blur,keydown:se,keyup:le,focus:n.allowInputToggle?ee:""}),i.is("input")?r.off({focus:oe}):u&&(u.off("click",re),u.off("mousedown",!1))},pe=function(t){var i={};return e.each(t,function(){var e=ie(this);e.isValid()&&(i[e.format("YYYY-MM-DD")]=!0)}),!!Object.keys(i).length&&i},he=function(t){var i={};return e.each(t,function(){i[this]=!0}),!!Object.keys(i).length&&i},ue=function(){var e=n.format||"L LT";l=e.replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(e){return(a.localeData().longDateFormat(e)||e).replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(e){return a.localeData().longDateFormat(e)||e})}),d=n.extraFormats?n.extraFormats.slice():[],d.indexOf(e)<0&&d.indexOf(l)<0&&d.push(l),s=l.toLowerCase().indexOf("a")<1&&l.replace(/\[.*?\]/g,"").indexOf("h")<1,T("y")&&(m=2),T("M")&&(m=1),T("d")&&(m=0),c=Math.max(m,c),h||K(a)};if(p.destroy=function(){ee(),ce(),i.removeData("DateTimePicker"),i.removeData("date")},p.toggle=re,p.show=oe,p.hide=ee,p.disable=function(){return ee(),u&&u.hasClass("btn")&&u.addClass("disabled"),r.prop("disabled",!0),p},p.enable=function(){return u&&u.hasClass("btn")&&u.removeClass("disabled"),r.prop("disabled",!1),p},p.ignoreReadonly=function(e){if(0===arguments.length)return n.ignoreReadonly;if("boolean"!=typeof e)throw new TypeError("ignoreReadonly () expects a boolean parameter");return n.ignoreReadonly=e,p},p.options=function(t){if(0===arguments.length)return e.extend(!0,{},n);if(!(t instanceof Object))throw new TypeError("options() options parameter should be an object");return e.extend(!0,n,t),e.each(n,function(e,t){if(void 0===p[e])throw new TypeError("option "+e+" is not recognized!");p[e](t)}),p},p.date=function(e){if(0===arguments.length)return h?null:a.clone();if(!(null===e||"string"==typeof e||t.isMoment(e)||e instanceof Date))throw new TypeError("date() parameter must be one of [null, string, moment or Date]");return K(null===e?null:ie(e)),p},p.format=function(e){if(0===arguments.length)return n.format;if("string"!=typeof e&&("boolean"!=typeof e||!1!==e))throw new TypeError("format() expects a string or boolean:false parameter "+e);return n.format=e,l&&ue(),p},p.timeZone=function(e){if(0===arguments.length)return n.timeZone;if("string"!=typeof e)throw new TypeError("newZone() expects a string parameter");return n.timeZone=e,p},p.dayViewHeaderFormat=function(e){if(0===arguments.length)return n.dayViewHeaderFormat;if("string"!=typeof e)throw new TypeError("dayViewHeaderFormat() expects a string parameter");return n.dayViewHeaderFormat=e,p},p.extraFormats=function(e){if(0===arguments.length)return n.extraFormats;if(!1!==e&&!(e instanceof Array))throw new TypeError("extraFormats() expects an array or false parameter");return n.extraFormats=e,d&&ue(),p},p.disabledDates=function(t){if(0===arguments.length)return n.disabledDates?e.extend({},n.disabledDates):n.disabledDates;if(!t)return n.disabledDates=!1,J(),p;if(!(t instanceof Array))throw new TypeError("disabledDates() expects an array parameter");return n.disabledDates=pe(t),n.enabledDates=!1,J(),p},p.enabledDates=function(t){if(0===arguments.length)return n.enabledDates?e.extend({},n.enabledDates):n.enabledDates;if(!t)return n.enabledDates=!1,J(),p;if(!(t instanceof Array))throw new TypeError("enabledDates() expects an array parameter");return n.enabledDates=pe(t),n.disabledDates=!1,J(),p},p.daysOfWeekDisabled=function(e){if(0===arguments.length)return n.daysOfWeekDisabled.splice(0);if("boolean"==typeof e&&!e)return n.daysOfWeekDisabled=!1,J(),p;if(!(e instanceof Array))throw new TypeError("daysOfWeekDisabled() expects an array parameter");if(n.daysOfWeekDisabled=e.reduce(function(e,t){return t=parseInt(t,10),t>6||t<0||isNaN(t)?e:(-1===e.indexOf(t)&&e.push(t),e)},[]).sort(),n.useCurrent&&!n.keepInvalid){for(var t=0;!U(a,"d");){if(a.add(1,"d"),31===t)throw"Tried 31 times to find a valid date";t++}K(a)}return J(),p},p.maxDate=function(e){if(0===arguments.length)return n.maxDate?n.maxDate.clone():n.maxDate;if("boolean"==typeof e&&!1===e)return n.maxDate=!1,J(),p;"string"==typeof e&&("now"!==e&&"moment"!==e||(e=k()));var t=ie(e);if(!t.isValid())throw new TypeError("maxDate() Could not parse date parameter: "+e);if(n.minDate&&t.isBefore(n.minDate))throw new TypeError("maxDate() date parameter is before options.minDate: "+t.format(l));return n.maxDate=t,n.useCurrent&&!n.keepInvalid&&a.isAfter(e)&&K(n.maxDate),o.isAfter(t)&&(o=t.clone().subtract(n.stepping,"m")),J(),p},p.minDate=function(e){if(0===arguments.length)return n.minDate?n.minDate.clone():n.minDate;if("boolean"==typeof e&&!1===e)return n.minDate=!1,J(),p;"string"==typeof e&&("now"!==e&&"moment"!==e||(e=k()));var t=ie(e);if(!t.isValid())throw new TypeError("minDate() Could not parse date parameter: "+e);if(n.maxDate&&t.isAfter(n.maxDate))throw new TypeError("minDate() date parameter is after options.maxDate: "+t.format(l));return n.minDate=t,n.useCurrent&&!n.keepInvalid&&a.isBefore(e)&&K(n.minDate),o.isBefore(t)&&(o=t.clone().add(n.stepping,"m")),J(),p},p.defaultDate=function(e){if(0===arguments.length)return n.defaultDate?n.defaultDate.clone():n.defaultDate;if(!e)return n.defaultDate=!1,p;"string"==typeof e&&(e="now"===e||"moment"===e?k():k(e));var t=ie(e);if(!t.isValid())throw new TypeError("defaultDate() Could not parse date parameter: "+e);if(!U(t))throw new TypeError("defaultDate() date passed is invalid according to component setup validations");return n.defaultDate=t,(n.defaultDate&&n.inline||""===r.val().trim())&&K(n.defaultDate),p},p.locale=function(e){if(0===arguments.length)return n.locale;if(!t.localeData(e))throw new TypeError("locale() locale "+e+" is not loaded from moment locales!");return n.locale=e,a.locale(n.locale),o.locale(n.locale),l&&ue(),f&&(ee(),oe()),p},p.stepping=function(e){return 0===arguments.length?n.stepping:(e=parseInt(e,10),(isNaN(e)||e<1)&&(e=1),n.stepping=e,p)},p.useCurrent=function(e){var t=["year","month","day","hour","minute"];if(0===arguments.length)return n.useCurrent;if("boolean"!=typeof e&&"string"!=typeof e)throw new TypeError("useCurrent() expects a boolean or string parameter");if("string"==typeof e&&-1===t.indexOf(e.toLowerCase()))throw new TypeError("useCurrent() expects a string parameter of "+t.join(", "));return n.useCurrent=e,p},p.collapse=function(e){if(0===arguments.length)return n.collapse;if("boolean"!=typeof e)throw new TypeError("collapse() expects a boolean parameter");return n.collapse===e?p:(n.collapse=e,f&&(ee(),oe()),p)},p.icons=function(t){if(0===arguments.length)return e.extend({},n.icons);if(!(t instanceof Object))throw new TypeError("icons() expects parameter to be an Object");return e.extend(n.icons,t),f&&(ee(),oe()),p},p.tooltips=function(t){if(0===arguments.length)return e.extend({},n.tooltips);if(!(t instanceof Object))throw new TypeError("tooltips() expects parameter to be an Object");return e.extend(n.tooltips,t),f&&(ee(),oe()),p},p.useStrict=function(e){if(0===arguments.length)return n.useStrict;if("boolean"!=typeof e)throw new TypeError("useStrict() expects a boolean parameter");return n.useStrict=e,p},p.sideBySide=function(e){if(0===arguments.length)return n.sideBySide;if("boolean"!=typeof e)throw new TypeError("sideBySide() expects a boolean parameter");return n.sideBySide=e,f&&(ee(),oe()),p},p.viewMode=function(e){if(0===arguments.length)return n.viewMode;if("string"!=typeof e)throw new TypeError("viewMode() expects a string parameter");if(-1===v.indexOf(e))throw new TypeError("viewMode() parameter must be one of ("+v.join(", ")+") value");return n.viewMode=e,c=Math.max(v.indexOf(e),m),F(),p},p.toolbarPlacement=function(e){if(0===arguments.length)return n.toolbarPlacement;if("string"!=typeof e)throw new TypeError("toolbarPlacement() expects a string parameter");if(-1===y.indexOf(e))throw new TypeError("toolbarPlacement() parameter must be one of ("+y.join(", ")+") value");return n.toolbarPlacement=e,f&&(ee(),oe()),p},p.widgetPositioning=function(t){if(0===arguments.length)return e.extend({},n.widgetPositioning);if("[object Object]"!=={}.toString.call(t))throw new TypeError("widgetPositioning() expects an object variable");if(t.horizontal){if("string"!=typeof t.horizontal)throw new TypeError("widgetPositioning() horizontal variable must be a string");if(t.horizontal=t.horizontal.toLowerCase(),-1===w.indexOf(t.horizontal))throw new TypeError("widgetPositioning() expects horizontal parameter to be one of ("+w.join(", ")+")");n.widgetPositioning.horizontal=t.horizontal}if(t.vertical){if("string"!=typeof t.vertical)throw new TypeError("widgetPositioning() vertical variable must be a string");if(t.vertical=t.vertical.toLowerCase(),-1===b.indexOf(t.vertical))throw new TypeError("widgetPositioning() expects vertical parameter to be one of ("+b.join(", ")+")");n.widgetPositioning.vertical=t.vertical}return J(),p},p.calendarWeeks=function(e){if(0===arguments.length)return n.calendarWeeks;if("boolean"!=typeof e)throw new TypeError("calendarWeeks() expects parameter to be a boolean value");return n.calendarWeeks=e,J(),p},p.showTodayButton=function(e){if(0===arguments.length)return n.showTodayButton;if("boolean"!=typeof e)throw new TypeError("showTodayButton() expects a boolean parameter");return n.showTodayButton=e,f&&(ee(),oe()),p},p.showClear=function(e){if(0===arguments.length)return n.showClear;if("boolean"!=typeof e)throw new TypeError("showClear() expects a boolean parameter");return n.showClear=e,f&&(ee(),oe()),p},p.widgetParent=function(t){if(0===arguments.length)return n.widgetParent;if("string"==typeof t&&(t=e(t)),null!==t&&"string"!=typeof t&&!(t instanceof e))throw new TypeError("widgetParent() expects a string or a jQuery object parameter");return n.widgetParent=t,f&&(ee(),oe()),p},p.keepOpen=function(e){if(0===arguments.length)return n.keepOpen;if("boolean"!=typeof e)throw new TypeError("keepOpen() expects a boolean parameter");return n.keepOpen=e,p},p.focusOnShow=function(e){if(0===arguments.length)return n.focusOnShow;if("boolean"!=typeof e)throw new TypeError("focusOnShow() expects a boolean parameter");return n.focusOnShow=e,p},p.inline=function(e){if(0===arguments.length)return n.inline;if("boolean"!=typeof e)throw new TypeError("inline() expects a boolean parameter");return n.inline=e,p},p.clear=function(){return te(),p},p.keyBinds=function(e){return 0===arguments.length?n.keyBinds:(n.keyBinds=e,p)},p.getMoment=function(e){return k(e)},p.debug=function(e){if("boolean"!=typeof e)throw new TypeError("debug() expects a boolean parameter");return n.debug=e,p},p.allowInputToggle=function(e){if(0===arguments.length)return n.allowInputToggle;if("boolean"!=typeof e)throw new TypeError("allowInputToggle() expects a boolean parameter");return n.allowInputToggle=e,p},p.showClose=function(e){if(0===arguments.length)return n.showClose;if("boolean"!=typeof e)throw new TypeError("showClose() expects a boolean parameter");return n.showClose=e,p},p.keepInvalid=function(e){if(0===arguments.length)return n.keepInvalid;if("boolean"!=typeof e)throw new TypeError("keepInvalid() expects a boolean parameter");return n.keepInvalid=e,p},p.datepickerInput=function(e){if(0===arguments.length)return n.datepickerInput;if("string"!=typeof e)throw new TypeError("datepickerInput() expects a string parameter");return n.datepickerInput=e,p},p.parseInputDate=function(e){if(0===arguments.length)return n.parseInputDate;if("function"!=typeof e)throw new TypeError("parseInputDate() sholud be as function");return n.parseInputDate=e,p},p.disabledTimeIntervals=function(t){if(0===arguments.length)return n.disabledTimeIntervals?e.extend({},n.disabledTimeIntervals):n.disabledTimeIntervals;if(!t)return n.disabledTimeIntervals=!1,J(),p;if(!(t instanceof Array))throw new TypeError("disabledTimeIntervals() expects an array parameter");return n.disabledTimeIntervals=t,J(),p},p.disabledHours=function(t){if(0===arguments.length)return n.disabledHours?e.extend({},n.disabledHours):n.disabledHours;if(!t)return n.disabledHours=!1,J(),p;if(!(t instanceof Array))throw new TypeError("disabledHours() expects an array parameter");if(n.disabledHours=he(t),n.enabledHours=!1,n.useCurrent&&!n.keepInvalid){for(var i=0;!U(a,"h");){if(a.add(1,"h"),24===i)throw"Tried 24 times to find a valid date";i++}K(a)}return J(),p},p.enabledHours=function(t){if(0===arguments.length)return n.enabledHours?e.extend({},n.enabledHours):n.enabledHours;if(!t)return n.enabledHours=!1,J(),p;if(!(t instanceof Array))throw new TypeError("enabledHours() expects an array parameter");if(n.enabledHours=he(t),n.disabledHours=!1,n.useCurrent&&!n.keepInvalid){for(var i=0;!U(a,"h");){if(a.add(1,"h"),24===i)throw"Tried 24 times to find a valid date";i++}K(a)}return J(),p},p.viewDate=function(e){if(0===arguments.length)return o.clone();if(!e)return o=a.clone(),p
;if(!("string"==typeof e||t.isMoment(e)||e instanceof Date))throw new TypeError("viewDate() parameter must be one of [string, moment or Date]");return o=ie(e),L(),p},i.is("input"))r=i;else if(r=i.find(n.datepickerInput),0===r.length)r=i.find("input");else if(!r.is("input"))throw new Error('CSS class "'+n.datepickerInput+'" cannot be applied to non input element');if(i.hasClass("input-group")&&(u=0===i.find(".datepickerbutton").length?i.find(".input-group-addon"):i.find(".datepickerbutton")),!n.inline&&!r.is("input"))throw new Error("Could not initialize DateTimePicker without an input element");return a=k(),o=a.clone(),e.extend(!0,n,function(){var t,a={};return t=i.is("input")||n.inline?i.data():i.find("input").data(),t.dateOptions&&t.dateOptions instanceof Object&&(a=e.extend(!0,a,t.dateOptions)),e.each(n,function(e){var i="date"+e.charAt(0).toUpperCase()+e.slice(1);void 0!==t[i]&&(a[e]=t[i])}),a}()),p.options(n),ue(),function(){r.on({change:de,blur:n.debug?"":ee,keydown:se,keyup:le,focus:n.allowInputToggle?oe:""}),i.is("input")?r.on({focus:oe}):u&&(u.on("click",re),u.on("mousedown",!1))}(),r.prop("disabled")&&p.disable(),r.is("input")&&0!==r.val().trim().length?K(ie(r.val().trim())):n.defaultDate&&void 0===r.attr("placeholder")&&K(n.defaultDate),n.inline&&oe(),p};return e.fn.datetimepicker=function(t){t=t||{};var n,a=Array.prototype.slice.call(arguments,1),o=!0,r=["destroy","hide","show","toggle"];if("object"==typeof t)return this.each(function(){var n,a=e(this);a.data("DateTimePicker")||(n=e.extend(!0,{},e.fn.datetimepicker.defaults,t),a.data("DateTimePicker",i(a,n)))});if("string"==typeof t)return this.each(function(){var i=e(this),r=i.data("DateTimePicker");if(!r)throw new Error('bootstrap-datetimepicker("'+t+'") method was called on an element that is not using DateTimePicker');n=r[t].apply(r,a),o=n===r}),o||e.inArray(t,r)>-1?this:n;throw new TypeError("Invalid arguments for DateTimePicker: "+t)},e.fn.datetimepicker.defaults={timeZone:"",format:!1,dayViewHeaderFormat:"MMMM YYYY",extraFormats:!1,stepping:1,minDate:!1,maxDate:!1,useCurrent:!0,collapse:!0,locale:t.locale(),defaultDate:!1,disabledDates:!1,enabledDates:!1,icons:{time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down",previous:"glyphicon glyphicon-chevron-left",next:"glyphicon glyphicon-chevron-right",today:"glyphicon glyphicon-screenshot",clear:"glyphicon glyphicon-trash",close:"glyphicon glyphicon-remove"},tooltips:{today:"Go to today",clear:"Clear selection",close:"Close the picker",selectMonth:"Select Month",prevMonth:"Previous Month",nextMonth:"Next Month",selectYear:"Select Year",prevYear:"Previous Year",nextYear:"Next Year",selectDecade:"Select Decade",prevDecade:"Previous Decade",nextDecade:"Next Decade",prevCentury:"Previous Century",nextCentury:"Next Century",pickHour:"Pick Hour",incrementHour:"Increment Hour",decrementHour:"Decrement Hour",pickMinute:"Pick Minute",incrementMinute:"Increment Minute",decrementMinute:"Decrement Minute",pickSecond:"Pick Second",incrementSecond:"Increment Second",decrementSecond:"Decrement Second",togglePeriod:"Toggle Period",selectTime:"Select Time"},useStrict:!1,sideBySide:!1,daysOfWeekDisabled:!1,calendarWeeks:!1,viewMode:"days",toolbarPlacement:"default",showTodayButton:!1,showClear:!1,showClose:!1,widgetPositioning:{horizontal:"auto",vertical:"auto"},widgetParent:null,ignoreReadonly:!1,keepOpen:!1,focusOnShow:!0,inline:!1,keepInvalid:!1,datepickerInput:".datepickerinput",keyBinds:{up:function(e){if(e){var t=this.date()||this.getMoment();e.find(".datepicker").is(":visible")?this.date(t.clone().subtract(7,"d")):this.date(t.clone().add(this.stepping(),"m"))}},down:function(e){if(!e)return void this.show();var t=this.date()||this.getMoment();e.find(".datepicker").is(":visible")?this.date(t.clone().add(7,"d")):this.date(t.clone().subtract(this.stepping(),"m"))},"control up":function(e){if(e){var t=this.date()||this.getMoment();e.find(".datepicker").is(":visible")?this.date(t.clone().subtract(1,"y")):this.date(t.clone().add(1,"h"))}},"control down":function(e){if(e){var t=this.date()||this.getMoment();e.find(".datepicker").is(":visible")?this.date(t.clone().add(1,"y")):this.date(t.clone().subtract(1,"h"))}},left:function(e){if(e){var t=this.date()||this.getMoment();e.find(".datepicker").is(":visible")&&this.date(t.clone().subtract(1,"d"))}},right:function(e){if(e){var t=this.date()||this.getMoment();e.find(".datepicker").is(":visible")&&this.date(t.clone().add(1,"d"))}},pageUp:function(e){if(e){var t=this.date()||this.getMoment();e.find(".datepicker").is(":visible")&&this.date(t.clone().subtract(1,"M"))}},pageDown:function(e){if(e){var t=this.date()||this.getMoment();e.find(".datepicker").is(":visible")&&this.date(t.clone().add(1,"M"))}},enter:function(){this.hide()},escape:function(){this.hide()},"control space":function(e){e&&e.find(".timepicker").is(":visible")&&e.find('.btn[data-action="togglePeriod"]').click()},t:function(){this.date(this.getMoment())},delete:function(){this.clear()}},debug:!1,allowInputToggle:!1,disabledTimeIntervals:!1,disabledHours:!1,enabledHours:!1,viewDate:!1},e.fn.datetimepicker});
